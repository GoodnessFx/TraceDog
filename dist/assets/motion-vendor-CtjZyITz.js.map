{"version":3,"file":"motion-vendor-CtjZyITz.js","sources":["../../node_modules/motion/dist/es/framer-motion/dist/es/utils/is-browser.mjs","../../node_modules/motion/dist/es/motion-utils/dist/es/noop.mjs","../../node_modules/motion/dist/es/motion-utils/dist/es/errors.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/utils/GlobalConfig.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/frameloop/render-step.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/frameloop/batcher.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/frameloop/frame.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/motion/features/definitions.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/render/utils/is-variant-label.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/animation/utils/is-animation-controls.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/render/utils/variant-props.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/render/utils/is-controlling-variants.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/render/dom/utils/camel-to-dash.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/animation/optimized-appear/data-id.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/render/utils/resolve-variants.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/animation/utils/is-keyframes-target.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/utils/resolve-value.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/value/utils/is-motion-value.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/render/html/utils/keys-transform.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/render/dom/utils/is-css-variable.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/render/dom/value-types/get-as-type.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/utils/clamp.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/value/types/numbers/index.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/value/types/numbers/units.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/render/dom/value-types/number-browser.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/render/dom/value-types/transform.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/render/dom/value-types/type-int.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/render/dom/value-types/number.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/render/html/utils/build-transform.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/render/html/utils/build-styles.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/render/svg/utils/path.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/render/svg/utils/transform-origin.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/render/svg/utils/build-attrs.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/render/svg/utils/is-svg-tag.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/render/html/utils/render.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/render/svg/utils/camel-case-attrs.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/render/svg/utils/render.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/projection/styles/scale-correction.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/motion/utils/is-forced-motion-value.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/render/html/utils/scrape-motion-values.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/render/svg/utils/scrape-motion-values.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/render/utils/resolve-dynamic-variants.mjs","../../node_modules/motion/dist/es/motion-dom/dist/es/animation/utils/get-value-transition.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/render/html/utils/keys-position.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/frameloop/sync-time.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/utils/array.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/utils/subscription-manager.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/utils/velocity-per-second.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/value/index.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/render/utils/setters.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/value/use-will-change/is.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/value/use-will-change/add-will-change.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/animation/optimized-appear/get-appear-id.mjs","../../node_modules/motion/dist/es/motion-utils/dist/es/memo.mjs","../../node_modules/motion/dist/es/motion-dom/dist/es/utils/supports/scroll-timeline.mjs","../../node_modules/motion/dist/es/motion-dom/dist/es/animation/controls/BaseGroup.mjs","../../node_modules/motion/dist/es/motion-dom/dist/es/animation/controls/Group.mjs","../../node_modules/motion/dist/es/motion-utils/dist/es/time-conversion.mjs","../../node_modules/motion/dist/es/motion-dom/dist/es/animation/generators/utils/is-generator.mjs","../../node_modules/motion/dist/es/motion-dom/dist/es/animation/waapi/utils/attach-timeline.mjs","../../node_modules/motion/dist/es/motion-dom/dist/es/utils/is-bezier-definition.mjs","../../node_modules/motion/dist/es/motion-dom/dist/es/utils/supports/flags.mjs","../../node_modules/motion/dist/es/motion-dom/dist/es/utils/supports/memo.mjs","../../node_modules/motion/dist/es/motion-dom/dist/es/utils/supports/linear-easing.mjs","../../node_modules/motion/dist/es/motion-utils/dist/es/progress.mjs","../../node_modules/motion/dist/es/motion-dom/dist/es/animation/waapi/utils/linear.mjs","../../node_modules/motion/dist/es/motion-dom/dist/es/animation/waapi/utils/easing.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/easing/cubic-bezier.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/easing/modifiers/mirror.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/easing/modifiers/reverse.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/easing/back.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/easing/anticipate.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/easing/circ.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/utils/is-zero-value-string.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/animation/utils/is-none.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/value/types/utils/sanitize.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/value/types/utils/float-regex.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/value/types/utils/is-nullish.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/value/types/utils/single-color-regex.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/value/types/color/utils.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/value/types/color/rgba.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/value/types/color/hex.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/value/types/color/hsla.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/value/types/color/index.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/value/types/utils/color-regex.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/value/types/complex/index.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/value/types/complex/filter.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/render/dom/value-types/defaults.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/render/dom/value-types/animatable-none.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/render/html/utils/make-none-animatable.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/render/dom/utils/unit-conversion.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/render/utils/KeyframesResolver.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/utils/is-numerical-string.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/render/dom/utils/css-variables-conversion.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/render/dom/value-types/test.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/render/dom/value-types/type-auto.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/render/dom/value-types/dimensions.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/render/dom/DOMKeyframesResolver.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/animation/utils/is-animatable.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/animation/animators/utils/can-animate.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/animation/animators/waapi/utils/get-final-keyframe.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/animation/animators/BaseAnimation.mjs","../../node_modules/motion/dist/es/motion-dom/dist/es/animation/generators/utils/calc-duration.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/utils/mix/number.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/utils/hsla-to-rgba.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/utils/mix/immediate.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/utils/mix/color.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/utils/pipe.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/utils/mix/visibility.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/utils/mix/complex.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/utils/mix/index.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/animation/generators/utils/velocity.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/animation/generators/spring/defaults.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/animation/generators/spring/find.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/animation/generators/spring/index.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/animation/generators/inertia.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/easing/ease.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/easing/utils/is-easing-array.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/easing/utils/map.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/utils/interpolate.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/utils/offsets/fill.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/utils/offsets/default.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/utils/offsets/time.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/animation/generators/keyframes.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/animation/animators/drivers/driver-frameloop.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/animation/animators/MainThreadAnimation.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/animation/animators/utils/accelerated-values.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/animation/animators/waapi/index.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/animation/animators/waapi/utils/supports-waapi.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/animation/animators/AcceleratedAnimation.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/animation/utils/default-transitions.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/animation/utils/is-transition-defined.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/animation/interfaces/motion-value.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/animation/interfaces/visual-element-target.mjs","../../node_modules/motion/dist/es/motion-dom/dist/es/gestures/drag/state/is-active.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/utils/distance.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/projection/geometry/models.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/projection/geometry/conversion.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/projection/utils/has-transform.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/projection/geometry/delta-apply.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/projection/utils/measure.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/animation/animate/single-value.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/render/dom/utils/is-svg-element.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/utils/delay.mjs","../../node_modules/motion/dist/es/motion-dom/dist/es/utils/resolve-elements.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/utils/reduced-motion/state.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/utils/reduced-motion/index.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/render/dom/value-types/find.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/render/store.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/render/utils/motion-values.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/render/VisualElement.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/render/dom/DOMVisualElement.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/render/html/HTMLVisualElement.mjs","../../node_modules/motion/dist/es/framer-motion/dist/es/render/svg/SVGVisualElement.mjs"],"sourcesContent":["const isBrowser = typeof window !== \"undefined\";\r\n\r\nexport { isBrowser };\r\n","/*#__NO_SIDE_EFFECTS__*/\r\nconst noop = (any) => any;\r\n\r\nexport { noop };\r\n","import { noop } from './noop.mjs';\r\n\r\nlet warning = noop;\r\nlet invariant = noop;\r\nif (process.env.NODE_ENV !== \"production\") {\r\n    warning = (check, message) => {\r\n        if (!check && typeof console !== \"undefined\") {\r\n            console.warn(message);\r\n        }\r\n    };\r\n    invariant = (check, message) => {\r\n        if (!check) {\r\n            throw new Error(message);\r\n        }\r\n    };\r\n}\r\n\r\nexport { invariant, warning };\r\n","const MotionGlobalConfig = {\r\n    skipAnimations: false,\r\n    useManualTiming: false,\r\n};\r\n\r\nexport { MotionGlobalConfig };\r\n","function createRenderStep(runNextFrame) {\r\n    /**\r\n     * We create and reuse two queues, one to queue jobs for the current frame\r\n     * and one for the next. We reuse to avoid triggering GC after x frames.\r\n     */\r\n    let thisFrame = new Set();\r\n    let nextFrame = new Set();\r\n    /**\r\n     * Track whether we're currently processing jobs in this step. This way\r\n     * we can decide whether to schedule new jobs for this frame or next.\r\n     */\r\n    let isProcessing = false;\r\n    let flushNextFrame = false;\r\n    /**\r\n     * A set of processes which were marked keepAlive when scheduled.\r\n     */\r\n    const toKeepAlive = new WeakSet();\r\n    let latestFrameData = {\r\n        delta: 0.0,\r\n        timestamp: 0.0,\r\n        isProcessing: false,\r\n    };\r\n    function triggerCallback(callback) {\r\n        if (toKeepAlive.has(callback)) {\r\n            step.schedule(callback);\r\n            runNextFrame();\r\n        }\r\n        callback(latestFrameData);\r\n    }\r\n    const step = {\r\n        /**\r\n         * Schedule a process to run on the next frame.\r\n         */\r\n        schedule: (callback, keepAlive = false, immediate = false) => {\r\n            const addToCurrentFrame = immediate && isProcessing;\r\n            const queue = addToCurrentFrame ? thisFrame : nextFrame;\r\n            if (keepAlive)\r\n                toKeepAlive.add(callback);\r\n            if (!queue.has(callback))\r\n                queue.add(callback);\r\n            return callback;\r\n        },\r\n        /**\r\n         * Cancel the provided callback from running on the next frame.\r\n         */\r\n        cancel: (callback) => {\r\n            nextFrame.delete(callback);\r\n            toKeepAlive.delete(callback);\r\n        },\r\n        /**\r\n         * Execute all schedule callbacks.\r\n         */\r\n        process: (frameData) => {\r\n            latestFrameData = frameData;\r\n            /**\r\n             * If we're already processing we've probably been triggered by a flushSync\r\n             * inside an existing process. Instead of executing, mark flushNextFrame\r\n             * as true and ensure we flush the following frame at the end of this one.\r\n             */\r\n            if (isProcessing) {\r\n                flushNextFrame = true;\r\n                return;\r\n            }\r\n            isProcessing = true;\r\n            [thisFrame, nextFrame] = [nextFrame, thisFrame];\r\n            // Execute this frame\r\n            thisFrame.forEach(triggerCallback);\r\n            // Clear the frame so no callbacks remain. This is to avoid\r\n            // memory leaks should this render step not run for a while.\r\n            thisFrame.clear();\r\n            isProcessing = false;\r\n            if (flushNextFrame) {\r\n                flushNextFrame = false;\r\n                step.process(frameData);\r\n            }\r\n        },\r\n    };\r\n    return step;\r\n}\r\n\r\nexport { createRenderStep };\r\n","import { MotionGlobalConfig } from '../utils/GlobalConfig.mjs';\r\nimport { createRenderStep } from './render-step.mjs';\r\n\r\nconst stepsOrder = [\r\n    \"read\", // Read\r\n    \"resolveKeyframes\", // Write/Read/Write/Read\r\n    \"update\", // Compute\r\n    \"preRender\", // Compute\r\n    \"render\", // Write\r\n    \"postRender\", // Compute\r\n];\r\nconst maxElapsed = 40;\r\nfunction createRenderBatcher(scheduleNextBatch, allowKeepAlive) {\r\n    let runNextFrame = false;\r\n    let useDefaultElapsed = true;\r\n    const state = {\r\n        delta: 0.0,\r\n        timestamp: 0.0,\r\n        isProcessing: false,\r\n    };\r\n    const flagRunNextFrame = () => (runNextFrame = true);\r\n    const steps = stepsOrder.reduce((acc, key) => {\r\n        acc[key] = createRenderStep(flagRunNextFrame);\r\n        return acc;\r\n    }, {});\r\n    const { read, resolveKeyframes, update, preRender, render, postRender } = steps;\r\n    const processBatch = () => {\r\n        const timestamp = MotionGlobalConfig.useManualTiming\r\n            ? state.timestamp\r\n            : performance.now();\r\n        runNextFrame = false;\r\n        state.delta = useDefaultElapsed\r\n            ? 1000 / 60\r\n            : Math.max(Math.min(timestamp - state.timestamp, maxElapsed), 1);\r\n        state.timestamp = timestamp;\r\n        state.isProcessing = true;\r\n        // Unrolled render loop for better per-frame performance\r\n        read.process(state);\r\n        resolveKeyframes.process(state);\r\n        update.process(state);\r\n        preRender.process(state);\r\n        render.process(state);\r\n        postRender.process(state);\r\n        state.isProcessing = false;\r\n        if (runNextFrame && allowKeepAlive) {\r\n            useDefaultElapsed = false;\r\n            scheduleNextBatch(processBatch);\r\n        }\r\n    };\r\n    const wake = () => {\r\n        runNextFrame = true;\r\n        useDefaultElapsed = true;\r\n        if (!state.isProcessing) {\r\n            scheduleNextBatch(processBatch);\r\n        }\r\n    };\r\n    const schedule = stepsOrder.reduce((acc, key) => {\r\n        const step = steps[key];\r\n        acc[key] = (process, keepAlive = false, immediate = false) => {\r\n            if (!runNextFrame)\r\n                wake();\r\n            return step.schedule(process, keepAlive, immediate);\r\n        };\r\n        return acc;\r\n    }, {});\r\n    const cancel = (process) => {\r\n        for (let i = 0; i < stepsOrder.length; i++) {\r\n            steps[stepsOrder[i]].cancel(process);\r\n        }\r\n    };\r\n    return { schedule, cancel, state, steps };\r\n}\r\n\r\nexport { createRenderBatcher, stepsOrder };\r\n","import '../../../../motion-utils/dist/es/errors.mjs';\r\nimport { noop } from '../../../../motion-utils/dist/es/noop.mjs';\r\nimport { createRenderBatcher } from './batcher.mjs';\r\n\r\nconst { schedule: frame, cancel: cancelFrame, state: frameData, steps: frameSteps, } = createRenderBatcher(typeof requestAnimationFrame !== \"undefined\" ? requestAnimationFrame : noop, true);\r\n\r\nexport { cancelFrame, frame, frameData, frameSteps };\r\n","const featureProps = {\r\n    animation: [\r\n        \"animate\",\r\n        \"variants\",\r\n        \"whileHover\",\r\n        \"whileTap\",\r\n        \"exit\",\r\n        \"whileInView\",\r\n        \"whileFocus\",\r\n        \"whileDrag\",\r\n    ],\r\n    exit: [\"exit\"],\r\n    drag: [\"drag\", \"dragControls\"],\r\n    focus: [\"whileFocus\"],\r\n    hover: [\"whileHover\", \"onHoverStart\", \"onHoverEnd\"],\r\n    tap: [\"whileTap\", \"onTap\", \"onTapStart\", \"onTapCancel\"],\r\n    pan: [\"onPan\", \"onPanStart\", \"onPanSessionStart\", \"onPanEnd\"],\r\n    inView: [\"whileInView\", \"onViewportEnter\", \"onViewportLeave\"],\r\n    layout: [\"layout\", \"layoutId\"],\r\n};\r\nconst featureDefinitions = {};\r\nfor (const key in featureProps) {\r\n    featureDefinitions[key] = {\r\n        isEnabled: (props) => featureProps[key].some((name) => !!props[name]),\r\n    };\r\n}\r\n\r\nexport { featureDefinitions };\r\n","/**\r\n * Decides if the supplied variable is variant label\r\n */\r\nfunction isVariantLabel(v) {\r\n    return typeof v === \"string\" || Array.isArray(v);\r\n}\r\n\r\nexport { isVariantLabel };\r\n","function isAnimationControls(v) {\r\n    return (v !== null &&\r\n        typeof v === \"object\" &&\r\n        typeof v.start === \"function\");\r\n}\r\n\r\nexport { isAnimationControls };\r\n","const variantPriorityOrder = [\r\n    \"animate\",\r\n    \"whileInView\",\r\n    \"whileFocus\",\r\n    \"whileHover\",\r\n    \"whileTap\",\r\n    \"whileDrag\",\r\n    \"exit\",\r\n];\r\nconst variantProps = [\"initial\", ...variantPriorityOrder];\r\n\r\nexport { variantPriorityOrder, variantProps };\r\n","import { isAnimationControls } from '../../animation/utils/is-animation-controls.mjs';\r\nimport { isVariantLabel } from './is-variant-label.mjs';\r\nimport { variantProps } from './variant-props.mjs';\r\n\r\nfunction isControllingVariants(props) {\r\n    return (isAnimationControls(props.animate) ||\r\n        variantProps.some((name) => isVariantLabel(props[name])));\r\n}\r\nfunction isVariantNode(props) {\r\n    return Boolean(isControllingVariants(props) || props.variants);\r\n}\r\n\r\nexport { isControllingVariants, isVariantNode };\r\n","/**\r\n * Convert camelCase to dash-case properties.\r\n */\r\nconst camelToDash = (str) => str.replace(/([a-z])([A-Z])/gu, \"$1-$2\").toLowerCase();\r\n\r\nexport { camelToDash };\r\n","import { camelToDash } from '../../render/dom/utils/camel-to-dash.mjs';\r\n\r\nconst optimizedAppearDataId = \"framerAppearId\";\r\nconst optimizedAppearDataAttribute = \"data-\" + camelToDash(optimizedAppearDataId);\r\n\r\nexport { optimizedAppearDataAttribute, optimizedAppearDataId };\r\n","function getValueState(visualElement) {\r\n    const state = [{}, {}];\r\n    visualElement === null || visualElement === void 0 ? void 0 : visualElement.values.forEach((value, key) => {\r\n        state[0][key] = value.get();\r\n        state[1][key] = value.getVelocity();\r\n    });\r\n    return state;\r\n}\r\nfunction resolveVariantFromProps(props, definition, custom, visualElement) {\r\n    /**\r\n     * If the variant definition is a function, resolve.\r\n     */\r\n    if (typeof definition === \"function\") {\r\n        const [current, velocity] = getValueState(visualElement);\r\n        definition = definition(custom !== undefined ? custom : props.custom, current, velocity);\r\n    }\r\n    /**\r\n     * If the variant definition is a variant label, or\r\n     * the function returned a variant label, resolve.\r\n     */\r\n    if (typeof definition === \"string\") {\r\n        definition = props.variants && props.variants[definition];\r\n    }\r\n    /**\r\n     * At this point we've resolved both functions and variant labels,\r\n     * but the resolved variant label might itself have been a function.\r\n     * If so, resolve. This can only have returned a valid target object.\r\n     */\r\n    if (typeof definition === \"function\") {\r\n        const [current, velocity] = getValueState(visualElement);\r\n        definition = definition(custom !== undefined ? custom : props.custom, current, velocity);\r\n    }\r\n    return definition;\r\n}\r\n\r\nexport { resolveVariantFromProps };\r\n","const isKeyframesTarget = (v) => {\r\n    return Array.isArray(v);\r\n};\r\n\r\nexport { isKeyframesTarget };\r\n","import { isKeyframesTarget } from '../animation/utils/is-keyframes-target.mjs';\r\n\r\nconst isCustomValue = (v) => {\r\n    return Boolean(v && typeof v === \"object\" && v.mix && v.toValue);\r\n};\r\nconst resolveFinalValueInKeyframes = (v) => {\r\n    // TODO maybe throw if v.length - 1 is placeholder token?\r\n    return isKeyframesTarget(v) ? v[v.length - 1] || 0 : v;\r\n};\r\n\r\nexport { isCustomValue, resolveFinalValueInKeyframes };\r\n","const isMotionValue = (value) => Boolean(value && value.getVelocity);\r\n\r\nexport { isMotionValue };\r\n","/**\r\n * Generate a list of every possible transform key.\r\n */\r\nconst transformPropOrder = [\r\n    \"transformPerspective\",\r\n    \"x\",\r\n    \"y\",\r\n    \"z\",\r\n    \"translateX\",\r\n    \"translateY\",\r\n    \"translateZ\",\r\n    \"scale\",\r\n    \"scaleX\",\r\n    \"scaleY\",\r\n    \"rotate\",\r\n    \"rotateX\",\r\n    \"rotateY\",\r\n    \"rotateZ\",\r\n    \"skew\",\r\n    \"skewX\",\r\n    \"skewY\",\r\n];\r\n/**\r\n * A quick lookup for transform props.\r\n */\r\nconst transformProps = new Set(transformPropOrder);\r\n\r\nexport { transformPropOrder, transformProps };\r\n","const checkStringStartsWith = (token) => (key) => typeof key === \"string\" && key.startsWith(token);\r\nconst isCSSVariableName = \r\n/*@__PURE__*/ checkStringStartsWith(\"--\");\r\nconst startsAsVariableToken = \r\n/*@__PURE__*/ checkStringStartsWith(\"var(--\");\r\nconst isCSSVariableToken = (value) => {\r\n    const startsWithToken = startsAsVariableToken(value);\r\n    if (!startsWithToken)\r\n        return false;\r\n    // Ensure any comments are stripped from the value as this can harm performance of the regex.\r\n    return singleCssVariableRegex.test(value.split(\"/*\")[0].trim());\r\n};\r\nconst singleCssVariableRegex = /var\\(--(?:[\\w-]+\\s*|[\\w-]+\\s*,(?:\\s*[^)(\\s]|\\s*\\((?:[^)(]|\\([^)(]*\\))*\\))+\\s*)\\)$/iu;\r\n\r\nexport { isCSSVariableName, isCSSVariableToken };\r\n","/**\r\n * Provided a value and a ValueType, returns the value as that value type.\r\n */\r\nconst getValueAsType = (value, type) => {\r\n    return type && typeof value === \"number\"\r\n        ? type.transform(value)\r\n        : value;\r\n};\r\n\r\nexport { getValueAsType };\r\n","const clamp = (min, max, v) => {\r\n    if (v > max)\r\n        return max;\r\n    if (v < min)\r\n        return min;\r\n    return v;\r\n};\r\n\r\nexport { clamp };\r\n","import { clamp } from '../../../utils/clamp.mjs';\r\n\r\nconst number = {\r\n    test: (v) => typeof v === \"number\",\r\n    parse: parseFloat,\r\n    transform: (v) => v,\r\n};\r\nconst alpha = {\r\n    ...number,\r\n    transform: (v) => clamp(0, 1, v),\r\n};\r\nconst scale = {\r\n    ...number,\r\n    default: 1,\r\n};\r\n\r\nexport { alpha, number, scale };\r\n","const createUnitType = (unit) => ({\r\n    test: (v) => typeof v === \"string\" && v.endsWith(unit) && v.split(\" \").length === 1,\r\n    parse: parseFloat,\r\n    transform: (v) => `${v}${unit}`,\r\n});\r\nconst degrees = /*@__PURE__*/ createUnitType(\"deg\");\r\nconst percent = /*@__PURE__*/ createUnitType(\"%\");\r\nconst px = /*@__PURE__*/ createUnitType(\"px\");\r\nconst vh = /*@__PURE__*/ createUnitType(\"vh\");\r\nconst vw = /*@__PURE__*/ createUnitType(\"vw\");\r\nconst progressPercentage = {\r\n    ...percent,\r\n    parse: (v) => percent.parse(v) / 100,\r\n    transform: (v) => percent.transform(v * 100),\r\n};\r\n\r\nexport { degrees, percent, progressPercentage, px, vh, vw };\r\n","import { px } from '../../../value/types/numbers/units.mjs';\r\n\r\nconst browserNumberValueTypes = {\r\n    // Border props\r\n    borderWidth: px,\r\n    borderTopWidth: px,\r\n    borderRightWidth: px,\r\n    borderBottomWidth: px,\r\n    borderLeftWidth: px,\r\n    borderRadius: px,\r\n    radius: px,\r\n    borderTopLeftRadius: px,\r\n    borderTopRightRadius: px,\r\n    borderBottomRightRadius: px,\r\n    borderBottomLeftRadius: px,\r\n    // Positioning props\r\n    width: px,\r\n    maxWidth: px,\r\n    height: px,\r\n    maxHeight: px,\r\n    top: px,\r\n    right: px,\r\n    bottom: px,\r\n    left: px,\r\n    // Spacing props\r\n    padding: px,\r\n    paddingTop: px,\r\n    paddingRight: px,\r\n    paddingBottom: px,\r\n    paddingLeft: px,\r\n    margin: px,\r\n    marginTop: px,\r\n    marginRight: px,\r\n    marginBottom: px,\r\n    marginLeft: px,\r\n    // Misc\r\n    backgroundPositionX: px,\r\n    backgroundPositionY: px,\r\n};\r\n\r\nexport { browserNumberValueTypes };\r\n","import { scale, alpha } from '../../../value/types/numbers/index.mjs';\r\nimport { degrees, px, progressPercentage } from '../../../value/types/numbers/units.mjs';\r\n\r\nconst transformValueTypes = {\r\n    rotate: degrees,\r\n    rotateX: degrees,\r\n    rotateY: degrees,\r\n    rotateZ: degrees,\r\n    scale,\r\n    scaleX: scale,\r\n    scaleY: scale,\r\n    scaleZ: scale,\r\n    skew: degrees,\r\n    skewX: degrees,\r\n    skewY: degrees,\r\n    distance: px,\r\n    translateX: px,\r\n    translateY: px,\r\n    translateZ: px,\r\n    x: px,\r\n    y: px,\r\n    z: px,\r\n    perspective: px,\r\n    transformPerspective: px,\r\n    opacity: alpha,\r\n    originX: progressPercentage,\r\n    originY: progressPercentage,\r\n    originZ: px,\r\n};\r\n\r\nexport { transformValueTypes };\r\n","import { number } from '../../../value/types/numbers/index.mjs';\r\n\r\nconst int = {\r\n    ...number,\r\n    transform: Math.round,\r\n};\r\n\r\nexport { int };\r\n","import { alpha } from '../../../value/types/numbers/index.mjs';\r\nimport { px } from '../../../value/types/numbers/units.mjs';\r\nimport { browserNumberValueTypes } from './number-browser.mjs';\r\nimport { transformValueTypes } from './transform.mjs';\r\nimport { int } from './type-int.mjs';\r\n\r\nconst numberValueTypes = {\r\n    ...browserNumberValueTypes,\r\n    ...transformValueTypes,\r\n    zIndex: int,\r\n    size: px,\r\n    // SVG\r\n    fillOpacity: alpha,\r\n    strokeOpacity: alpha,\r\n    numOctaves: int,\r\n};\r\n\r\nexport { numberValueTypes };\r\n","import { getValueAsType } from '../../dom/value-types/get-as-type.mjs';\r\nimport { numberValueTypes } from '../../dom/value-types/number.mjs';\r\nimport { transformPropOrder } from './keys-transform.mjs';\r\n\r\nconst translateAlias = {\r\n    x: \"translateX\",\r\n    y: \"translateY\",\r\n    z: \"translateZ\",\r\n    transformPerspective: \"perspective\",\r\n};\r\nconst numTransforms = transformPropOrder.length;\r\n/**\r\n * Build a CSS transform style from individual x/y/scale etc properties.\r\n *\r\n * This outputs with a default order of transforms/scales/rotations, this can be customised by\r\n * providing a transformTemplate function.\r\n */\r\nfunction buildTransform(latestValues, transform, transformTemplate) {\r\n    // The transform string we're going to build into.\r\n    let transformString = \"\";\r\n    let transformIsDefault = true;\r\n    /**\r\n     * Loop over all possible transforms in order, adding the ones that\r\n     * are present to the transform string.\r\n     */\r\n    for (let i = 0; i < numTransforms; i++) {\r\n        const key = transformPropOrder[i];\r\n        const value = latestValues[key];\r\n        if (value === undefined)\r\n            continue;\r\n        let valueIsDefault = true;\r\n        if (typeof value === \"number\") {\r\n            valueIsDefault = value === (key.startsWith(\"scale\") ? 1 : 0);\r\n        }\r\n        else {\r\n            valueIsDefault = parseFloat(value) === 0;\r\n        }\r\n        if (!valueIsDefault || transformTemplate) {\r\n            const valueAsType = getValueAsType(value, numberValueTypes[key]);\r\n            if (!valueIsDefault) {\r\n                transformIsDefault = false;\r\n                const transformName = translateAlias[key] || key;\r\n                transformString += `${transformName}(${valueAsType}) `;\r\n            }\r\n            if (transformTemplate) {\r\n                transform[key] = valueAsType;\r\n            }\r\n        }\r\n    }\r\n    transformString = transformString.trim();\r\n    // If we have a custom `transform` template, pass our transform values and\r\n    // generated transformString to that before returning\r\n    if (transformTemplate) {\r\n        transformString = transformTemplate(transform, transformIsDefault ? \"\" : transformString);\r\n    }\r\n    else if (transformIsDefault) {\r\n        transformString = \"none\";\r\n    }\r\n    return transformString;\r\n}\r\n\r\nexport { buildTransform };\r\n","import { isCSSVariableName } from '../../dom/utils/is-css-variable.mjs';\r\nimport { getValueAsType } from '../../dom/value-types/get-as-type.mjs';\r\nimport { numberValueTypes } from '../../dom/value-types/number.mjs';\r\nimport { buildTransform } from './build-transform.mjs';\r\nimport { transformProps } from './keys-transform.mjs';\r\n\r\nfunction buildHTMLStyles(state, latestValues, transformTemplate) {\r\n    const { style, vars, transformOrigin } = state;\r\n    // Track whether we encounter any transform or transformOrigin values.\r\n    let hasTransform = false;\r\n    let hasTransformOrigin = false;\r\n    /**\r\n     * Loop over all our latest animated values and decide whether to handle them\r\n     * as a style or CSS variable.\r\n     *\r\n     * Transforms and transform origins are kept separately for further processing.\r\n     */\r\n    for (const key in latestValues) {\r\n        const value = latestValues[key];\r\n        if (transformProps.has(key)) {\r\n            // If this is a transform, flag to enable further transform processing\r\n            hasTransform = true;\r\n            continue;\r\n        }\r\n        else if (isCSSVariableName(key)) {\r\n            vars[key] = value;\r\n            continue;\r\n        }\r\n        else {\r\n            // Convert the value to its default value type, ie 0 -> \"0px\"\r\n            const valueAsType = getValueAsType(value, numberValueTypes[key]);\r\n            if (key.startsWith(\"origin\")) {\r\n                // If this is a transform origin, flag and enable further transform-origin processing\r\n                hasTransformOrigin = true;\r\n                transformOrigin[key] =\r\n                    valueAsType;\r\n            }\r\n            else {\r\n                style[key] = valueAsType;\r\n            }\r\n        }\r\n    }\r\n    if (!latestValues.transform) {\r\n        if (hasTransform || transformTemplate) {\r\n            style.transform = buildTransform(latestValues, state.transform, transformTemplate);\r\n        }\r\n        else if (style.transform) {\r\n            /**\r\n             * If we have previously created a transform but currently don't have any,\r\n             * reset transform style to none.\r\n             */\r\n            style.transform = \"none\";\r\n        }\r\n    }\r\n    /**\r\n     * Build a transformOrigin style. Uses the same defaults as the browser for\r\n     * undefined origins.\r\n     */\r\n    if (hasTransformOrigin) {\r\n        const { originX = \"50%\", originY = \"50%\", originZ = 0, } = transformOrigin;\r\n        style.transformOrigin = `${originX} ${originY} ${originZ}`;\r\n    }\r\n}\r\n\r\nexport { buildHTMLStyles };\r\n","import { px } from '../../../value/types/numbers/units.mjs';\r\n\r\nconst dashKeys = {\r\n    offset: \"stroke-dashoffset\",\r\n    array: \"stroke-dasharray\",\r\n};\r\nconst camelKeys = {\r\n    offset: \"strokeDashoffset\",\r\n    array: \"strokeDasharray\",\r\n};\r\n/**\r\n * Build SVG path properties. Uses the path's measured length to convert\r\n * our custom pathLength, pathSpacing and pathOffset into stroke-dashoffset\r\n * and stroke-dasharray attributes.\r\n *\r\n * This function is mutative to reduce per-frame GC.\r\n */\r\nfunction buildSVGPath(attrs, length, spacing = 1, offset = 0, useDashCase = true) {\r\n    // Normalise path length by setting SVG attribute pathLength to 1\r\n    attrs.pathLength = 1;\r\n    // We use dash case when setting attributes directly to the DOM node and camel case\r\n    // when defining props on a React component.\r\n    const keys = useDashCase ? dashKeys : camelKeys;\r\n    // Build the dash offset\r\n    attrs[keys.offset] = px.transform(-offset);\r\n    // Build the dash array\r\n    const pathLength = px.transform(length);\r\n    const pathSpacing = px.transform(spacing);\r\n    attrs[keys.array] = `${pathLength} ${pathSpacing}`;\r\n}\r\n\r\nexport { buildSVGPath };\r\n","import { px } from '../../../value/types/numbers/units.mjs';\r\n\r\nfunction calcOrigin(origin, offset, size) {\r\n    return typeof origin === \"string\"\r\n        ? origin\r\n        : px.transform(offset + size * origin);\r\n}\r\n/**\r\n * The SVG transform origin defaults are different to CSS and is less intuitive,\r\n * so we use the measured dimensions of the SVG to reconcile these.\r\n */\r\nfunction calcSVGTransformOrigin(dimensions, originX, originY) {\r\n    const pxOriginX = calcOrigin(originX, dimensions.x, dimensions.width);\r\n    const pxOriginY = calcOrigin(originY, dimensions.y, dimensions.height);\r\n    return `${pxOriginX} ${pxOriginY}`;\r\n}\r\n\r\nexport { calcSVGTransformOrigin };\r\n","import { buildHTMLStyles } from '../../html/utils/build-styles.mjs';\r\nimport { buildSVGPath } from './path.mjs';\r\nimport { calcSVGTransformOrigin } from './transform-origin.mjs';\r\n\r\n/**\r\n * Build SVG visual attrbutes, like cx and style.transform\r\n */\r\nfunction buildSVGAttrs(state, { attrX, attrY, attrScale, originX, originY, pathLength, pathSpacing = 1, pathOffset = 0, \r\n// This is object creation, which we try to avoid per-frame.\r\n...latest }, isSVGTag, transformTemplate) {\r\n    buildHTMLStyles(state, latest, transformTemplate);\r\n    /**\r\n     * For svg tags we just want to make sure viewBox is animatable and treat all the styles\r\n     * as normal HTML tags.\r\n     */\r\n    if (isSVGTag) {\r\n        if (state.style.viewBox) {\r\n            state.attrs.viewBox = state.style.viewBox;\r\n        }\r\n        return;\r\n    }\r\n    state.attrs = state.style;\r\n    state.style = {};\r\n    const { attrs, style, dimensions } = state;\r\n    /**\r\n     * However, we apply transforms as CSS transforms. So if we detect a transform we take it from attrs\r\n     * and copy it into style.\r\n     */\r\n    if (attrs.transform) {\r\n        if (dimensions)\r\n            style.transform = attrs.transform;\r\n        delete attrs.transform;\r\n    }\r\n    // Parse transformOrigin\r\n    if (dimensions &&\r\n        (originX !== undefined || originY !== undefined || style.transform)) {\r\n        style.transformOrigin = calcSVGTransformOrigin(dimensions, originX !== undefined ? originX : 0.5, originY !== undefined ? originY : 0.5);\r\n    }\r\n    // Render attrX/attrY/attrScale as attributes\r\n    if (attrX !== undefined)\r\n        attrs.x = attrX;\r\n    if (attrY !== undefined)\r\n        attrs.y = attrY;\r\n    if (attrScale !== undefined)\r\n        attrs.scale = attrScale;\r\n    // Build SVG path if one has been defined\r\n    if (pathLength !== undefined) {\r\n        buildSVGPath(attrs, pathLength, pathSpacing, pathOffset, false);\r\n    }\r\n}\r\n\r\nexport { buildSVGAttrs };\r\n","const isSVGTag = (tag) => typeof tag === \"string\" && tag.toLowerCase() === \"svg\";\r\n\r\nexport { isSVGTag };\r\n","function renderHTML(element, { style, vars }, styleProp, projection) {\r\n    Object.assign(element.style, style, projection && projection.getProjectionStyles(styleProp));\r\n    // Loop over any CSS variables and assign those.\r\n    for (const key in vars) {\r\n        element.style.setProperty(key, vars[key]);\r\n    }\r\n}\r\n\r\nexport { renderHTML };\r\n","/**\r\n * A set of attribute names that are always read/written as camel case.\r\n */\r\nconst camelCaseAttributes = new Set([\r\n    \"baseFrequency\",\r\n    \"diffuseConstant\",\r\n    \"kernelMatrix\",\r\n    \"kernelUnitLength\",\r\n    \"keySplines\",\r\n    \"keyTimes\",\r\n    \"limitingConeAngle\",\r\n    \"markerHeight\",\r\n    \"markerWidth\",\r\n    \"numOctaves\",\r\n    \"targetX\",\r\n    \"targetY\",\r\n    \"surfaceScale\",\r\n    \"specularConstant\",\r\n    \"specularExponent\",\r\n    \"stdDeviation\",\r\n    \"tableValues\",\r\n    \"viewBox\",\r\n    \"gradientTransform\",\r\n    \"pathLength\",\r\n    \"startOffset\",\r\n    \"textLength\",\r\n    \"lengthAdjust\",\r\n]);\r\n\r\nexport { camelCaseAttributes };\r\n","import { camelToDash } from '../../dom/utils/camel-to-dash.mjs';\r\nimport { renderHTML } from '../../html/utils/render.mjs';\r\nimport { camelCaseAttributes } from './camel-case-attrs.mjs';\r\n\r\nfunction renderSVG(element, renderState, _styleProp, projection) {\r\n    renderHTML(element, renderState, undefined, projection);\r\n    for (const key in renderState.attrs) {\r\n        element.setAttribute(!camelCaseAttributes.has(key) ? camelToDash(key) : key, renderState.attrs[key]);\r\n    }\r\n}\r\n\r\nexport { renderSVG };\r\n","const scaleCorrectors = {};\r\nfunction addScaleCorrector(correctors) {\r\n    Object.assign(scaleCorrectors, correctors);\r\n}\r\n\r\nexport { addScaleCorrector, scaleCorrectors };\r\n","import { scaleCorrectors } from '../../projection/styles/scale-correction.mjs';\r\nimport { transformProps } from '../../render/html/utils/keys-transform.mjs';\r\n\r\nfunction isForcedMotionValue(key, { layout, layoutId }) {\r\n    return (transformProps.has(key) ||\r\n        key.startsWith(\"origin\") ||\r\n        ((layout || layoutId !== undefined) &&\r\n            (!!scaleCorrectors[key] || key === \"opacity\")));\r\n}\r\n\r\nexport { isForcedMotionValue };\r\n","import { isForcedMotionValue } from '../../../motion/utils/is-forced-motion-value.mjs';\r\nimport { isMotionValue } from '../../../value/utils/is-motion-value.mjs';\r\n\r\nfunction scrapeMotionValuesFromProps(props, prevProps, visualElement) {\r\n    var _a;\r\n    const { style } = props;\r\n    const newValues = {};\r\n    for (const key in style) {\r\n        if (isMotionValue(style[key]) ||\r\n            (prevProps.style &&\r\n                isMotionValue(prevProps.style[key])) ||\r\n            isForcedMotionValue(key, props) ||\r\n            ((_a = visualElement === null || visualElement === void 0 ? void 0 : visualElement.getValue(key)) === null || _a === void 0 ? void 0 : _a.liveStyle) !== undefined) {\r\n            newValues[key] = style[key];\r\n        }\r\n    }\r\n    return newValues;\r\n}\r\n\r\nexport { scrapeMotionValuesFromProps };\r\n","import { isMotionValue } from '../../../value/utils/is-motion-value.mjs';\r\nimport { transformPropOrder } from '../../html/utils/keys-transform.mjs';\r\nimport { scrapeMotionValuesFromProps as scrapeMotionValuesFromProps$1 } from '../../html/utils/scrape-motion-values.mjs';\r\n\r\nfunction scrapeMotionValuesFromProps(props, prevProps, visualElement) {\r\n    const newValues = scrapeMotionValuesFromProps$1(props, prevProps, visualElement);\r\n    for (const key in props) {\r\n        if (isMotionValue(props[key]) ||\r\n            isMotionValue(prevProps[key])) {\r\n            const targetKey = transformPropOrder.indexOf(key) !== -1\r\n                ? \"attr\" + key.charAt(0).toUpperCase() + key.substring(1)\r\n                : key;\r\n            newValues[targetKey] = props[key];\r\n        }\r\n    }\r\n    return newValues;\r\n}\r\n\r\nexport { scrapeMotionValuesFromProps };\r\n","import { resolveVariantFromProps } from './resolve-variants.mjs';\r\n\r\nfunction resolveVariant(visualElement, definition, custom) {\r\n    const props = visualElement.getProps();\r\n    return resolveVariantFromProps(props, definition, custom !== undefined ? custom : props.custom, visualElement);\r\n}\r\n\r\nexport { resolveVariant };\r\n","function getValueTransition(transition, key) {\r\n    return transition\r\n        ? transition[key] ||\r\n            transition[\"default\"] ||\r\n            transition\r\n        : undefined;\r\n}\r\n\r\nexport { getValueTransition };\r\n","import { transformPropOrder } from './keys-transform.mjs';\r\n\r\nconst positionalKeys = new Set([\r\n    \"width\",\r\n    \"height\",\r\n    \"top\",\r\n    \"left\",\r\n    \"right\",\r\n    \"bottom\",\r\n    ...transformPropOrder,\r\n]);\r\n\r\nexport { positionalKeys };\r\n","import { MotionGlobalConfig } from '../utils/GlobalConfig.mjs';\r\nimport { frameData } from './frame.mjs';\r\n\r\nlet now;\r\nfunction clearTime() {\r\n    now = undefined;\r\n}\r\n/**\r\n * An eventloop-synchronous alternative to performance.now().\r\n *\r\n * Ensures that time measurements remain consistent within a synchronous context.\r\n * Usually calling performance.now() twice within the same synchronous context\r\n * will return different values which isn't useful for animations when we're usually\r\n * trying to sync animations to the same frame.\r\n */\r\nconst time = {\r\n    now: () => {\r\n        if (now === undefined) {\r\n            time.set(frameData.isProcessing || MotionGlobalConfig.useManualTiming\r\n                ? frameData.timestamp\r\n                : performance.now());\r\n        }\r\n        return now;\r\n    },\r\n    set: (newTime) => {\r\n        now = newTime;\r\n        queueMicrotask(clearTime);\r\n    },\r\n};\r\n\r\nexport { time };\r\n","function addUniqueItem(arr, item) {\r\n    if (arr.indexOf(item) === -1)\r\n        arr.push(item);\r\n}\r\nfunction removeItem(arr, item) {\r\n    const index = arr.indexOf(item);\r\n    if (index > -1)\r\n        arr.splice(index, 1);\r\n}\r\n// Adapted from array-move\r\nfunction moveItem([...arr], fromIndex, toIndex) {\r\n    const startIndex = fromIndex < 0 ? arr.length + fromIndex : fromIndex;\r\n    if (startIndex >= 0 && startIndex < arr.length) {\r\n        const endIndex = toIndex < 0 ? arr.length + toIndex : toIndex;\r\n        const [item] = arr.splice(fromIndex, 1);\r\n        arr.splice(endIndex, 0, item);\r\n    }\r\n    return arr;\r\n}\r\n\r\nexport { addUniqueItem, moveItem, removeItem };\r\n","import { addUniqueItem, removeItem } from './array.mjs';\r\n\r\nclass SubscriptionManager {\r\n    constructor() {\r\n        this.subscriptions = [];\r\n    }\r\n    add(handler) {\r\n        addUniqueItem(this.subscriptions, handler);\r\n        return () => removeItem(this.subscriptions, handler);\r\n    }\r\n    notify(a, b, c) {\r\n        const numSubscriptions = this.subscriptions.length;\r\n        if (!numSubscriptions)\r\n            return;\r\n        if (numSubscriptions === 1) {\r\n            /**\r\n             * If there's only a single handler we can just call it without invoking a loop.\r\n             */\r\n            this.subscriptions[0](a, b, c);\r\n        }\r\n        else {\r\n            for (let i = 0; i < numSubscriptions; i++) {\r\n                /**\r\n                 * Check whether the handler exists before firing as it's possible\r\n                 * the subscriptions were modified during this loop running.\r\n                 */\r\n                const handler = this.subscriptions[i];\r\n                handler && handler(a, b, c);\r\n            }\r\n        }\r\n    }\r\n    getSize() {\r\n        return this.subscriptions.length;\r\n    }\r\n    clear() {\r\n        this.subscriptions.length = 0;\r\n    }\r\n}\r\n\r\nexport { SubscriptionManager };\r\n","/*\r\n  Convert velocity into velocity per second\r\n\r\n  @param [number]: Unit per frame\r\n  @param [number]: Frame duration in ms\r\n*/\r\nfunction velocityPerSecond(velocity, frameDuration) {\r\n    return frameDuration ? velocity * (1000 / frameDuration) : 0;\r\n}\r\n\r\nexport { velocityPerSecond };\r\n","import { time } from '../frameloop/sync-time.mjs';\r\nimport { SubscriptionManager } from '../utils/subscription-manager.mjs';\r\nimport { velocityPerSecond } from '../utils/velocity-per-second.mjs';\r\nimport { warnOnce } from '../utils/warn-once.mjs';\r\nimport { frame } from '../frameloop/frame.mjs';\r\n\r\n/**\r\n * Maximum time between the value of two frames, beyond which we\r\n * assume the velocity has since been 0.\r\n */\r\nconst MAX_VELOCITY_DELTA = 30;\r\nconst isFloat = (value) => {\r\n    return !isNaN(parseFloat(value));\r\n};\r\nconst collectMotionValues = {\r\n    current: undefined,\r\n};\r\n/**\r\n * `MotionValue` is used to track the state and velocity of motion values.\r\n *\r\n * @public\r\n */\r\nclass MotionValue {\r\n    /**\r\n     * @param init - The initiating value\r\n     * @param config - Optional configuration options\r\n     *\r\n     * -  `transformer`: A function to transform incoming values with.\r\n     *\r\n     * @internal\r\n     */\r\n    constructor(init, options = {}) {\r\n        /**\r\n         * This will be replaced by the build step with the latest version number.\r\n         * When MotionValues are provided to motion components, warn if versions are mixed.\r\n         */\r\n        this.version = \"11.18.2\";\r\n        /**\r\n         * Tracks whether this value can output a velocity. Currently this is only true\r\n         * if the value is numerical, but we might be able to widen the scope here and support\r\n         * other value types.\r\n         *\r\n         * @internal\r\n         */\r\n        this.canTrackVelocity = null;\r\n        /**\r\n         * An object containing a SubscriptionManager for each active event.\r\n         */\r\n        this.events = {};\r\n        this.updateAndNotify = (v, render = true) => {\r\n            const currentTime = time.now();\r\n            /**\r\n             * If we're updating the value during another frame or eventloop\r\n             * than the previous frame, then the we set the previous frame value\r\n             * to current.\r\n             */\r\n            if (this.updatedAt !== currentTime) {\r\n                this.setPrevFrameValue();\r\n            }\r\n            this.prev = this.current;\r\n            this.setCurrent(v);\r\n            // Update update subscribers\r\n            if (this.current !== this.prev && this.events.change) {\r\n                this.events.change.notify(this.current);\r\n            }\r\n            // Update render subscribers\r\n            if (render && this.events.renderRequest) {\r\n                this.events.renderRequest.notify(this.current);\r\n            }\r\n        };\r\n        this.hasAnimated = false;\r\n        this.setCurrent(init);\r\n        this.owner = options.owner;\r\n    }\r\n    setCurrent(current) {\r\n        this.current = current;\r\n        this.updatedAt = time.now();\r\n        if (this.canTrackVelocity === null && current !== undefined) {\r\n            this.canTrackVelocity = isFloat(this.current);\r\n        }\r\n    }\r\n    setPrevFrameValue(prevFrameValue = this.current) {\r\n        this.prevFrameValue = prevFrameValue;\r\n        this.prevUpdatedAt = this.updatedAt;\r\n    }\r\n    /**\r\n     * Adds a function that will be notified when the `MotionValue` is updated.\r\n     *\r\n     * It returns a function that, when called, will cancel the subscription.\r\n     *\r\n     * When calling `onChange` inside a React component, it should be wrapped with the\r\n     * `useEffect` hook. As it returns an unsubscribe function, this should be returned\r\n     * from the `useEffect` function to ensure you don't add duplicate subscribers..\r\n     *\r\n     * ```jsx\r\n     * export const MyComponent = () => {\r\n     *   const x = useMotionValue(0)\r\n     *   const y = useMotionValue(0)\r\n     *   const opacity = useMotionValue(1)\r\n     *\r\n     *   useEffect(() => {\r\n     *     function updateOpacity() {\r\n     *       const maxXY = Math.max(x.get(), y.get())\r\n     *       const newOpacity = transform(maxXY, [0, 100], [1, 0])\r\n     *       opacity.set(newOpacity)\r\n     *     }\r\n     *\r\n     *     const unsubscribeX = x.on(\"change\", updateOpacity)\r\n     *     const unsubscribeY = y.on(\"change\", updateOpacity)\r\n     *\r\n     *     return () => {\r\n     *       unsubscribeX()\r\n     *       unsubscribeY()\r\n     *     }\r\n     *   }, [])\r\n     *\r\n     *   return <motion.div style={{ x }} />\r\n     * }\r\n     * ```\r\n     *\r\n     * @param subscriber - A function that receives the latest value.\r\n     * @returns A function that, when called, will cancel this subscription.\r\n     *\r\n     * @deprecated\r\n     */\r\n    onChange(subscription) {\r\n        if (process.env.NODE_ENV !== \"production\") {\r\n            warnOnce(false, `value.onChange(callback) is deprecated. Switch to value.on(\"change\", callback).`);\r\n        }\r\n        return this.on(\"change\", subscription);\r\n    }\r\n    on(eventName, callback) {\r\n        if (!this.events[eventName]) {\r\n            this.events[eventName] = new SubscriptionManager();\r\n        }\r\n        const unsubscribe = this.events[eventName].add(callback);\r\n        if (eventName === \"change\") {\r\n            return () => {\r\n                unsubscribe();\r\n                /**\r\n                 * If we have no more change listeners by the start\r\n                 * of the next frame, stop active animations.\r\n                 */\r\n                frame.read(() => {\r\n                    if (!this.events.change.getSize()) {\r\n                        this.stop();\r\n                    }\r\n                });\r\n            };\r\n        }\r\n        return unsubscribe;\r\n    }\r\n    clearListeners() {\r\n        for (const eventManagers in this.events) {\r\n            this.events[eventManagers].clear();\r\n        }\r\n    }\r\n    /**\r\n     * Attaches a passive effect to the `MotionValue`.\r\n     *\r\n     * @internal\r\n     */\r\n    attach(passiveEffect, stopPassiveEffect) {\r\n        this.passiveEffect = passiveEffect;\r\n        this.stopPassiveEffect = stopPassiveEffect;\r\n    }\r\n    /**\r\n     * Sets the state of the `MotionValue`.\r\n     *\r\n     * @remarks\r\n     *\r\n     * ```jsx\r\n     * const x = useMotionValue(0)\r\n     * x.set(10)\r\n     * ```\r\n     *\r\n     * @param latest - Latest value to set.\r\n     * @param render - Whether to notify render subscribers. Defaults to `true`\r\n     *\r\n     * @public\r\n     */\r\n    set(v, render = true) {\r\n        if (!render || !this.passiveEffect) {\r\n            this.updateAndNotify(v, render);\r\n        }\r\n        else {\r\n            this.passiveEffect(v, this.updateAndNotify);\r\n        }\r\n    }\r\n    setWithVelocity(prev, current, delta) {\r\n        this.set(current);\r\n        this.prev = undefined;\r\n        this.prevFrameValue = prev;\r\n        this.prevUpdatedAt = this.updatedAt - delta;\r\n    }\r\n    /**\r\n     * Set the state of the `MotionValue`, stopping any active animations,\r\n     * effects, and resets velocity to `0`.\r\n     */\r\n    jump(v, endAnimation = true) {\r\n        this.updateAndNotify(v);\r\n        this.prev = v;\r\n        this.prevUpdatedAt = this.prevFrameValue = undefined;\r\n        endAnimation && this.stop();\r\n        if (this.stopPassiveEffect)\r\n            this.stopPassiveEffect();\r\n    }\r\n    /**\r\n     * Returns the latest state of `MotionValue`\r\n     *\r\n     * @returns - The latest state of `MotionValue`\r\n     *\r\n     * @public\r\n     */\r\n    get() {\r\n        if (collectMotionValues.current) {\r\n            collectMotionValues.current.push(this);\r\n        }\r\n        return this.current;\r\n    }\r\n    /**\r\n     * @public\r\n     */\r\n    getPrevious() {\r\n        return this.prev;\r\n    }\r\n    /**\r\n     * Returns the latest velocity of `MotionValue`\r\n     *\r\n     * @returns - The latest velocity of `MotionValue`. Returns `0` if the state is non-numerical.\r\n     *\r\n     * @public\r\n     */\r\n    getVelocity() {\r\n        const currentTime = time.now();\r\n        if (!this.canTrackVelocity ||\r\n            this.prevFrameValue === undefined ||\r\n            currentTime - this.updatedAt > MAX_VELOCITY_DELTA) {\r\n            return 0;\r\n        }\r\n        const delta = Math.min(this.updatedAt - this.prevUpdatedAt, MAX_VELOCITY_DELTA);\r\n        // Casts because of parseFloat's poor typing\r\n        return velocityPerSecond(parseFloat(this.current) -\r\n            parseFloat(this.prevFrameValue), delta);\r\n    }\r\n    /**\r\n     * Registers a new animation to control this `MotionValue`. Only one\r\n     * animation can drive a `MotionValue` at one time.\r\n     *\r\n     * ```jsx\r\n     * value.start()\r\n     * ```\r\n     *\r\n     * @param animation - A function that starts the provided animation\r\n     *\r\n     * @internal\r\n     */\r\n    start(startAnimation) {\r\n        this.stop();\r\n        return new Promise((resolve) => {\r\n            this.hasAnimated = true;\r\n            this.animation = startAnimation(resolve);\r\n            if (this.events.animationStart) {\r\n                this.events.animationStart.notify();\r\n            }\r\n        }).then(() => {\r\n            if (this.events.animationComplete) {\r\n                this.events.animationComplete.notify();\r\n            }\r\n            this.clearAnimation();\r\n        });\r\n    }\r\n    /**\r\n     * Stop the currently active animation.\r\n     *\r\n     * @public\r\n     */\r\n    stop() {\r\n        if (this.animation) {\r\n            this.animation.stop();\r\n            if (this.events.animationCancel) {\r\n                this.events.animationCancel.notify();\r\n            }\r\n        }\r\n        this.clearAnimation();\r\n    }\r\n    /**\r\n     * Returns `true` if this value is currently animating.\r\n     *\r\n     * @public\r\n     */\r\n    isAnimating() {\r\n        return !!this.animation;\r\n    }\r\n    clearAnimation() {\r\n        delete this.animation;\r\n    }\r\n    /**\r\n     * Destroy and clean up subscribers to this `MotionValue`.\r\n     *\r\n     * The `MotionValue` hooks like `useMotionValue` and `useTransform` automatically\r\n     * handle the lifecycle of the returned `MotionValue`, so this method is only necessary if you've manually\r\n     * created a `MotionValue` via the `motionValue` function.\r\n     *\r\n     * @public\r\n     */\r\n    destroy() {\r\n        this.clearListeners();\r\n        this.stop();\r\n        if (this.stopPassiveEffect) {\r\n            this.stopPassiveEffect();\r\n        }\r\n    }\r\n}\r\nfunction motionValue(init, options) {\r\n    return new MotionValue(init, options);\r\n}\r\n\r\nexport { MotionValue, collectMotionValues, motionValue };\r\n","import { resolveFinalValueInKeyframes } from '../../utils/resolve-value.mjs';\r\nimport { motionValue } from '../../value/index.mjs';\r\nimport { resolveVariant } from './resolve-dynamic-variants.mjs';\r\n\r\n/**\r\n * Set VisualElement's MotionValue, creating a new MotionValue for it if\r\n * it doesn't exist.\r\n */\r\nfunction setMotionValue(visualElement, key, value) {\r\n    if (visualElement.hasValue(key)) {\r\n        visualElement.getValue(key).set(value);\r\n    }\r\n    else {\r\n        visualElement.addValue(key, motionValue(value));\r\n    }\r\n}\r\nfunction setTarget(visualElement, definition) {\r\n    const resolved = resolveVariant(visualElement, definition);\r\n    let { transitionEnd = {}, transition = {}, ...target } = resolved || {};\r\n    target = { ...target, ...transitionEnd };\r\n    for (const key in target) {\r\n        const value = resolveFinalValueInKeyframes(target[key]);\r\n        setMotionValue(visualElement, key, value);\r\n    }\r\n}\r\n\r\nexport { setTarget };\r\n","import { isMotionValue } from '../utils/is-motion-value.mjs';\r\n\r\nfunction isWillChangeMotionValue(value) {\r\n    return Boolean(isMotionValue(value) && value.add);\r\n}\r\n\r\nexport { isWillChangeMotionValue };\r\n","import { isWillChangeMotionValue } from './is.mjs';\r\n\r\nfunction addValueToWillChange(visualElement, key) {\r\n    const willChange = visualElement.getValue(\"willChange\");\r\n    /**\r\n     * It could be that a user has set willChange to a regular MotionValue,\r\n     * in which case we can't add the value to it.\r\n     */\r\n    if (isWillChangeMotionValue(willChange)) {\r\n        return willChange.add(key);\r\n    }\r\n}\r\n\r\nexport { addValueToWillChange };\r\n","import { optimizedAppearDataAttribute } from './data-id.mjs';\r\n\r\nfunction getOptimisedAppearId(visualElement) {\r\n    return visualElement.props[optimizedAppearDataAttribute];\r\n}\r\n\r\nexport { getOptimisedAppearId };\r\n","/*#__NO_SIDE_EFFECTS__*/\r\nfunction memo(callback) {\r\n    let result;\r\n    return () => {\r\n        if (result === undefined)\r\n            result = callback();\r\n        return result;\r\n    };\r\n}\r\n\r\nexport { memo };\r\n","import '../../../../../motion-utils/dist/es/errors.mjs';\r\nimport { memo } from '../../../../../motion-utils/dist/es/memo.mjs';\r\n\r\nconst supportsScrollTimeline = memo(() => window.ScrollTimeline !== undefined);\r\n\r\nexport { supportsScrollTimeline };\r\n","import { supportsScrollTimeline } from '../../utils/supports/scroll-timeline.mjs';\r\n\r\nclass BaseGroupPlaybackControls {\r\n    constructor(animations) {\r\n        // Bound to accomodate common `return animation.stop` pattern\r\n        this.stop = () => this.runAll(\"stop\");\r\n        this.animations = animations.filter(Boolean);\r\n    }\r\n    get finished() {\r\n        // Support for new finished Promise and legacy thennable API\r\n        return Promise.all(this.animations.map((animation) => \"finished\" in animation ? animation.finished : animation));\r\n    }\r\n    /**\r\n     * TODO: Filter out cancelled or stopped animations before returning\r\n     */\r\n    getAll(propName) {\r\n        return this.animations[0][propName];\r\n    }\r\n    setAll(propName, newValue) {\r\n        for (let i = 0; i < this.animations.length; i++) {\r\n            this.animations[i][propName] = newValue;\r\n        }\r\n    }\r\n    attachTimeline(timeline, fallback) {\r\n        const subscriptions = this.animations.map((animation) => {\r\n            if (supportsScrollTimeline() && animation.attachTimeline) {\r\n                return animation.attachTimeline(timeline);\r\n            }\r\n            else if (typeof fallback === \"function\") {\r\n                return fallback(animation);\r\n            }\r\n        });\r\n        return () => {\r\n            subscriptions.forEach((cancel, i) => {\r\n                cancel && cancel();\r\n                this.animations[i].stop();\r\n            });\r\n        };\r\n    }\r\n    get time() {\r\n        return this.getAll(\"time\");\r\n    }\r\n    set time(time) {\r\n        this.setAll(\"time\", time);\r\n    }\r\n    get speed() {\r\n        return this.getAll(\"speed\");\r\n    }\r\n    set speed(speed) {\r\n        this.setAll(\"speed\", speed);\r\n    }\r\n    get startTime() {\r\n        return this.getAll(\"startTime\");\r\n    }\r\n    get duration() {\r\n        let max = 0;\r\n        for (let i = 0; i < this.animations.length; i++) {\r\n            max = Math.max(max, this.animations[i].duration);\r\n        }\r\n        return max;\r\n    }\r\n    runAll(methodName) {\r\n        this.animations.forEach((controls) => controls[methodName]());\r\n    }\r\n    flatten() {\r\n        this.runAll(\"flatten\");\r\n    }\r\n    play() {\r\n        this.runAll(\"play\");\r\n    }\r\n    pause() {\r\n        this.runAll(\"pause\");\r\n    }\r\n    cancel() {\r\n        this.runAll(\"cancel\");\r\n    }\r\n    complete() {\r\n        this.runAll(\"complete\");\r\n    }\r\n}\r\n\r\nexport { BaseGroupPlaybackControls };\r\n","import { BaseGroupPlaybackControls } from './BaseGroup.mjs';\r\n\r\n/**\r\n * TODO: This is a temporary class to support the legacy\r\n * thennable API\r\n */\r\nclass GroupPlaybackControls extends BaseGroupPlaybackControls {\r\n    then(onResolve, onReject) {\r\n        return Promise.all(this.animations).then(onResolve).catch(onReject);\r\n    }\r\n}\r\n\r\nexport { GroupPlaybackControls };\r\n","/**\r\n * Converts seconds to milliseconds\r\n *\r\n * @param seconds - Time in seconds.\r\n * @return milliseconds - Converted time in milliseconds.\r\n */\r\n/*#__NO_SIDE_EFFECTS__*/\r\nconst secondsToMilliseconds = (seconds) => seconds * 1000;\r\n/*#__NO_SIDE_EFFECTS__*/\r\nconst millisecondsToSeconds = (milliseconds) => milliseconds / 1000;\r\n\r\nexport { millisecondsToSeconds, secondsToMilliseconds };\r\n","function isGenerator(type) {\r\n    return typeof type === \"function\";\r\n}\r\n\r\nexport { isGenerator };\r\n","function attachTimeline(animation, timeline) {\r\n    animation.timeline = timeline;\r\n    animation.onfinish = null;\r\n}\r\n\r\nexport { attachTimeline };\r\n","const isBezierDefinition = (easing) => Array.isArray(easing) && typeof easing[0] === \"number\";\r\n\r\nexport { isBezierDefinition };\r\n","/**\r\n * Add the ability for test suites to manually set support flags\r\n * to better test more environments.\r\n */\r\nconst supportsFlags = {\r\n    linearEasing: undefined,\r\n};\r\n\r\nexport { supportsFlags };\r\n","import '../../../../../motion-utils/dist/es/errors.mjs';\r\nimport { memo } from '../../../../../motion-utils/dist/es/memo.mjs';\r\nimport { supportsFlags } from './flags.mjs';\r\n\r\nfunction memoSupports(callback, supportsFlag) {\r\n    const memoized = memo(callback);\r\n    return () => { var _a; return (_a = supportsFlags[supportsFlag]) !== null && _a !== void 0 ? _a : memoized(); };\r\n}\r\n\r\nexport { memoSupports };\r\n","import { memoSupports } from './memo.mjs';\r\n\r\nconst supportsLinearEasing = /*@__PURE__*/ memoSupports(() => {\r\n    try {\r\n        document\r\n            .createElement(\"div\")\r\n            .animate({ opacity: 0 }, { easing: \"linear(0, 1)\" });\r\n    }\r\n    catch (e) {\r\n        return false;\r\n    }\r\n    return true;\r\n}, \"linearEasing\");\r\n\r\nexport { supportsLinearEasing };\r\n","/*\r\n  Progress within given range\r\n\r\n  Given a lower limit and an upper limit, we return the progress\r\n  (expressed as a number 0-1) represented by the given value, and\r\n  limit that progress to within 0-1.\r\n\r\n  @param [number]: Lower limit\r\n  @param [number]: Upper limit\r\n  @param [number]: Value to find progress within given range\r\n  @return [number]: Progress of value within range as expressed 0-1\r\n*/\r\n/*#__NO_SIDE_EFFECTS__*/\r\nconst progress = (from, to, value) => {\r\n    const toFromDifference = to - from;\r\n    return toFromDifference === 0 ? 1 : (value - from) / toFromDifference;\r\n};\r\n\r\nexport { progress };\r\n","import '../../../../../../motion-utils/dist/es/errors.mjs';\r\nimport { progress } from '../../../../../../motion-utils/dist/es/progress.mjs';\r\n\r\nconst generateLinearEasing = (easing, duration, // as milliseconds\r\nresolution = 10 // as milliseconds\r\n) => {\r\n    let points = \"\";\r\n    const numPoints = Math.max(Math.round(duration / resolution), 2);\r\n    for (let i = 0; i < numPoints; i++) {\r\n        points += easing(progress(0, numPoints - 1, i)) + \", \";\r\n    }\r\n    return `linear(${points.substring(0, points.length - 2)})`;\r\n};\r\n\r\nexport { generateLinearEasing };\r\n","import { isBezierDefinition } from '../../../utils/is-bezier-definition.mjs';\r\nimport { supportsLinearEasing } from '../../../utils/supports/linear-easing.mjs';\r\nimport { generateLinearEasing } from './linear.mjs';\r\n\r\nfunction isWaapiSupportedEasing(easing) {\r\n    return Boolean((typeof easing === \"function\" && supportsLinearEasing()) ||\r\n        !easing ||\r\n        (typeof easing === \"string\" &&\r\n            (easing in supportedWaapiEasing || supportsLinearEasing())) ||\r\n        isBezierDefinition(easing) ||\r\n        (Array.isArray(easing) && easing.every(isWaapiSupportedEasing)));\r\n}\r\nconst cubicBezierAsString = ([a, b, c, d]) => `cubic-bezier(${a}, ${b}, ${c}, ${d})`;\r\nconst supportedWaapiEasing = {\r\n    linear: \"linear\",\r\n    ease: \"ease\",\r\n    easeIn: \"ease-in\",\r\n    easeOut: \"ease-out\",\r\n    easeInOut: \"ease-in-out\",\r\n    circIn: /*@__PURE__*/ cubicBezierAsString([0, 0.65, 0.55, 1]),\r\n    circOut: /*@__PURE__*/ cubicBezierAsString([0.55, 0, 1, 0.45]),\r\n    backIn: /*@__PURE__*/ cubicBezierAsString([0.31, 0.01, 0.66, -0.59]),\r\n    backOut: /*@__PURE__*/ cubicBezierAsString([0.33, 1.53, 0.69, 0.99]),\r\n};\r\nfunction mapEasingToNativeEasing(easing, duration) {\r\n    if (!easing) {\r\n        return undefined;\r\n    }\r\n    else if (typeof easing === \"function\" && supportsLinearEasing()) {\r\n        return generateLinearEasing(easing, duration);\r\n    }\r\n    else if (isBezierDefinition(easing)) {\r\n        return cubicBezierAsString(easing);\r\n    }\r\n    else if (Array.isArray(easing)) {\r\n        return easing.map((segmentEasing) => mapEasingToNativeEasing(segmentEasing, duration) ||\r\n            supportedWaapiEasing.easeOut);\r\n    }\r\n    else {\r\n        return supportedWaapiEasing[easing];\r\n    }\r\n}\r\n\r\nexport { cubicBezierAsString, isWaapiSupportedEasing, mapEasingToNativeEasing, supportedWaapiEasing };\r\n","import '../../../../motion-utils/dist/es/errors.mjs';\r\nimport { noop } from '../../../../motion-utils/dist/es/noop.mjs';\r\n\r\n/*\r\n  Bezier function generator\r\n  This has been modified from Gatan Renaudeau's BezierEasing\r\n  https://github.com/gre/bezier-easing/blob/master/src/index.js\r\n  https://github.com/gre/bezier-easing/blob/master/LICENSE\r\n  \r\n  I've removed the newtonRaphsonIterate algo because in benchmarking it\r\n  wasn't noticiably faster than binarySubdivision, indeed removing it\r\n  usually improved times, depending on the curve.\r\n  I also removed the lookup table, as for the added bundle size and loop we're\r\n  only cutting ~4 or so subdivision iterations. I bumped the max iterations up\r\n  to 12 to compensate and this still tended to be faster for no perceivable\r\n  loss in accuracy.\r\n  Usage\r\n    const easeOut = cubicBezier(.17,.67,.83,.67);\r\n    const x = easeOut(0.5); // returns 0.627...\r\n*/\r\n// Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\r\nconst calcBezier = (t, a1, a2) => (((1.0 - 3.0 * a2 + 3.0 * a1) * t + (3.0 * a2 - 6.0 * a1)) * t + 3.0 * a1) *\r\n    t;\r\nconst subdivisionPrecision = 0.0000001;\r\nconst subdivisionMaxIterations = 12;\r\nfunction binarySubdivide(x, lowerBound, upperBound, mX1, mX2) {\r\n    let currentX;\r\n    let currentT;\r\n    let i = 0;\r\n    do {\r\n        currentT = lowerBound + (upperBound - lowerBound) / 2.0;\r\n        currentX = calcBezier(currentT, mX1, mX2) - x;\r\n        if (currentX > 0.0) {\r\n            upperBound = currentT;\r\n        }\r\n        else {\r\n            lowerBound = currentT;\r\n        }\r\n    } while (Math.abs(currentX) > subdivisionPrecision &&\r\n        ++i < subdivisionMaxIterations);\r\n    return currentT;\r\n}\r\nfunction cubicBezier(mX1, mY1, mX2, mY2) {\r\n    // If this is a linear gradient, return linear easing\r\n    if (mX1 === mY1 && mX2 === mY2)\r\n        return noop;\r\n    const getTForX = (aX) => binarySubdivide(aX, 0, 1, mX1, mX2);\r\n    // If animation is at start/end, return t without easing\r\n    return (t) => t === 0 || t === 1 ? t : calcBezier(getTForX(t), mY1, mY2);\r\n}\r\n\r\nexport { cubicBezier };\r\n","// Accepts an easing function and returns a new one that outputs mirrored values for\r\n// the second half of the animation. Turns easeIn into easeInOut.\r\nconst mirrorEasing = (easing) => (p) => p <= 0.5 ? easing(2 * p) / 2 : (2 - easing(2 * (1 - p))) / 2;\r\n\r\nexport { mirrorEasing };\r\n","// Accepts an easing function and returns a new one that outputs reversed values.\r\n// Turns easeIn into easeOut.\r\nconst reverseEasing = (easing) => (p) => 1 - easing(1 - p);\r\n\r\nexport { reverseEasing };\r\n","import { cubicBezier } from './cubic-bezier.mjs';\r\nimport { mirrorEasing } from './modifiers/mirror.mjs';\r\nimport { reverseEasing } from './modifiers/reverse.mjs';\r\n\r\nconst backOut = /*@__PURE__*/ cubicBezier(0.33, 1.53, 0.69, 0.99);\r\nconst backIn = /*@__PURE__*/ reverseEasing(backOut);\r\nconst backInOut = /*@__PURE__*/ mirrorEasing(backIn);\r\n\r\nexport { backIn, backInOut, backOut };\r\n","import { backIn } from './back.mjs';\r\n\r\nconst anticipate = (p) => (p *= 2) < 1 ? 0.5 * backIn(p) : 0.5 * (2 - Math.pow(2, -10 * (p - 1)));\r\n\r\nexport { anticipate };\r\n","import { mirrorEasing } from './modifiers/mirror.mjs';\r\nimport { reverseEasing } from './modifiers/reverse.mjs';\r\n\r\nconst circIn = (p) => 1 - Math.sin(Math.acos(p));\r\nconst circOut = reverseEasing(circIn);\r\nconst circInOut = mirrorEasing(circIn);\r\n\r\nexport { circIn, circInOut, circOut };\r\n","/**\r\n * Check if the value is a zero value string like \"0px\" or \"0%\"\r\n */\r\nconst isZeroValueString = (v) => /^0[^.\\s]+$/u.test(v);\r\n\r\nexport { isZeroValueString };\r\n","import { isZeroValueString } from '../../utils/is-zero-value-string.mjs';\r\n\r\nfunction isNone(value) {\r\n    if (typeof value === \"number\") {\r\n        return value === 0;\r\n    }\r\n    else if (value !== null) {\r\n        return value === \"none\" || value === \"0\" || isZeroValueString(value);\r\n    }\r\n    else {\r\n        return true;\r\n    }\r\n}\r\n\r\nexport { isNone };\r\n","// If this number is a decimal, make it just five decimal places\r\n// to avoid exponents\r\nconst sanitize = (v) => Math.round(v * 100000) / 100000;\r\n\r\nexport { sanitize };\r\n","const floatRegex = /-?(?:\\d+(?:\\.\\d+)?|\\.\\d+)/gu;\r\n\r\nexport { floatRegex };\r\n","function isNullish(v) {\r\n    return v == null;\r\n}\r\n\r\nexport { isNullish };\r\n","const singleColorRegex = /^(?:#[\\da-f]{3,8}|(?:rgb|hsl)a?\\((?:-?[\\d.]+%?[,\\s]+){2}-?[\\d.]+%?\\s*(?:[,/]\\s*)?(?:\\b\\d+(?:\\.\\d+)?|\\.\\d+)?%?\\))$/iu;\r\n\r\nexport { singleColorRegex };\r\n","import { floatRegex } from '../utils/float-regex.mjs';\r\nimport { isNullish } from '../utils/is-nullish.mjs';\r\nimport { singleColorRegex } from '../utils/single-color-regex.mjs';\r\n\r\n/**\r\n * Returns true if the provided string is a color, ie rgba(0,0,0,0) or #000,\r\n * but false if a number or multiple colors\r\n */\r\nconst isColorString = (type, testProp) => (v) => {\r\n    return Boolean((typeof v === \"string\" &&\r\n        singleColorRegex.test(v) &&\r\n        v.startsWith(type)) ||\r\n        (testProp &&\r\n            !isNullish(v) &&\r\n            Object.prototype.hasOwnProperty.call(v, testProp)));\r\n};\r\nconst splitColor = (aName, bName, cName) => (v) => {\r\n    if (typeof v !== \"string\")\r\n        return v;\r\n    const [a, b, c, alpha] = v.match(floatRegex);\r\n    return {\r\n        [aName]: parseFloat(a),\r\n        [bName]: parseFloat(b),\r\n        [cName]: parseFloat(c),\r\n        alpha: alpha !== undefined ? parseFloat(alpha) : 1,\r\n    };\r\n};\r\n\r\nexport { isColorString, splitColor };\r\n","import { clamp } from '../../../utils/clamp.mjs';\r\nimport { alpha, number } from '../numbers/index.mjs';\r\nimport { sanitize } from '../utils/sanitize.mjs';\r\nimport { isColorString, splitColor } from './utils.mjs';\r\n\r\nconst clampRgbUnit = (v) => clamp(0, 255, v);\r\nconst rgbUnit = {\r\n    ...number,\r\n    transform: (v) => Math.round(clampRgbUnit(v)),\r\n};\r\nconst rgba = {\r\n    test: /*@__PURE__*/ isColorString(\"rgb\", \"red\"),\r\n    parse: /*@__PURE__*/ splitColor(\"red\", \"green\", \"blue\"),\r\n    transform: ({ red, green, blue, alpha: alpha$1 = 1 }) => \"rgba(\" +\r\n        rgbUnit.transform(red) +\r\n        \", \" +\r\n        rgbUnit.transform(green) +\r\n        \", \" +\r\n        rgbUnit.transform(blue) +\r\n        \", \" +\r\n        sanitize(alpha.transform(alpha$1)) +\r\n        \")\",\r\n};\r\n\r\nexport { rgbUnit, rgba };\r\n","import { rgba } from './rgba.mjs';\r\nimport { isColorString } from './utils.mjs';\r\n\r\nfunction parseHex(v) {\r\n    let r = \"\";\r\n    let g = \"\";\r\n    let b = \"\";\r\n    let a = \"\";\r\n    // If we have 6 characters, ie #FF0000\r\n    if (v.length > 5) {\r\n        r = v.substring(1, 3);\r\n        g = v.substring(3, 5);\r\n        b = v.substring(5, 7);\r\n        a = v.substring(7, 9);\r\n        // Or we have 3 characters, ie #F00\r\n    }\r\n    else {\r\n        r = v.substring(1, 2);\r\n        g = v.substring(2, 3);\r\n        b = v.substring(3, 4);\r\n        a = v.substring(4, 5);\r\n        r += r;\r\n        g += g;\r\n        b += b;\r\n        a += a;\r\n    }\r\n    return {\r\n        red: parseInt(r, 16),\r\n        green: parseInt(g, 16),\r\n        blue: parseInt(b, 16),\r\n        alpha: a ? parseInt(a, 16) / 255 : 1,\r\n    };\r\n}\r\nconst hex = {\r\n    test: /*@__PURE__*/ isColorString(\"#\"),\r\n    parse: parseHex,\r\n    transform: rgba.transform,\r\n};\r\n\r\nexport { hex };\r\n","import { alpha } from '../numbers/index.mjs';\r\nimport { percent } from '../numbers/units.mjs';\r\nimport { sanitize } from '../utils/sanitize.mjs';\r\nimport { isColorString, splitColor } from './utils.mjs';\r\n\r\nconst hsla = {\r\n    test: /*@__PURE__*/ isColorString(\"hsl\", \"hue\"),\r\n    parse: /*@__PURE__*/ splitColor(\"hue\", \"saturation\", \"lightness\"),\r\n    transform: ({ hue, saturation, lightness, alpha: alpha$1 = 1 }) => {\r\n        return (\"hsla(\" +\r\n            Math.round(hue) +\r\n            \", \" +\r\n            percent.transform(sanitize(saturation)) +\r\n            \", \" +\r\n            percent.transform(sanitize(lightness)) +\r\n            \", \" +\r\n            sanitize(alpha.transform(alpha$1)) +\r\n            \")\");\r\n    },\r\n};\r\n\r\nexport { hsla };\r\n","import { hex } from './hex.mjs';\r\nimport { hsla } from './hsla.mjs';\r\nimport { rgba } from './rgba.mjs';\r\n\r\nconst color = {\r\n    test: (v) => rgba.test(v) || hex.test(v) || hsla.test(v),\r\n    parse: (v) => {\r\n        if (rgba.test(v)) {\r\n            return rgba.parse(v);\r\n        }\r\n        else if (hsla.test(v)) {\r\n            return hsla.parse(v);\r\n        }\r\n        else {\r\n            return hex.parse(v);\r\n        }\r\n    },\r\n    transform: (v) => {\r\n        return typeof v === \"string\"\r\n            ? v\r\n            : v.hasOwnProperty(\"red\")\r\n                ? rgba.transform(v)\r\n                : hsla.transform(v);\r\n    },\r\n};\r\n\r\nexport { color };\r\n","const colorRegex = /(?:#[\\da-f]{3,8}|(?:rgb|hsl)a?\\((?:-?[\\d.]+%?[,\\s]+){2}-?[\\d.]+%?\\s*(?:[,/]\\s*)?(?:\\b\\d+(?:\\.\\d+)?|\\.\\d+)?%?\\))/giu;\r\n\r\nexport { colorRegex };\r\n","import { color } from '../color/index.mjs';\r\nimport { colorRegex } from '../utils/color-regex.mjs';\r\nimport { floatRegex } from '../utils/float-regex.mjs';\r\nimport { sanitize } from '../utils/sanitize.mjs';\r\n\r\nfunction test(v) {\r\n    var _a, _b;\r\n    return (isNaN(v) &&\r\n        typeof v === \"string\" &&\r\n        (((_a = v.match(floatRegex)) === null || _a === void 0 ? void 0 : _a.length) || 0) +\r\n            (((_b = v.match(colorRegex)) === null || _b === void 0 ? void 0 : _b.length) || 0) >\r\n            0);\r\n}\r\nconst NUMBER_TOKEN = \"number\";\r\nconst COLOR_TOKEN = \"color\";\r\nconst VAR_TOKEN = \"var\";\r\nconst VAR_FUNCTION_TOKEN = \"var(\";\r\nconst SPLIT_TOKEN = \"${}\";\r\n// this regex consists of the `singleCssVariableRegex|rgbHSLValueRegex|digitRegex`\r\nconst complexRegex = /var\\s*\\(\\s*--(?:[\\w-]+\\s*|[\\w-]+\\s*,(?:\\s*[^)(\\s]|\\s*\\((?:[^)(]|\\([^)(]*\\))*\\))+\\s*)\\)|#[\\da-f]{3,8}|(?:rgb|hsl)a?\\((?:-?[\\d.]+%?[,\\s]+){2}-?[\\d.]+%?\\s*(?:[,/]\\s*)?(?:\\b\\d+(?:\\.\\d+)?|\\.\\d+)?%?\\)|-?(?:\\d+(?:\\.\\d+)?|\\.\\d+)/giu;\r\nfunction analyseComplexValue(value) {\r\n    const originalValue = value.toString();\r\n    const values = [];\r\n    const indexes = {\r\n        color: [],\r\n        number: [],\r\n        var: [],\r\n    };\r\n    const types = [];\r\n    let i = 0;\r\n    const tokenised = originalValue.replace(complexRegex, (parsedValue) => {\r\n        if (color.test(parsedValue)) {\r\n            indexes.color.push(i);\r\n            types.push(COLOR_TOKEN);\r\n            values.push(color.parse(parsedValue));\r\n        }\r\n        else if (parsedValue.startsWith(VAR_FUNCTION_TOKEN)) {\r\n            indexes.var.push(i);\r\n            types.push(VAR_TOKEN);\r\n            values.push(parsedValue);\r\n        }\r\n        else {\r\n            indexes.number.push(i);\r\n            types.push(NUMBER_TOKEN);\r\n            values.push(parseFloat(parsedValue));\r\n        }\r\n        ++i;\r\n        return SPLIT_TOKEN;\r\n    });\r\n    const split = tokenised.split(SPLIT_TOKEN);\r\n    return { values, split, indexes, types };\r\n}\r\nfunction parseComplexValue(v) {\r\n    return analyseComplexValue(v).values;\r\n}\r\nfunction createTransformer(source) {\r\n    const { split, types } = analyseComplexValue(source);\r\n    const numSections = split.length;\r\n    return (v) => {\r\n        let output = \"\";\r\n        for (let i = 0; i < numSections; i++) {\r\n            output += split[i];\r\n            if (v[i] !== undefined) {\r\n                const type = types[i];\r\n                if (type === NUMBER_TOKEN) {\r\n                    output += sanitize(v[i]);\r\n                }\r\n                else if (type === COLOR_TOKEN) {\r\n                    output += color.transform(v[i]);\r\n                }\r\n                else {\r\n                    output += v[i];\r\n                }\r\n            }\r\n        }\r\n        return output;\r\n    };\r\n}\r\nconst convertNumbersToZero = (v) => typeof v === \"number\" ? 0 : v;\r\nfunction getAnimatableNone(v) {\r\n    const parsed = parseComplexValue(v);\r\n    const transformer = createTransformer(v);\r\n    return transformer(parsed.map(convertNumbersToZero));\r\n}\r\nconst complex = {\r\n    test,\r\n    parse: parseComplexValue,\r\n    createTransformer,\r\n    getAnimatableNone,\r\n};\r\n\r\nexport { analyseComplexValue, complex };\r\n","import { complex } from './index.mjs';\r\nimport { floatRegex } from '../utils/float-regex.mjs';\r\n\r\n/**\r\n * Properties that should default to 1 or 100%\r\n */\r\nconst maxDefaults = new Set([\"brightness\", \"contrast\", \"saturate\", \"opacity\"]);\r\nfunction applyDefaultFilter(v) {\r\n    const [name, value] = v.slice(0, -1).split(\"(\");\r\n    if (name === \"drop-shadow\")\r\n        return v;\r\n    const [number] = value.match(floatRegex) || [];\r\n    if (!number)\r\n        return v;\r\n    const unit = value.replace(number, \"\");\r\n    let defaultValue = maxDefaults.has(name) ? 1 : 0;\r\n    if (number !== value)\r\n        defaultValue *= 100;\r\n    return name + \"(\" + defaultValue + unit + \")\";\r\n}\r\nconst functionRegex = /\\b([a-z-]*)\\(.*?\\)/gu;\r\nconst filter = {\r\n    ...complex,\r\n    getAnimatableNone: (v) => {\r\n        const functions = v.match(functionRegex);\r\n        return functions ? functions.map(applyDefaultFilter).join(\" \") : v;\r\n    },\r\n};\r\n\r\nexport { filter };\r\n","import { color } from '../../../value/types/color/index.mjs';\r\nimport { filter } from '../../../value/types/complex/filter.mjs';\r\nimport { numberValueTypes } from './number.mjs';\r\n\r\n/**\r\n * A map of default value types for common values\r\n */\r\nconst defaultValueTypes = {\r\n    ...numberValueTypes,\r\n    // Color props\r\n    color,\r\n    backgroundColor: color,\r\n    outlineColor: color,\r\n    fill: color,\r\n    stroke: color,\r\n    // Border props\r\n    borderColor: color,\r\n    borderTopColor: color,\r\n    borderRightColor: color,\r\n    borderBottomColor: color,\r\n    borderLeftColor: color,\r\n    filter,\r\n    WebkitFilter: filter,\r\n};\r\n/**\r\n * Gets the default ValueType for the provided value key\r\n */\r\nconst getDefaultValueType = (key) => defaultValueTypes[key];\r\n\r\nexport { defaultValueTypes, getDefaultValueType };\r\n","import { complex } from '../../../value/types/complex/index.mjs';\r\nimport { filter } from '../../../value/types/complex/filter.mjs';\r\nimport { getDefaultValueType } from './defaults.mjs';\r\n\r\nfunction getAnimatableNone(key, value) {\r\n    let defaultValueType = getDefaultValueType(key);\r\n    if (defaultValueType !== filter)\r\n        defaultValueType = complex;\r\n    // If value is not recognised as animatable, ie \"none\", create an animatable version origin based on the target\r\n    return defaultValueType.getAnimatableNone\r\n        ? defaultValueType.getAnimatableNone(value)\r\n        : undefined;\r\n}\r\n\r\nexport { getAnimatableNone };\r\n","import { analyseComplexValue } from '../../../value/types/complex/index.mjs';\r\nimport { getAnimatableNone } from '../../dom/value-types/animatable-none.mjs';\r\n\r\n/**\r\n * If we encounter keyframes like \"none\" or \"0\" and we also have keyframes like\r\n * \"#fff\" or \"200px 200px\" we want to find a keyframe to serve as a template for\r\n * the \"none\" keyframes. In this case \"#fff\" or \"200px 200px\" - then these get turned into\r\n * zero equivalents, i.e. \"#fff0\" or \"0px 0px\".\r\n */\r\nconst invalidTemplates = new Set([\"auto\", \"none\", \"0\"]);\r\nfunction makeNoneKeyframesAnimatable(unresolvedKeyframes, noneKeyframeIndexes, name) {\r\n    let i = 0;\r\n    let animatableTemplate = undefined;\r\n    while (i < unresolvedKeyframes.length && !animatableTemplate) {\r\n        const keyframe = unresolvedKeyframes[i];\r\n        if (typeof keyframe === \"string\" &&\r\n            !invalidTemplates.has(keyframe) &&\r\n            analyseComplexValue(keyframe).values.length) {\r\n            animatableTemplate = unresolvedKeyframes[i];\r\n        }\r\n        i++;\r\n    }\r\n    if (animatableTemplate && name) {\r\n        for (const noneIndex of noneKeyframeIndexes) {\r\n            unresolvedKeyframes[noneIndex] = getAnimatableNone(name, animatableTemplate);\r\n        }\r\n    }\r\n}\r\n\r\nexport { makeNoneKeyframesAnimatable };\r\n","import { number } from '../../../value/types/numbers/index.mjs';\r\nimport { px } from '../../../value/types/numbers/units.mjs';\r\nimport { transformPropOrder } from '../../html/utils/keys-transform.mjs';\r\n\r\nconst isNumOrPxType = (v) => v === number || v === px;\r\nconst getPosFromMatrix = (matrix, pos) => parseFloat(matrix.split(\", \")[pos]);\r\nconst getTranslateFromMatrix = (pos2, pos3) => (_bbox, { transform }) => {\r\n    if (transform === \"none\" || !transform)\r\n        return 0;\r\n    const matrix3d = transform.match(/^matrix3d\\((.+)\\)$/u);\r\n    if (matrix3d) {\r\n        return getPosFromMatrix(matrix3d[1], pos3);\r\n    }\r\n    else {\r\n        const matrix = transform.match(/^matrix\\((.+)\\)$/u);\r\n        if (matrix) {\r\n            return getPosFromMatrix(matrix[1], pos2);\r\n        }\r\n        else {\r\n            return 0;\r\n        }\r\n    }\r\n};\r\nconst transformKeys = new Set([\"x\", \"y\", \"z\"]);\r\nconst nonTranslationalTransformKeys = transformPropOrder.filter((key) => !transformKeys.has(key));\r\nfunction removeNonTranslationalTransform(visualElement) {\r\n    const removedTransforms = [];\r\n    nonTranslationalTransformKeys.forEach((key) => {\r\n        const value = visualElement.getValue(key);\r\n        if (value !== undefined) {\r\n            removedTransforms.push([key, value.get()]);\r\n            value.set(key.startsWith(\"scale\") ? 1 : 0);\r\n        }\r\n    });\r\n    return removedTransforms;\r\n}\r\nconst positionalValues = {\r\n    // Dimensions\r\n    width: ({ x }, { paddingLeft = \"0\", paddingRight = \"0\" }) => x.max - x.min - parseFloat(paddingLeft) - parseFloat(paddingRight),\r\n    height: ({ y }, { paddingTop = \"0\", paddingBottom = \"0\" }) => y.max - y.min - parseFloat(paddingTop) - parseFloat(paddingBottom),\r\n    top: (_bbox, { top }) => parseFloat(top),\r\n    left: (_bbox, { left }) => parseFloat(left),\r\n    bottom: ({ y }, { top }) => parseFloat(top) + (y.max - y.min),\r\n    right: ({ x }, { left }) => parseFloat(left) + (x.max - x.min),\r\n    // Transform\r\n    x: getTranslateFromMatrix(4, 13),\r\n    y: getTranslateFromMatrix(5, 14),\r\n};\r\n// Alias translate longform names\r\npositionalValues.translateX = positionalValues.x;\r\npositionalValues.translateY = positionalValues.y;\r\n\r\nexport { isNumOrPxType, positionalValues, removeNonTranslationalTransform };\r\n","import { removeNonTranslationalTransform } from '../dom/utils/unit-conversion.mjs';\r\nimport { frame } from '../../frameloop/frame.mjs';\r\n\r\nconst toResolve = new Set();\r\nlet isScheduled = false;\r\nlet anyNeedsMeasurement = false;\r\nfunction measureAllKeyframes() {\r\n    if (anyNeedsMeasurement) {\r\n        const resolversToMeasure = Array.from(toResolve).filter((resolver) => resolver.needsMeasurement);\r\n        const elementsToMeasure = new Set(resolversToMeasure.map((resolver) => resolver.element));\r\n        const transformsToRestore = new Map();\r\n        /**\r\n         * Write pass\r\n         * If we're measuring elements we want to remove bounding box-changing transforms.\r\n         */\r\n        elementsToMeasure.forEach((element) => {\r\n            const removedTransforms = removeNonTranslationalTransform(element);\r\n            if (!removedTransforms.length)\r\n                return;\r\n            transformsToRestore.set(element, removedTransforms);\r\n            element.render();\r\n        });\r\n        // Read\r\n        resolversToMeasure.forEach((resolver) => resolver.measureInitialState());\r\n        // Write\r\n        elementsToMeasure.forEach((element) => {\r\n            element.render();\r\n            const restore = transformsToRestore.get(element);\r\n            if (restore) {\r\n                restore.forEach(([key, value]) => {\r\n                    var _a;\r\n                    (_a = element.getValue(key)) === null || _a === void 0 ? void 0 : _a.set(value);\r\n                });\r\n            }\r\n        });\r\n        // Read\r\n        resolversToMeasure.forEach((resolver) => resolver.measureEndState());\r\n        // Write\r\n        resolversToMeasure.forEach((resolver) => {\r\n            if (resolver.suspendedScrollY !== undefined) {\r\n                window.scrollTo(0, resolver.suspendedScrollY);\r\n            }\r\n        });\r\n    }\r\n    anyNeedsMeasurement = false;\r\n    isScheduled = false;\r\n    toResolve.forEach((resolver) => resolver.complete());\r\n    toResolve.clear();\r\n}\r\nfunction readAllKeyframes() {\r\n    toResolve.forEach((resolver) => {\r\n        resolver.readKeyframes();\r\n        if (resolver.needsMeasurement) {\r\n            anyNeedsMeasurement = true;\r\n        }\r\n    });\r\n}\r\nfunction flushKeyframeResolvers() {\r\n    readAllKeyframes();\r\n    measureAllKeyframes();\r\n}\r\nclass KeyframeResolver {\r\n    constructor(unresolvedKeyframes, onComplete, name, motionValue, element, isAsync = false) {\r\n        /**\r\n         * Track whether this resolver has completed. Once complete, it never\r\n         * needs to attempt keyframe resolution again.\r\n         */\r\n        this.isComplete = false;\r\n        /**\r\n         * Track whether this resolver is async. If it is, it'll be added to the\r\n         * resolver queue and flushed in the next frame. Resolvers that aren't going\r\n         * to trigger read/write thrashing don't need to be async.\r\n         */\r\n        this.isAsync = false;\r\n        /**\r\n         * Track whether this resolver needs to perform a measurement\r\n         * to resolve its keyframes.\r\n         */\r\n        this.needsMeasurement = false;\r\n        /**\r\n         * Track whether this resolver is currently scheduled to resolve\r\n         * to allow it to be cancelled and resumed externally.\r\n         */\r\n        this.isScheduled = false;\r\n        this.unresolvedKeyframes = [...unresolvedKeyframes];\r\n        this.onComplete = onComplete;\r\n        this.name = name;\r\n        this.motionValue = motionValue;\r\n        this.element = element;\r\n        this.isAsync = isAsync;\r\n    }\r\n    scheduleResolve() {\r\n        this.isScheduled = true;\r\n        if (this.isAsync) {\r\n            toResolve.add(this);\r\n            if (!isScheduled) {\r\n                isScheduled = true;\r\n                frame.read(readAllKeyframes);\r\n                frame.resolveKeyframes(measureAllKeyframes);\r\n            }\r\n        }\r\n        else {\r\n            this.readKeyframes();\r\n            this.complete();\r\n        }\r\n    }\r\n    readKeyframes() {\r\n        const { unresolvedKeyframes, name, element, motionValue } = this;\r\n        /**\r\n         * If a keyframe is null, we hydrate it either by reading it from\r\n         * the instance, or propagating from previous keyframes.\r\n         */\r\n        for (let i = 0; i < unresolvedKeyframes.length; i++) {\r\n            if (unresolvedKeyframes[i] === null) {\r\n                /**\r\n                 * If the first keyframe is null, we need to find its value by sampling the element\r\n                 */\r\n                if (i === 0) {\r\n                    const currentValue = motionValue === null || motionValue === void 0 ? void 0 : motionValue.get();\r\n                    const finalKeyframe = unresolvedKeyframes[unresolvedKeyframes.length - 1];\r\n                    if (currentValue !== undefined) {\r\n                        unresolvedKeyframes[0] = currentValue;\r\n                    }\r\n                    else if (element && name) {\r\n                        const valueAsRead = element.readValue(name, finalKeyframe);\r\n                        if (valueAsRead !== undefined && valueAsRead !== null) {\r\n                            unresolvedKeyframes[0] = valueAsRead;\r\n                        }\r\n                    }\r\n                    if (unresolvedKeyframes[0] === undefined) {\r\n                        unresolvedKeyframes[0] = finalKeyframe;\r\n                    }\r\n                    if (motionValue && currentValue === undefined) {\r\n                        motionValue.set(unresolvedKeyframes[0]);\r\n                    }\r\n                }\r\n                else {\r\n                    unresolvedKeyframes[i] = unresolvedKeyframes[i - 1];\r\n                }\r\n            }\r\n        }\r\n    }\r\n    setFinalKeyframe() { }\r\n    measureInitialState() { }\r\n    renderEndStyles() { }\r\n    measureEndState() { }\r\n    complete() {\r\n        this.isComplete = true;\r\n        this.onComplete(this.unresolvedKeyframes, this.finalKeyframe);\r\n        toResolve.delete(this);\r\n    }\r\n    cancel() {\r\n        if (!this.isComplete) {\r\n            this.isScheduled = false;\r\n            toResolve.delete(this);\r\n        }\r\n    }\r\n    resume() {\r\n        if (!this.isComplete)\r\n            this.scheduleResolve();\r\n    }\r\n}\r\n\r\nexport { KeyframeResolver, flushKeyframeResolvers };\r\n","/**\r\n * Check if value is a numerical string, ie a string that is purely a number eg \"100\" or \"-100.1\"\r\n */\r\nconst isNumericalString = (v) => /^-?(?:\\d+(?:\\.\\d+)?|\\.\\d+)$/u.test(v);\r\n\r\nexport { isNumericalString };\r\n","import { invariant } from '../../../../../../motion-utils/dist/es/errors.mjs';\r\nimport { isNumericalString } from '../../../utils/is-numerical-string.mjs';\r\nimport { isCSSVariableToken } from './is-css-variable.mjs';\r\n\r\n/**\r\n * Parse Framer's special CSS variable format into a CSS token and a fallback.\r\n *\r\n * ```\r\n * `var(--foo, #fff)` => [`--foo`, '#fff']\r\n * ```\r\n *\r\n * @param current\r\n */\r\nconst splitCSSVariableRegex = \r\n// eslint-disable-next-line redos-detector/no-unsafe-regex -- false positive, as it can match a lot of words\r\n/^var\\(--(?:([\\w-]+)|([\\w-]+), ?([a-zA-Z\\d ()%#.,-]+))\\)/u;\r\nfunction parseCSSVariable(current) {\r\n    const match = splitCSSVariableRegex.exec(current);\r\n    if (!match)\r\n        return [,];\r\n    const [, token1, token2, fallback] = match;\r\n    return [`--${token1 !== null && token1 !== void 0 ? token1 : token2}`, fallback];\r\n}\r\nconst maxDepth = 4;\r\nfunction getVariableValue(current, element, depth = 1) {\r\n    invariant(depth <= maxDepth, `Max CSS variable fallback depth detected in property \"${current}\". This may indicate a circular fallback dependency.`);\r\n    const [token, fallback] = parseCSSVariable(current);\r\n    // No CSS variable detected\r\n    if (!token)\r\n        return;\r\n    // Attempt to read this CSS variable off the element\r\n    const resolved = window.getComputedStyle(element).getPropertyValue(token);\r\n    if (resolved) {\r\n        const trimmed = resolved.trim();\r\n        return isNumericalString(trimmed) ? parseFloat(trimmed) : trimmed;\r\n    }\r\n    return isCSSVariableToken(fallback)\r\n        ? getVariableValue(fallback, element, depth + 1)\r\n        : fallback;\r\n}\r\n\r\nexport { getVariableValue, parseCSSVariable };\r\n","/**\r\n * Tests a provided value against a ValueType\r\n */\r\nconst testValueType = (v) => (type) => type.test(v);\r\n\r\nexport { testValueType };\r\n","/**\r\n * ValueType for \"auto\"\r\n */\r\nconst auto = {\r\n    test: (v) => v === \"auto\",\r\n    parse: (v) => v,\r\n};\r\n\r\nexport { auto };\r\n","import { number } from '../../../value/types/numbers/index.mjs';\r\nimport { px, percent, degrees, vw, vh } from '../../../value/types/numbers/units.mjs';\r\nimport { testValueType } from './test.mjs';\r\nimport { auto } from './type-auto.mjs';\r\n\r\n/**\r\n * A list of value types commonly used for dimensions\r\n */\r\nconst dimensionValueTypes = [number, px, percent, degrees, vw, vh, auto];\r\n/**\r\n * Tests a dimensional value against the list of dimension ValueTypes\r\n */\r\nconst findDimensionValueType = (v) => dimensionValueTypes.find(testValueType(v));\r\n\r\nexport { dimensionValueTypes, findDimensionValueType };\r\n","import { isNone } from '../../animation/utils/is-none.mjs';\r\nimport { positionalKeys } from '../html/utils/keys-position.mjs';\r\nimport { makeNoneKeyframesAnimatable } from '../html/utils/make-none-animatable.mjs';\r\nimport { KeyframeResolver } from '../utils/KeyframesResolver.mjs';\r\nimport { getVariableValue } from './utils/css-variables-conversion.mjs';\r\nimport { isCSSVariableToken } from './utils/is-css-variable.mjs';\r\nimport { isNumOrPxType, positionalValues } from './utils/unit-conversion.mjs';\r\nimport { findDimensionValueType } from './value-types/dimensions.mjs';\r\n\r\nclass DOMKeyframesResolver extends KeyframeResolver {\r\n    constructor(unresolvedKeyframes, onComplete, name, motionValue, element) {\r\n        super(unresolvedKeyframes, onComplete, name, motionValue, element, true);\r\n    }\r\n    readKeyframes() {\r\n        const { unresolvedKeyframes, element, name } = this;\r\n        if (!element || !element.current)\r\n            return;\r\n        super.readKeyframes();\r\n        /**\r\n         * If any keyframe is a CSS variable, we need to find its value by sampling the element\r\n         */\r\n        for (let i = 0; i < unresolvedKeyframes.length; i++) {\r\n            let keyframe = unresolvedKeyframes[i];\r\n            if (typeof keyframe === \"string\") {\r\n                keyframe = keyframe.trim();\r\n                if (isCSSVariableToken(keyframe)) {\r\n                    const resolved = getVariableValue(keyframe, element.current);\r\n                    if (resolved !== undefined) {\r\n                        unresolvedKeyframes[i] = resolved;\r\n                    }\r\n                    if (i === unresolvedKeyframes.length - 1) {\r\n                        this.finalKeyframe = keyframe;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        /**\r\n         * Resolve \"none\" values. We do this potentially twice - once before and once after measuring keyframes.\r\n         * This could be seen as inefficient but it's a trade-off to avoid measurements in more situations, which\r\n         * have a far bigger performance impact.\r\n         */\r\n        this.resolveNoneKeyframes();\r\n        /**\r\n         * Check to see if unit type has changed. If so schedule jobs that will\r\n         * temporarily set styles to the destination keyframes.\r\n         * Skip if we have more than two keyframes or this isn't a positional value.\r\n         * TODO: We can throw if there are multiple keyframes and the value type changes.\r\n         */\r\n        if (!positionalKeys.has(name) || unresolvedKeyframes.length !== 2) {\r\n            return;\r\n        }\r\n        const [origin, target] = unresolvedKeyframes;\r\n        const originType = findDimensionValueType(origin);\r\n        const targetType = findDimensionValueType(target);\r\n        /**\r\n         * Either we don't recognise these value types or we can animate between them.\r\n         */\r\n        if (originType === targetType)\r\n            return;\r\n        /**\r\n         * If both values are numbers or pixels, we can animate between them by\r\n         * converting them to numbers.\r\n         */\r\n        if (isNumOrPxType(originType) && isNumOrPxType(targetType)) {\r\n            for (let i = 0; i < unresolvedKeyframes.length; i++) {\r\n                const value = unresolvedKeyframes[i];\r\n                if (typeof value === \"string\") {\r\n                    unresolvedKeyframes[i] = parseFloat(value);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            /**\r\n             * Else, the only way to resolve this is by measuring the element.\r\n             */\r\n            this.needsMeasurement = true;\r\n        }\r\n    }\r\n    resolveNoneKeyframes() {\r\n        const { unresolvedKeyframes, name } = this;\r\n        const noneKeyframeIndexes = [];\r\n        for (let i = 0; i < unresolvedKeyframes.length; i++) {\r\n            if (isNone(unresolvedKeyframes[i])) {\r\n                noneKeyframeIndexes.push(i);\r\n            }\r\n        }\r\n        if (noneKeyframeIndexes.length) {\r\n            makeNoneKeyframesAnimatable(unresolvedKeyframes, noneKeyframeIndexes, name);\r\n        }\r\n    }\r\n    measureInitialState() {\r\n        const { element, unresolvedKeyframes, name } = this;\r\n        if (!element || !element.current)\r\n            return;\r\n        if (name === \"height\") {\r\n            this.suspendedScrollY = window.pageYOffset;\r\n        }\r\n        this.measuredOrigin = positionalValues[name](element.measureViewportBox(), window.getComputedStyle(element.current));\r\n        unresolvedKeyframes[0] = this.measuredOrigin;\r\n        // Set final key frame to measure after next render\r\n        const measureKeyframe = unresolvedKeyframes[unresolvedKeyframes.length - 1];\r\n        if (measureKeyframe !== undefined) {\r\n            element.getValue(name, measureKeyframe).jump(measureKeyframe, false);\r\n        }\r\n    }\r\n    measureEndState() {\r\n        var _a;\r\n        const { element, name, unresolvedKeyframes } = this;\r\n        if (!element || !element.current)\r\n            return;\r\n        const value = element.getValue(name);\r\n        value && value.jump(this.measuredOrigin, false);\r\n        const finalKeyframeIndex = unresolvedKeyframes.length - 1;\r\n        const finalKeyframe = unresolvedKeyframes[finalKeyframeIndex];\r\n        unresolvedKeyframes[finalKeyframeIndex] = positionalValues[name](element.measureViewportBox(), window.getComputedStyle(element.current));\r\n        if (finalKeyframe !== null && this.finalKeyframe === undefined) {\r\n            this.finalKeyframe = finalKeyframe;\r\n        }\r\n        // If we removed transform values, reapply them before the next render\r\n        if ((_a = this.removedTransforms) === null || _a === void 0 ? void 0 : _a.length) {\r\n            this.removedTransforms.forEach(([unsetTransformName, unsetTransformValue]) => {\r\n                element\r\n                    .getValue(unsetTransformName)\r\n                    .set(unsetTransformValue);\r\n            });\r\n        }\r\n        this.resolveNoneKeyframes();\r\n    }\r\n}\r\n\r\nexport { DOMKeyframesResolver };\r\n","import { complex } from '../../value/types/complex/index.mjs';\r\n\r\n/**\r\n * Check if a value is animatable. Examples:\r\n *\r\n * : 100, \"100px\", \"#fff\"\r\n * : \"block\", \"url(2.jpg)\"\r\n * @param value\r\n *\r\n * @internal\r\n */\r\nconst isAnimatable = (value, name) => {\r\n    // If the list of keys tat might be non-animatable grows, replace with Set\r\n    if (name === \"zIndex\")\r\n        return false;\r\n    // If it's a number or a keyframes array, we can animate it. We might at some point\r\n    // need to do a deep isAnimatable check of keyframes, or let Popmotion handle this,\r\n    // but for now lets leave it like this for performance reasons\r\n    if (typeof value === \"number\" || Array.isArray(value))\r\n        return true;\r\n    if (typeof value === \"string\" && // It's animatable if we have a string\r\n        (complex.test(value) || value === \"0\") && // And it contains numbers and/or colors\r\n        !value.startsWith(\"url(\") // Unless it starts with \"url(\"\r\n    ) {\r\n        return true;\r\n    }\r\n    return false;\r\n};\r\n\r\nexport { isAnimatable };\r\n","import { warning } from '../../../../../../motion-utils/dist/es/errors.mjs';\r\nimport { isGenerator } from '../../../../../../motion-dom/dist/es/animation/generators/utils/is-generator.mjs';\r\nimport { isAnimatable } from '../../utils/is-animatable.mjs';\r\n\r\nfunction hasKeyframesChanged(keyframes) {\r\n    const current = keyframes[0];\r\n    if (keyframes.length === 1)\r\n        return true;\r\n    for (let i = 0; i < keyframes.length; i++) {\r\n        if (keyframes[i] !== current)\r\n            return true;\r\n    }\r\n}\r\nfunction canAnimate(keyframes, name, type, velocity) {\r\n    /**\r\n     * Check if we're able to animate between the start and end keyframes,\r\n     * and throw a warning if we're attempting to animate between one that's\r\n     * animatable and another that isn't.\r\n     */\r\n    const originKeyframe = keyframes[0];\r\n    if (originKeyframe === null)\r\n        return false;\r\n    /**\r\n     * These aren't traditionally animatable but we do support them.\r\n     * In future we could look into making this more generic or replacing\r\n     * this function with mix() === mixImmediate\r\n     */\r\n    if (name === \"display\" || name === \"visibility\")\r\n        return true;\r\n    const targetKeyframe = keyframes[keyframes.length - 1];\r\n    const isOriginAnimatable = isAnimatable(originKeyframe, name);\r\n    const isTargetAnimatable = isAnimatable(targetKeyframe, name);\r\n    warning(isOriginAnimatable === isTargetAnimatable, `You are trying to animate ${name} from \"${originKeyframe}\" to \"${targetKeyframe}\". ${originKeyframe} is not an animatable value - to enable this animation set ${originKeyframe} to a value animatable to ${targetKeyframe} via the \\`style\\` property.`);\r\n    // Always skip if any of these are true\r\n    if (!isOriginAnimatable || !isTargetAnimatable) {\r\n        return false;\r\n    }\r\n    return (hasKeyframesChanged(keyframes) ||\r\n        ((type === \"spring\" || isGenerator(type)) && velocity));\r\n}\r\n\r\nexport { canAnimate };\r\n","const isNotNull = (value) => value !== null;\r\nfunction getFinalKeyframe(keyframes, { repeat, repeatType = \"loop\" }, finalKeyframe) {\r\n    const resolvedKeyframes = keyframes.filter(isNotNull);\r\n    const index = repeat && repeatType !== \"loop\" && repeat % 2 === 1\r\n        ? 0\r\n        : resolvedKeyframes.length - 1;\r\n    return !index || finalKeyframe === undefined\r\n        ? resolvedKeyframes[index]\r\n        : finalKeyframe;\r\n}\r\n\r\nexport { getFinalKeyframe };\r\n","import { time } from '../../frameloop/sync-time.mjs';\r\nimport { flushKeyframeResolvers } from '../../render/utils/KeyframesResolver.mjs';\r\nimport { instantAnimationState } from '../../utils/use-instant-transition-state.mjs';\r\nimport { canAnimate } from './utils/can-animate.mjs';\r\nimport { getFinalKeyframe } from './waapi/utils/get-final-keyframe.mjs';\r\n\r\n/**\r\n * Maximum time allowed between an animation being created and it being\r\n * resolved for us to use the latter as the start time.\r\n *\r\n * This is to ensure that while we prefer to \"start\" an animation as soon\r\n * as it's triggered, we also want to avoid a visual jump if there's a big delay\r\n * between these two moments.\r\n */\r\nconst MAX_RESOLVE_DELAY = 40;\r\nclass BaseAnimation {\r\n    constructor({ autoplay = true, delay = 0, type = \"keyframes\", repeat = 0, repeatDelay = 0, repeatType = \"loop\", ...options }) {\r\n        // Track whether the animation has been stopped. Stopped animations won't restart.\r\n        this.isStopped = false;\r\n        this.hasAttemptedResolve = false;\r\n        this.createdAt = time.now();\r\n        this.options = {\r\n            autoplay,\r\n            delay,\r\n            type,\r\n            repeat,\r\n            repeatDelay,\r\n            repeatType,\r\n            ...options,\r\n        };\r\n        this.updateFinishedPromise();\r\n    }\r\n    /**\r\n     * This method uses the createdAt and resolvedAt to calculate the\r\n     * animation startTime. *Ideally*, we would use the createdAt time as t=0\r\n     * as the following frame would then be the first frame of the animation in\r\n     * progress, which would feel snappier.\r\n     *\r\n     * However, if there's a delay (main thread work) between the creation of\r\n     * the animation and the first commited frame, we prefer to use resolvedAt\r\n     * to avoid a sudden jump into the animation.\r\n     */\r\n    calcStartTime() {\r\n        if (!this.resolvedAt)\r\n            return this.createdAt;\r\n        return this.resolvedAt - this.createdAt > MAX_RESOLVE_DELAY\r\n            ? this.resolvedAt\r\n            : this.createdAt;\r\n    }\r\n    /**\r\n     * A getter for resolved data. If keyframes are not yet resolved, accessing\r\n     * this.resolved will synchronously flush all pending keyframe resolvers.\r\n     * This is a deoptimisation, but at its worst still batches read/writes.\r\n     */\r\n    get resolved() {\r\n        if (!this._resolved && !this.hasAttemptedResolve) {\r\n            flushKeyframeResolvers();\r\n        }\r\n        return this._resolved;\r\n    }\r\n    /**\r\n     * A method to be called when the keyframes resolver completes. This method\r\n     * will check if its possible to run the animation and, if not, skip it.\r\n     * Otherwise, it will call initPlayback on the implementing class.\r\n     */\r\n    onKeyframesResolved(keyframes, finalKeyframe) {\r\n        this.resolvedAt = time.now();\r\n        this.hasAttemptedResolve = true;\r\n        const { name, type, velocity, delay, onComplete, onUpdate, isGenerator, } = this.options;\r\n        /**\r\n         * If we can't animate this value with the resolved keyframes\r\n         * then we should complete it immediately.\r\n         */\r\n        if (!isGenerator && !canAnimate(keyframes, name, type, velocity)) {\r\n            // Finish immediately\r\n            if (instantAnimationState.current || !delay) {\r\n                onUpdate &&\r\n                    onUpdate(getFinalKeyframe(keyframes, this.options, finalKeyframe));\r\n                onComplete && onComplete();\r\n                this.resolveFinishedPromise();\r\n                return;\r\n            }\r\n            // Finish after a delay\r\n            else {\r\n                this.options.duration = 0;\r\n            }\r\n        }\r\n        const resolvedAnimation = this.initPlayback(keyframes, finalKeyframe);\r\n        if (resolvedAnimation === false)\r\n            return;\r\n        this._resolved = {\r\n            keyframes,\r\n            finalKeyframe,\r\n            ...resolvedAnimation,\r\n        };\r\n        this.onPostResolved();\r\n    }\r\n    onPostResolved() { }\r\n    /**\r\n     * Allows the returned animation to be awaited or promise-chained. Currently\r\n     * resolves when the animation finishes at all but in a future update could/should\r\n     * reject if its cancels.\r\n     */\r\n    then(resolve, reject) {\r\n        return this.currentFinishedPromise.then(resolve, reject);\r\n    }\r\n    flatten() {\r\n        this.options.type = \"keyframes\";\r\n        this.options.ease = \"linear\";\r\n    }\r\n    updateFinishedPromise() {\r\n        this.currentFinishedPromise = new Promise((resolve) => {\r\n            this.resolveFinishedPromise = resolve;\r\n        });\r\n    }\r\n}\r\n\r\nexport { BaseAnimation };\r\n","/**\r\n * Implement a practical max duration for keyframe generation\r\n * to prevent infinite loops\r\n */\r\nconst maxGeneratorDuration = 20000;\r\nfunction calcGeneratorDuration(generator) {\r\n    let duration = 0;\r\n    const timeStep = 50;\r\n    let state = generator.next(duration);\r\n    while (!state.done && duration < maxGeneratorDuration) {\r\n        duration += timeStep;\r\n        state = generator.next(duration);\r\n    }\r\n    return duration >= maxGeneratorDuration ? Infinity : duration;\r\n}\r\n\r\nexport { calcGeneratorDuration, maxGeneratorDuration };\r\n","/*\r\n  Value in range from progress\r\n\r\n  Given a lower limit and an upper limit, we return the value within\r\n  that range as expressed by progress (usually a number from 0 to 1)\r\n\r\n  So progress = 0.5 would change\r\n\r\n  from -------- to\r\n\r\n  to\r\n\r\n  from ---- to\r\n\r\n  E.g. from = 10, to = 20, progress = 0.5 => 15\r\n\r\n  @param [number]: Lower limit of range\r\n  @param [number]: Upper limit of range\r\n  @param [number]: The progress between lower and upper limits expressed 0-1\r\n  @return [number]: Value as calculated from progress within range (not limited within range)\r\n*/\r\nconst mixNumber = (from, to, progress) => {\r\n    return from + (to - from) * progress;\r\n};\r\n\r\nexport { mixNumber };\r\n","// Adapted from https://gist.github.com/mjackson/5311256\r\nfunction hueToRgb(p, q, t) {\r\n    if (t < 0)\r\n        t += 1;\r\n    if (t > 1)\r\n        t -= 1;\r\n    if (t < 1 / 6)\r\n        return p + (q - p) * 6 * t;\r\n    if (t < 1 / 2)\r\n        return q;\r\n    if (t < 2 / 3)\r\n        return p + (q - p) * (2 / 3 - t) * 6;\r\n    return p;\r\n}\r\nfunction hslaToRgba({ hue, saturation, lightness, alpha }) {\r\n    hue /= 360;\r\n    saturation /= 100;\r\n    lightness /= 100;\r\n    let red = 0;\r\n    let green = 0;\r\n    let blue = 0;\r\n    if (!saturation) {\r\n        red = green = blue = lightness;\r\n    }\r\n    else {\r\n        const q = lightness < 0.5\r\n            ? lightness * (1 + saturation)\r\n            : lightness + saturation - lightness * saturation;\r\n        const p = 2 * lightness - q;\r\n        red = hueToRgb(p, q, hue + 1 / 3);\r\n        green = hueToRgb(p, q, hue);\r\n        blue = hueToRgb(p, q, hue - 1 / 3);\r\n    }\r\n    return {\r\n        red: Math.round(red * 255),\r\n        green: Math.round(green * 255),\r\n        blue: Math.round(blue * 255),\r\n        alpha,\r\n    };\r\n}\r\n\r\nexport { hslaToRgba };\r\n","function mixImmediate(a, b) {\r\n    return (p) => (p > 0 ? b : a);\r\n}\r\n\r\nexport { mixImmediate };\r\n","import { mixNumber } from './number.mjs';\r\nimport { warning } from '../../../../../motion-utils/dist/es/errors.mjs';\r\nimport { hslaToRgba } from '../hsla-to-rgba.mjs';\r\nimport { hex } from '../../value/types/color/hex.mjs';\r\nimport { rgba } from '../../value/types/color/rgba.mjs';\r\nimport { hsla } from '../../value/types/color/hsla.mjs';\r\nimport { mixImmediate } from './immediate.mjs';\r\n\r\n// Linear color space blending\r\n// Explained https://www.youtube.com/watch?v=LKnqECcg6Gw\r\n// Demonstrated http://codepen.io/osublake/pen/xGVVaN\r\nconst mixLinearColor = (from, to, v) => {\r\n    const fromExpo = from * from;\r\n    const expo = v * (to * to - fromExpo) + fromExpo;\r\n    return expo < 0 ? 0 : Math.sqrt(expo);\r\n};\r\nconst colorTypes = [hex, rgba, hsla];\r\nconst getColorType = (v) => colorTypes.find((type) => type.test(v));\r\nfunction asRGBA(color) {\r\n    const type = getColorType(color);\r\n    warning(Boolean(type), `'${color}' is not an animatable color. Use the equivalent color code instead.`);\r\n    if (!Boolean(type))\r\n        return false;\r\n    let model = type.parse(color);\r\n    if (type === hsla) {\r\n        // TODO Remove this cast - needed since Motion's stricter typing\r\n        model = hslaToRgba(model);\r\n    }\r\n    return model;\r\n}\r\nconst mixColor = (from, to) => {\r\n    const fromRGBA = asRGBA(from);\r\n    const toRGBA = asRGBA(to);\r\n    if (!fromRGBA || !toRGBA) {\r\n        return mixImmediate(from, to);\r\n    }\r\n    const blended = { ...fromRGBA };\r\n    return (v) => {\r\n        blended.red = mixLinearColor(fromRGBA.red, toRGBA.red, v);\r\n        blended.green = mixLinearColor(fromRGBA.green, toRGBA.green, v);\r\n        blended.blue = mixLinearColor(fromRGBA.blue, toRGBA.blue, v);\r\n        blended.alpha = mixNumber(fromRGBA.alpha, toRGBA.alpha, v);\r\n        return rgba.transform(blended);\r\n    };\r\n};\r\n\r\nexport { mixColor, mixLinearColor };\r\n","/**\r\n * Pipe\r\n * Compose other transformers to run linearily\r\n * pipe(min(20), max(40))\r\n * @param  {...functions} transformers\r\n * @return {function}\r\n */\r\nconst combineFunctions = (a, b) => (v) => b(a(v));\r\nconst pipe = (...transformers) => transformers.reduce(combineFunctions);\r\n\r\nexport { pipe };\r\n","const invisibleValues = new Set([\"none\", \"hidden\"]);\r\n/**\r\n * Returns a function that, when provided a progress value between 0 and 1,\r\n * will return the \"none\" or \"hidden\" string only when the progress is that of\r\n * the origin or target.\r\n */\r\nfunction mixVisibility(origin, target) {\r\n    if (invisibleValues.has(origin)) {\r\n        return (p) => (p <= 0 ? origin : target);\r\n    }\r\n    else {\r\n        return (p) => (p >= 1 ? target : origin);\r\n    }\r\n}\r\n\r\nexport { invisibleValues, mixVisibility };\r\n","import { mixNumber as mixNumber$1 } from './number.mjs';\r\nimport { mixColor } from './color.mjs';\r\nimport { pipe } from '../pipe.mjs';\r\nimport { warning } from '../../../../../motion-utils/dist/es/errors.mjs';\r\nimport { color } from '../../value/types/color/index.mjs';\r\nimport { complex, analyseComplexValue } from '../../value/types/complex/index.mjs';\r\nimport { isCSSVariableToken } from '../../render/dom/utils/is-css-variable.mjs';\r\nimport { invisibleValues, mixVisibility } from './visibility.mjs';\r\nimport { mixImmediate } from './immediate.mjs';\r\n\r\nfunction mixNumber(a, b) {\r\n    return (p) => mixNumber$1(a, b, p);\r\n}\r\nfunction getMixer(a) {\r\n    if (typeof a === \"number\") {\r\n        return mixNumber;\r\n    }\r\n    else if (typeof a === \"string\") {\r\n        return isCSSVariableToken(a)\r\n            ? mixImmediate\r\n            : color.test(a)\r\n                ? mixColor\r\n                : mixComplex;\r\n    }\r\n    else if (Array.isArray(a)) {\r\n        return mixArray;\r\n    }\r\n    else if (typeof a === \"object\") {\r\n        return color.test(a) ? mixColor : mixObject;\r\n    }\r\n    return mixImmediate;\r\n}\r\nfunction mixArray(a, b) {\r\n    const output = [...a];\r\n    const numValues = output.length;\r\n    const blendValue = a.map((v, i) => getMixer(v)(v, b[i]));\r\n    return (p) => {\r\n        for (let i = 0; i < numValues; i++) {\r\n            output[i] = blendValue[i](p);\r\n        }\r\n        return output;\r\n    };\r\n}\r\nfunction mixObject(a, b) {\r\n    const output = { ...a, ...b };\r\n    const blendValue = {};\r\n    for (const key in output) {\r\n        if (a[key] !== undefined && b[key] !== undefined) {\r\n            blendValue[key] = getMixer(a[key])(a[key], b[key]);\r\n        }\r\n    }\r\n    return (v) => {\r\n        for (const key in blendValue) {\r\n            output[key] = blendValue[key](v);\r\n        }\r\n        return output;\r\n    };\r\n}\r\nfunction matchOrder(origin, target) {\r\n    var _a;\r\n    const orderedOrigin = [];\r\n    const pointers = { color: 0, var: 0, number: 0 };\r\n    for (let i = 0; i < target.values.length; i++) {\r\n        const type = target.types[i];\r\n        const originIndex = origin.indexes[type][pointers[type]];\r\n        const originValue = (_a = origin.values[originIndex]) !== null && _a !== void 0 ? _a : 0;\r\n        orderedOrigin[i] = originValue;\r\n        pointers[type]++;\r\n    }\r\n    return orderedOrigin;\r\n}\r\nconst mixComplex = (origin, target) => {\r\n    const template = complex.createTransformer(target);\r\n    const originStats = analyseComplexValue(origin);\r\n    const targetStats = analyseComplexValue(target);\r\n    const canInterpolate = originStats.indexes.var.length === targetStats.indexes.var.length &&\r\n        originStats.indexes.color.length === targetStats.indexes.color.length &&\r\n        originStats.indexes.number.length >= targetStats.indexes.number.length;\r\n    if (canInterpolate) {\r\n        if ((invisibleValues.has(origin) &&\r\n            !targetStats.values.length) ||\r\n            (invisibleValues.has(target) &&\r\n                !originStats.values.length)) {\r\n            return mixVisibility(origin, target);\r\n        }\r\n        return pipe(mixArray(matchOrder(originStats, targetStats), targetStats.values), template);\r\n    }\r\n    else {\r\n        warning(true, `Complex values '${origin}' and '${target}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`);\r\n        return mixImmediate(origin, target);\r\n    }\r\n};\r\n\r\nexport { getMixer, mixArray, mixComplex, mixObject };\r\n","import { getMixer } from './complex.mjs';\r\nimport { mixNumber } from './number.mjs';\r\n\r\nfunction mix(from, to, p) {\r\n    if (typeof from === \"number\" &&\r\n        typeof to === \"number\" &&\r\n        typeof p === \"number\") {\r\n        return mixNumber(from, to, p);\r\n    }\r\n    const mixer = getMixer(from);\r\n    return mixer(from, to);\r\n}\r\n\r\nexport { mix };\r\n","import { velocityPerSecond } from '../../../utils/velocity-per-second.mjs';\r\n\r\nconst velocitySampleDuration = 5; // ms\r\nfunction calcGeneratorVelocity(resolveValue, t, current) {\r\n    const prevT = Math.max(t - velocitySampleDuration, 0);\r\n    return velocityPerSecond(current - resolveValue(prevT), t - prevT);\r\n}\r\n\r\nexport { calcGeneratorVelocity };\r\n","const springDefaults = {\r\n    // Default spring physics\r\n    stiffness: 100,\r\n    damping: 10,\r\n    mass: 1.0,\r\n    velocity: 0.0,\r\n    // Default duration/bounce-based options\r\n    duration: 800, // in ms\r\n    bounce: 0.3,\r\n    visualDuration: 0.3, // in seconds\r\n    // Rest thresholds\r\n    restSpeed: {\r\n        granular: 0.01,\r\n        default: 2,\r\n    },\r\n    restDelta: {\r\n        granular: 0.005,\r\n        default: 0.5,\r\n    },\r\n    // Limits\r\n    minDuration: 0.01, // in seconds\r\n    maxDuration: 10.0, // in seconds\r\n    minDamping: 0.05,\r\n    maxDamping: 1,\r\n};\r\n\r\nexport { springDefaults };\r\n","import { warning } from '../../../../../../motion-utils/dist/es/errors.mjs';\r\nimport { secondsToMilliseconds, millisecondsToSeconds } from '../../../../../../motion-utils/dist/es/time-conversion.mjs';\r\nimport { clamp } from '../../../utils/clamp.mjs';\r\nimport { springDefaults } from './defaults.mjs';\r\n\r\nconst safeMin = 0.001;\r\nfunction findSpring({ duration = springDefaults.duration, bounce = springDefaults.bounce, velocity = springDefaults.velocity, mass = springDefaults.mass, }) {\r\n    let envelope;\r\n    let derivative;\r\n    warning(duration <= secondsToMilliseconds(springDefaults.maxDuration), \"Spring duration must be 10 seconds or less\");\r\n    let dampingRatio = 1 - bounce;\r\n    /**\r\n     * Restrict dampingRatio and duration to within acceptable ranges.\r\n     */\r\n    dampingRatio = clamp(springDefaults.minDamping, springDefaults.maxDamping, dampingRatio);\r\n    duration = clamp(springDefaults.minDuration, springDefaults.maxDuration, millisecondsToSeconds(duration));\r\n    if (dampingRatio < 1) {\r\n        /**\r\n         * Underdamped spring\r\n         */\r\n        envelope = (undampedFreq) => {\r\n            const exponentialDecay = undampedFreq * dampingRatio;\r\n            const delta = exponentialDecay * duration;\r\n            const a = exponentialDecay - velocity;\r\n            const b = calcAngularFreq(undampedFreq, dampingRatio);\r\n            const c = Math.exp(-delta);\r\n            return safeMin - (a / b) * c;\r\n        };\r\n        derivative = (undampedFreq) => {\r\n            const exponentialDecay = undampedFreq * dampingRatio;\r\n            const delta = exponentialDecay * duration;\r\n            const d = delta * velocity + velocity;\r\n            const e = Math.pow(dampingRatio, 2) * Math.pow(undampedFreq, 2) * duration;\r\n            const f = Math.exp(-delta);\r\n            const g = calcAngularFreq(Math.pow(undampedFreq, 2), dampingRatio);\r\n            const factor = -envelope(undampedFreq) + safeMin > 0 ? -1 : 1;\r\n            return (factor * ((d - e) * f)) / g;\r\n        };\r\n    }\r\n    else {\r\n        /**\r\n         * Critically-damped spring\r\n         */\r\n        envelope = (undampedFreq) => {\r\n            const a = Math.exp(-undampedFreq * duration);\r\n            const b = (undampedFreq - velocity) * duration + 1;\r\n            return -safeMin + a * b;\r\n        };\r\n        derivative = (undampedFreq) => {\r\n            const a = Math.exp(-undampedFreq * duration);\r\n            const b = (velocity - undampedFreq) * (duration * duration);\r\n            return a * b;\r\n        };\r\n    }\r\n    const initialGuess = 5 / duration;\r\n    const undampedFreq = approximateRoot(envelope, derivative, initialGuess);\r\n    duration = secondsToMilliseconds(duration);\r\n    if (isNaN(undampedFreq)) {\r\n        return {\r\n            stiffness: springDefaults.stiffness,\r\n            damping: springDefaults.damping,\r\n            duration,\r\n        };\r\n    }\r\n    else {\r\n        const stiffness = Math.pow(undampedFreq, 2) * mass;\r\n        return {\r\n            stiffness,\r\n            damping: dampingRatio * 2 * Math.sqrt(mass * stiffness),\r\n            duration,\r\n        };\r\n    }\r\n}\r\nconst rootIterations = 12;\r\nfunction approximateRoot(envelope, derivative, initialGuess) {\r\n    let result = initialGuess;\r\n    for (let i = 1; i < rootIterations; i++) {\r\n        result = result - envelope(result) / derivative(result);\r\n    }\r\n    return result;\r\n}\r\nfunction calcAngularFreq(undampedFreq, dampingRatio) {\r\n    return undampedFreq * Math.sqrt(1 - dampingRatio * dampingRatio);\r\n}\r\n\r\nexport { calcAngularFreq, findSpring };\r\n","import '../../../../../../motion-utils/dist/es/errors.mjs';\r\nimport { millisecondsToSeconds, secondsToMilliseconds } from '../../../../../../motion-utils/dist/es/time-conversion.mjs';\r\nimport { calcGeneratorDuration, maxGeneratorDuration } from '../../../../../../motion-dom/dist/es/animation/generators/utils/calc-duration.mjs';\r\nimport { generateLinearEasing } from '../../../../../../motion-dom/dist/es/animation/waapi/utils/linear.mjs';\r\nimport { clamp } from '../../../utils/clamp.mjs';\r\nimport { calcGeneratorVelocity } from '../utils/velocity.mjs';\r\nimport { springDefaults } from './defaults.mjs';\r\nimport { findSpring, calcAngularFreq } from './find.mjs';\r\n\r\nconst durationKeys = [\"duration\", \"bounce\"];\r\nconst physicsKeys = [\"stiffness\", \"damping\", \"mass\"];\r\nfunction isSpringType(options, keys) {\r\n    return keys.some((key) => options[key] !== undefined);\r\n}\r\nfunction getSpringOptions(options) {\r\n    let springOptions = {\r\n        velocity: springDefaults.velocity,\r\n        stiffness: springDefaults.stiffness,\r\n        damping: springDefaults.damping,\r\n        mass: springDefaults.mass,\r\n        isResolvedFromDuration: false,\r\n        ...options,\r\n    };\r\n    // stiffness/damping/mass overrides duration/bounce\r\n    if (!isSpringType(options, physicsKeys) &&\r\n        isSpringType(options, durationKeys)) {\r\n        if (options.visualDuration) {\r\n            const visualDuration = options.visualDuration;\r\n            const root = (2 * Math.PI) / (visualDuration * 1.2);\r\n            const stiffness = root * root;\r\n            const damping = 2 *\r\n                clamp(0.05, 1, 1 - (options.bounce || 0)) *\r\n                Math.sqrt(stiffness);\r\n            springOptions = {\r\n                ...springOptions,\r\n                mass: springDefaults.mass,\r\n                stiffness,\r\n                damping,\r\n            };\r\n        }\r\n        else {\r\n            const derived = findSpring(options);\r\n            springOptions = {\r\n                ...springOptions,\r\n                ...derived,\r\n                mass: springDefaults.mass,\r\n            };\r\n            springOptions.isResolvedFromDuration = true;\r\n        }\r\n    }\r\n    return springOptions;\r\n}\r\nfunction spring(optionsOrVisualDuration = springDefaults.visualDuration, bounce = springDefaults.bounce) {\r\n    const options = typeof optionsOrVisualDuration !== \"object\"\r\n        ? {\r\n            visualDuration: optionsOrVisualDuration,\r\n            keyframes: [0, 1],\r\n            bounce,\r\n        }\r\n        : optionsOrVisualDuration;\r\n    let { restSpeed, restDelta } = options;\r\n    const origin = options.keyframes[0];\r\n    const target = options.keyframes[options.keyframes.length - 1];\r\n    /**\r\n     * This is the Iterator-spec return value. We ensure it's mutable rather than using a generator\r\n     * to reduce GC during animation.\r\n     */\r\n    const state = { done: false, value: origin };\r\n    const { stiffness, damping, mass, duration, velocity, isResolvedFromDuration, } = getSpringOptions({\r\n        ...options,\r\n        velocity: -millisecondsToSeconds(options.velocity || 0),\r\n    });\r\n    const initialVelocity = velocity || 0.0;\r\n    const dampingRatio = damping / (2 * Math.sqrt(stiffness * mass));\r\n    const initialDelta = target - origin;\r\n    const undampedAngularFreq = millisecondsToSeconds(Math.sqrt(stiffness / mass));\r\n    /**\r\n     * If we're working on a granular scale, use smaller defaults for determining\r\n     * when the spring is finished.\r\n     *\r\n     * These defaults have been selected emprically based on what strikes a good\r\n     * ratio between feeling good and finishing as soon as changes are imperceptible.\r\n     */\r\n    const isGranularScale = Math.abs(initialDelta) < 5;\r\n    restSpeed || (restSpeed = isGranularScale\r\n        ? springDefaults.restSpeed.granular\r\n        : springDefaults.restSpeed.default);\r\n    restDelta || (restDelta = isGranularScale\r\n        ? springDefaults.restDelta.granular\r\n        : springDefaults.restDelta.default);\r\n    let resolveSpring;\r\n    if (dampingRatio < 1) {\r\n        const angularFreq = calcAngularFreq(undampedAngularFreq, dampingRatio);\r\n        // Underdamped spring\r\n        resolveSpring = (t) => {\r\n            const envelope = Math.exp(-dampingRatio * undampedAngularFreq * t);\r\n            return (target -\r\n                envelope *\r\n                    (((initialVelocity +\r\n                        dampingRatio * undampedAngularFreq * initialDelta) /\r\n                        angularFreq) *\r\n                        Math.sin(angularFreq * t) +\r\n                        initialDelta * Math.cos(angularFreq * t)));\r\n        };\r\n    }\r\n    else if (dampingRatio === 1) {\r\n        // Critically damped spring\r\n        resolveSpring = (t) => target -\r\n            Math.exp(-undampedAngularFreq * t) *\r\n                (initialDelta +\r\n                    (initialVelocity + undampedAngularFreq * initialDelta) * t);\r\n    }\r\n    else {\r\n        // Overdamped spring\r\n        const dampedAngularFreq = undampedAngularFreq * Math.sqrt(dampingRatio * dampingRatio - 1);\r\n        resolveSpring = (t) => {\r\n            const envelope = Math.exp(-dampingRatio * undampedAngularFreq * t);\r\n            // When performing sinh or cosh values can hit Infinity so we cap them here\r\n            const freqForT = Math.min(dampedAngularFreq * t, 300);\r\n            return (target -\r\n                (envelope *\r\n                    ((initialVelocity +\r\n                        dampingRatio * undampedAngularFreq * initialDelta) *\r\n                        Math.sinh(freqForT) +\r\n                        dampedAngularFreq *\r\n                            initialDelta *\r\n                            Math.cosh(freqForT))) /\r\n                    dampedAngularFreq);\r\n        };\r\n    }\r\n    const generator = {\r\n        calculatedDuration: isResolvedFromDuration ? duration || null : null,\r\n        next: (t) => {\r\n            const current = resolveSpring(t);\r\n            if (!isResolvedFromDuration) {\r\n                let currentVelocity = 0.0;\r\n                /**\r\n                 * We only need to calculate velocity for under-damped springs\r\n                 * as over- and critically-damped springs can't overshoot, so\r\n                 * checking only for displacement is enough.\r\n                 */\r\n                if (dampingRatio < 1) {\r\n                    currentVelocity =\r\n                        t === 0\r\n                            ? secondsToMilliseconds(initialVelocity)\r\n                            : calcGeneratorVelocity(resolveSpring, t, current);\r\n                }\r\n                const isBelowVelocityThreshold = Math.abs(currentVelocity) <= restSpeed;\r\n                const isBelowDisplacementThreshold = Math.abs(target - current) <= restDelta;\r\n                state.done =\r\n                    isBelowVelocityThreshold && isBelowDisplacementThreshold;\r\n            }\r\n            else {\r\n                state.done = t >= duration;\r\n            }\r\n            state.value = state.done ? target : current;\r\n            return state;\r\n        },\r\n        toString: () => {\r\n            const calculatedDuration = Math.min(calcGeneratorDuration(generator), maxGeneratorDuration);\r\n            const easing = generateLinearEasing((progress) => generator.next(calculatedDuration * progress).value, calculatedDuration, 30);\r\n            return calculatedDuration + \"ms \" + easing;\r\n        },\r\n    };\r\n    return generator;\r\n}\r\n\r\nexport { spring };\r\n","import { spring } from './spring/index.mjs';\r\nimport { calcGeneratorVelocity } from './utils/velocity.mjs';\r\n\r\nfunction inertia({ keyframes, velocity = 0.0, power = 0.8, timeConstant = 325, bounceDamping = 10, bounceStiffness = 500, modifyTarget, min, max, restDelta = 0.5, restSpeed, }) {\r\n    const origin = keyframes[0];\r\n    const state = {\r\n        done: false,\r\n        value: origin,\r\n    };\r\n    const isOutOfBounds = (v) => (min !== undefined && v < min) || (max !== undefined && v > max);\r\n    const nearestBoundary = (v) => {\r\n        if (min === undefined)\r\n            return max;\r\n        if (max === undefined)\r\n            return min;\r\n        return Math.abs(min - v) < Math.abs(max - v) ? min : max;\r\n    };\r\n    let amplitude = power * velocity;\r\n    const ideal = origin + amplitude;\r\n    const target = modifyTarget === undefined ? ideal : modifyTarget(ideal);\r\n    /**\r\n     * If the target has changed we need to re-calculate the amplitude, otherwise\r\n     * the animation will start from the wrong position.\r\n     */\r\n    if (target !== ideal)\r\n        amplitude = target - origin;\r\n    const calcDelta = (t) => -amplitude * Math.exp(-t / timeConstant);\r\n    const calcLatest = (t) => target + calcDelta(t);\r\n    const applyFriction = (t) => {\r\n        const delta = calcDelta(t);\r\n        const latest = calcLatest(t);\r\n        state.done = Math.abs(delta) <= restDelta;\r\n        state.value = state.done ? target : latest;\r\n    };\r\n    /**\r\n     * Ideally this would resolve for t in a stateless way, we could\r\n     * do that by always precalculating the animation but as we know\r\n     * this will be done anyway we can assume that spring will\r\n     * be discovered during that.\r\n     */\r\n    let timeReachedBoundary;\r\n    let spring$1;\r\n    const checkCatchBoundary = (t) => {\r\n        if (!isOutOfBounds(state.value))\r\n            return;\r\n        timeReachedBoundary = t;\r\n        spring$1 = spring({\r\n            keyframes: [state.value, nearestBoundary(state.value)],\r\n            velocity: calcGeneratorVelocity(calcLatest, t, state.value), // TODO: This should be passing * 1000\r\n            damping: bounceDamping,\r\n            stiffness: bounceStiffness,\r\n            restDelta,\r\n            restSpeed,\r\n        });\r\n    };\r\n    checkCatchBoundary(0);\r\n    return {\r\n        calculatedDuration: null,\r\n        next: (t) => {\r\n            /**\r\n             * We need to resolve the friction to figure out if we need a\r\n             * spring but we don't want to do this twice per frame. So here\r\n             * we flag if we updated for this frame and later if we did\r\n             * we can skip doing it again.\r\n             */\r\n            let hasUpdatedFrame = false;\r\n            if (!spring$1 && timeReachedBoundary === undefined) {\r\n                hasUpdatedFrame = true;\r\n                applyFriction(t);\r\n                checkCatchBoundary(t);\r\n            }\r\n            /**\r\n             * If we have a spring and the provided t is beyond the moment the friction\r\n             * animation crossed the min/max boundary, use the spring.\r\n             */\r\n            if (timeReachedBoundary !== undefined && t >= timeReachedBoundary) {\r\n                return spring$1.next(t - timeReachedBoundary);\r\n            }\r\n            else {\r\n                !hasUpdatedFrame && applyFriction(t);\r\n                return state;\r\n            }\r\n        },\r\n    };\r\n}\r\n\r\nexport { inertia };\r\n","import { cubicBezier } from './cubic-bezier.mjs';\r\n\r\nconst easeIn = /*@__PURE__*/ cubicBezier(0.42, 0, 1, 1);\r\nconst easeOut = /*@__PURE__*/ cubicBezier(0, 0, 0.58, 1);\r\nconst easeInOut = /*@__PURE__*/ cubicBezier(0.42, 0, 0.58, 1);\r\n\r\nexport { easeIn, easeInOut, easeOut };\r\n","const isEasingArray = (ease) => {\r\n    return Array.isArray(ease) && typeof ease[0] !== \"number\";\r\n};\r\n\r\nexport { isEasingArray };\r\n","import { invariant } from '../../../../../motion-utils/dist/es/errors.mjs';\r\nimport { noop } from '../../../../../motion-utils/dist/es/noop.mjs';\r\nimport { isBezierDefinition } from '../../../../../motion-dom/dist/es/utils/is-bezier-definition.mjs';\r\nimport { anticipate } from '../anticipate.mjs';\r\nimport { backIn, backInOut, backOut } from '../back.mjs';\r\nimport { circIn, circInOut, circOut } from '../circ.mjs';\r\nimport { cubicBezier } from '../cubic-bezier.mjs';\r\nimport { easeIn, easeInOut, easeOut } from '../ease.mjs';\r\n\r\nconst easingLookup = {\r\n    linear: noop,\r\n    easeIn,\r\n    easeInOut,\r\n    easeOut,\r\n    circIn,\r\n    circInOut,\r\n    circOut,\r\n    backIn,\r\n    backInOut,\r\n    backOut,\r\n    anticipate,\r\n};\r\nconst easingDefinitionToFunction = (definition) => {\r\n    if (isBezierDefinition(definition)) {\r\n        // If cubic bezier definition, create bezier curve\r\n        invariant(definition.length === 4, `Cubic bezier arrays must contain four numerical values.`);\r\n        const [x1, y1, x2, y2] = definition;\r\n        return cubicBezier(x1, y1, x2, y2);\r\n    }\r\n    else if (typeof definition === \"string\") {\r\n        // Else lookup from table\r\n        invariant(easingLookup[definition] !== undefined, `Invalid easing type '${definition}'`);\r\n        return easingLookup[definition];\r\n    }\r\n    return definition;\r\n};\r\n\r\nexport { easingDefinitionToFunction };\r\n","import { invariant } from '../../../../motion-utils/dist/es/errors.mjs';\r\nimport { noop } from '../../../../motion-utils/dist/es/noop.mjs';\r\nimport { progress } from '../../../../motion-utils/dist/es/progress.mjs';\r\nimport { clamp } from './clamp.mjs';\r\nimport { mix } from './mix/index.mjs';\r\nimport { pipe } from './pipe.mjs';\r\n\r\nfunction createMixers(output, ease, customMixer) {\r\n    const mixers = [];\r\n    const mixerFactory = customMixer || mix;\r\n    const numMixers = output.length - 1;\r\n    for (let i = 0; i < numMixers; i++) {\r\n        let mixer = mixerFactory(output[i], output[i + 1]);\r\n        if (ease) {\r\n            const easingFunction = Array.isArray(ease) ? ease[i] || noop : ease;\r\n            mixer = pipe(easingFunction, mixer);\r\n        }\r\n        mixers.push(mixer);\r\n    }\r\n    return mixers;\r\n}\r\n/**\r\n * Create a function that maps from a numerical input array to a generic output array.\r\n *\r\n * Accepts:\r\n *   - Numbers\r\n *   - Colors (hex, hsl, hsla, rgb, rgba)\r\n *   - Complex (combinations of one or more numbers or strings)\r\n *\r\n * ```jsx\r\n * const mixColor = interpolate([0, 1], ['#fff', '#000'])\r\n *\r\n * mixColor(0.5) // 'rgba(128, 128, 128, 1)'\r\n * ```\r\n *\r\n * TODO Revist this approach once we've moved to data models for values,\r\n * probably not needed to pregenerate mixer functions.\r\n *\r\n * @public\r\n */\r\nfunction interpolate(input, output, { clamp: isClamp = true, ease, mixer } = {}) {\r\n    const inputLength = input.length;\r\n    invariant(inputLength === output.length, \"Both input and output ranges must be the same length\");\r\n    /**\r\n     * If we're only provided a single input, we can just make a function\r\n     * that returns the output.\r\n     */\r\n    if (inputLength === 1)\r\n        return () => output[0];\r\n    if (inputLength === 2 && output[0] === output[1])\r\n        return () => output[1];\r\n    const isZeroDeltaRange = input[0] === input[1];\r\n    // If input runs highest -> lowest, reverse both arrays\r\n    if (input[0] > input[inputLength - 1]) {\r\n        input = [...input].reverse();\r\n        output = [...output].reverse();\r\n    }\r\n    const mixers = createMixers(output, ease, mixer);\r\n    const numMixers = mixers.length;\r\n    const interpolator = (v) => {\r\n        if (isZeroDeltaRange && v < input[0])\r\n            return output[0];\r\n        let i = 0;\r\n        if (numMixers > 1) {\r\n            for (; i < input.length - 2; i++) {\r\n                if (v < input[i + 1])\r\n                    break;\r\n            }\r\n        }\r\n        const progressInRange = progress(input[i], input[i + 1], v);\r\n        return mixers[i](progressInRange);\r\n    };\r\n    return isClamp\r\n        ? (v) => interpolator(clamp(input[0], input[inputLength - 1], v))\r\n        : interpolator;\r\n}\r\n\r\nexport { interpolate };\r\n","import '../../../../../motion-utils/dist/es/errors.mjs';\r\nimport { progress } from '../../../../../motion-utils/dist/es/progress.mjs';\r\nimport { mixNumber } from '../mix/number.mjs';\r\n\r\nfunction fillOffset(offset, remaining) {\r\n    const min = offset[offset.length - 1];\r\n    for (let i = 1; i <= remaining; i++) {\r\n        const offsetProgress = progress(0, remaining, i);\r\n        offset.push(mixNumber(min, 1, offsetProgress));\r\n    }\r\n}\r\n\r\nexport { fillOffset };\r\n","import { fillOffset } from './fill.mjs';\r\n\r\nfunction defaultOffset(arr) {\r\n    const offset = [0];\r\n    fillOffset(offset, arr.length - 1);\r\n    return offset;\r\n}\r\n\r\nexport { defaultOffset };\r\n","function convertOffsetToTimes(offset, duration) {\r\n    return offset.map((o) => o * duration);\r\n}\r\n\r\nexport { convertOffsetToTimes };\r\n","import { easeInOut } from '../../easing/ease.mjs';\r\nimport { isEasingArray } from '../../easing/utils/is-easing-array.mjs';\r\nimport { easingDefinitionToFunction } from '../../easing/utils/map.mjs';\r\nimport { interpolate } from '../../utils/interpolate.mjs';\r\nimport { defaultOffset } from '../../utils/offsets/default.mjs';\r\nimport { convertOffsetToTimes } from '../../utils/offsets/time.mjs';\r\n\r\nfunction defaultEasing(values, easing) {\r\n    return values.map(() => easing || easeInOut).splice(0, values.length - 1);\r\n}\r\nfunction keyframes({ duration = 300, keyframes: keyframeValues, times, ease = \"easeInOut\", }) {\r\n    /**\r\n     * Easing functions can be externally defined as strings. Here we convert them\r\n     * into actual functions.\r\n     */\r\n    const easingFunctions = isEasingArray(ease)\r\n        ? ease.map(easingDefinitionToFunction)\r\n        : easingDefinitionToFunction(ease);\r\n    /**\r\n     * This is the Iterator-spec return value. We ensure it's mutable rather than using a generator\r\n     * to reduce GC during animation.\r\n     */\r\n    const state = {\r\n        done: false,\r\n        value: keyframeValues[0],\r\n    };\r\n    /**\r\n     * Create a times array based on the provided 0-1 offsets\r\n     */\r\n    const absoluteTimes = convertOffsetToTimes(\r\n    // Only use the provided offsets if they're the correct length\r\n    // TODO Maybe we should warn here if there's a length mismatch\r\n    times && times.length === keyframeValues.length\r\n        ? times\r\n        : defaultOffset(keyframeValues), duration);\r\n    const mapTimeToKeyframe = interpolate(absoluteTimes, keyframeValues, {\r\n        ease: Array.isArray(easingFunctions)\r\n            ? easingFunctions\r\n            : defaultEasing(keyframeValues, easingFunctions),\r\n    });\r\n    return {\r\n        calculatedDuration: duration,\r\n        next: (t) => {\r\n            state.value = mapTimeToKeyframe(t);\r\n            state.done = t >= duration;\r\n            return state;\r\n        },\r\n    };\r\n}\r\n\r\nexport { defaultEasing, keyframes };\r\n","import { time } from '../../../frameloop/sync-time.mjs';\r\nimport { frame, cancelFrame, frameData } from '../../../frameloop/frame.mjs';\r\n\r\nconst frameloopDriver = (update) => {\r\n    const passTimestamp = ({ timestamp }) => update(timestamp);\r\n    return {\r\n        start: () => frame.update(passTimestamp, true),\r\n        stop: () => cancelFrame(passTimestamp),\r\n        /**\r\n         * If we're processing this frame we can use the\r\n         * framelocked timestamp to keep things in sync.\r\n         */\r\n        now: () => (frameData.isProcessing ? frameData.timestamp : time.now()),\r\n    };\r\n};\r\n\r\nexport { frameloopDriver };\r\n","import { invariant } from '../../../../../motion-utils/dist/es/errors.mjs';\r\nimport { millisecondsToSeconds, secondsToMilliseconds } from '../../../../../motion-utils/dist/es/time-conversion.mjs';\r\nimport { calcGeneratorDuration } from '../../../../../motion-dom/dist/es/animation/generators/utils/calc-duration.mjs';\r\nimport { isGenerator } from '../../../../../motion-dom/dist/es/animation/generators/utils/is-generator.mjs';\r\nimport { KeyframeResolver } from '../../render/utils/KeyframesResolver.mjs';\r\nimport { clamp } from '../../utils/clamp.mjs';\r\nimport { mix } from '../../utils/mix/index.mjs';\r\nimport { pipe } from '../../utils/pipe.mjs';\r\nimport { inertia } from '../generators/inertia.mjs';\r\nimport { keyframes } from '../generators/keyframes.mjs';\r\nimport { spring } from '../generators/spring/index.mjs';\r\nimport { BaseAnimation } from './BaseAnimation.mjs';\r\nimport { frameloopDriver } from './drivers/driver-frameloop.mjs';\r\nimport { getFinalKeyframe } from './waapi/utils/get-final-keyframe.mjs';\r\n\r\nconst generators = {\r\n    decay: inertia,\r\n    inertia,\r\n    tween: keyframes,\r\n    keyframes: keyframes,\r\n    spring,\r\n};\r\nconst percentToProgress = (percent) => percent / 100;\r\n/**\r\n * Animation that runs on the main thread. Designed to be WAAPI-spec in the subset of\r\n * features we expose publically. Mostly the compatibility is to ensure visual identity\r\n * between both WAAPI and main thread animations.\r\n */\r\nclass MainThreadAnimation extends BaseAnimation {\r\n    constructor(options) {\r\n        super(options);\r\n        /**\r\n         * The time at which the animation was paused.\r\n         */\r\n        this.holdTime = null;\r\n        /**\r\n         * The time at which the animation was cancelled.\r\n         */\r\n        this.cancelTime = null;\r\n        /**\r\n         * The current time of the animation.\r\n         */\r\n        this.currentTime = 0;\r\n        /**\r\n         * Playback speed as a factor. 0 would be stopped, -1 reverse and 2 double speed.\r\n         */\r\n        this.playbackSpeed = 1;\r\n        /**\r\n         * The state of the animation to apply when the animation is resolved. This\r\n         * allows calls to the public API to control the animation before it is resolved,\r\n         * without us having to resolve it first.\r\n         */\r\n        this.pendingPlayState = \"running\";\r\n        /**\r\n         * The time at which the animation was started.\r\n         */\r\n        this.startTime = null;\r\n        this.state = \"idle\";\r\n        /**\r\n         * This method is bound to the instance to fix a pattern where\r\n         * animation.stop is returned as a reference from a useEffect.\r\n         */\r\n        this.stop = () => {\r\n            this.resolver.cancel();\r\n            this.isStopped = true;\r\n            if (this.state === \"idle\")\r\n                return;\r\n            this.teardown();\r\n            const { onStop } = this.options;\r\n            onStop && onStop();\r\n        };\r\n        const { name, motionValue, element, keyframes } = this.options;\r\n        const KeyframeResolver$1 = (element === null || element === void 0 ? void 0 : element.KeyframeResolver) || KeyframeResolver;\r\n        const onResolved = (resolvedKeyframes, finalKeyframe) => this.onKeyframesResolved(resolvedKeyframes, finalKeyframe);\r\n        this.resolver = new KeyframeResolver$1(keyframes, onResolved, name, motionValue, element);\r\n        this.resolver.scheduleResolve();\r\n    }\r\n    flatten() {\r\n        super.flatten();\r\n        // If we've already resolved the animation, re-initialise it\r\n        if (this._resolved) {\r\n            Object.assign(this._resolved, this.initPlayback(this._resolved.keyframes));\r\n        }\r\n    }\r\n    initPlayback(keyframes$1) {\r\n        const { type = \"keyframes\", repeat = 0, repeatDelay = 0, repeatType, velocity = 0, } = this.options;\r\n        const generatorFactory = isGenerator(type)\r\n            ? type\r\n            : generators[type] || keyframes;\r\n        /**\r\n         * If our generator doesn't support mixing numbers, we need to replace keyframes with\r\n         * [0, 100] and then make a function that maps that to the actual keyframes.\r\n         *\r\n         * 100 is chosen instead of 1 as it works nicer with spring animations.\r\n         */\r\n        let mapPercentToKeyframes;\r\n        let mirroredGenerator;\r\n        if (generatorFactory !== keyframes &&\r\n            typeof keyframes$1[0] !== \"number\") {\r\n            if (process.env.NODE_ENV !== \"production\") {\r\n                invariant(keyframes$1.length === 2, `Only two keyframes currently supported with spring and inertia animations. Trying to animate ${keyframes$1}`);\r\n            }\r\n            mapPercentToKeyframes = pipe(percentToProgress, mix(keyframes$1[0], keyframes$1[1]));\r\n            keyframes$1 = [0, 100];\r\n        }\r\n        const generator = generatorFactory({ ...this.options, keyframes: keyframes$1 });\r\n        /**\r\n         * If we have a mirror repeat type we need to create a second generator that outputs the\r\n         * mirrored (not reversed) animation and later ping pong between the two generators.\r\n         */\r\n        if (repeatType === \"mirror\") {\r\n            mirroredGenerator = generatorFactory({\r\n                ...this.options,\r\n                keyframes: [...keyframes$1].reverse(),\r\n                velocity: -velocity,\r\n            });\r\n        }\r\n        /**\r\n         * If duration is undefined and we have repeat options,\r\n         * we need to calculate a duration from the generator.\r\n         *\r\n         * We set it to the generator itself to cache the duration.\r\n         * Any timeline resolver will need to have already precalculated\r\n         * the duration by this step.\r\n         */\r\n        if (generator.calculatedDuration === null) {\r\n            generator.calculatedDuration = calcGeneratorDuration(generator);\r\n        }\r\n        const { calculatedDuration } = generator;\r\n        const resolvedDuration = calculatedDuration + repeatDelay;\r\n        const totalDuration = resolvedDuration * (repeat + 1) - repeatDelay;\r\n        return {\r\n            generator,\r\n            mirroredGenerator,\r\n            mapPercentToKeyframes,\r\n            calculatedDuration,\r\n            resolvedDuration,\r\n            totalDuration,\r\n        };\r\n    }\r\n    onPostResolved() {\r\n        const { autoplay = true } = this.options;\r\n        this.play();\r\n        if (this.pendingPlayState === \"paused\" || !autoplay) {\r\n            this.pause();\r\n        }\r\n        else {\r\n            this.state = this.pendingPlayState;\r\n        }\r\n    }\r\n    tick(timestamp, sample = false) {\r\n        const { resolved } = this;\r\n        // If the animations has failed to resolve, return the final keyframe.\r\n        if (!resolved) {\r\n            const { keyframes } = this.options;\r\n            return { done: true, value: keyframes[keyframes.length - 1] };\r\n        }\r\n        const { finalKeyframe, generator, mirroredGenerator, mapPercentToKeyframes, keyframes, calculatedDuration, totalDuration, resolvedDuration, } = resolved;\r\n        if (this.startTime === null)\r\n            return generator.next(0);\r\n        const { delay, repeat, repeatType, repeatDelay, onUpdate } = this.options;\r\n        /**\r\n         * requestAnimationFrame timestamps can come through as lower than\r\n         * the startTime as set by performance.now(). Here we prevent this,\r\n         * though in the future it could be possible to make setting startTime\r\n         * a pending operation that gets resolved here.\r\n         */\r\n        if (this.speed > 0) {\r\n            this.startTime = Math.min(this.startTime, timestamp);\r\n        }\r\n        else if (this.speed < 0) {\r\n            this.startTime = Math.min(timestamp - totalDuration / this.speed, this.startTime);\r\n        }\r\n        // Update currentTime\r\n        if (sample) {\r\n            this.currentTime = timestamp;\r\n        }\r\n        else if (this.holdTime !== null) {\r\n            this.currentTime = this.holdTime;\r\n        }\r\n        else {\r\n            // Rounding the time because floating point arithmetic is not always accurate, e.g. 3000.367 - 1000.367 =\r\n            // 2000.0000000000002. This is a problem when we are comparing the currentTime with the duration, for\r\n            // example.\r\n            this.currentTime =\r\n                Math.round(timestamp - this.startTime) * this.speed;\r\n        }\r\n        // Rebase on delay\r\n        const timeWithoutDelay = this.currentTime - delay * (this.speed >= 0 ? 1 : -1);\r\n        const isInDelayPhase = this.speed >= 0\r\n            ? timeWithoutDelay < 0\r\n            : timeWithoutDelay > totalDuration;\r\n        this.currentTime = Math.max(timeWithoutDelay, 0);\r\n        // If this animation has finished, set the current time  to the total duration.\r\n        if (this.state === \"finished\" && this.holdTime === null) {\r\n            this.currentTime = totalDuration;\r\n        }\r\n        let elapsed = this.currentTime;\r\n        let frameGenerator = generator;\r\n        if (repeat) {\r\n            /**\r\n             * Get the current progress (0-1) of the animation. If t is >\r\n             * than duration we'll get values like 2.5 (midway through the\r\n             * third iteration)\r\n             */\r\n            const progress = Math.min(this.currentTime, totalDuration) / resolvedDuration;\r\n            /**\r\n             * Get the current iteration (0 indexed). For instance the floor of\r\n             * 2.5 is 2.\r\n             */\r\n            let currentIteration = Math.floor(progress);\r\n            /**\r\n             * Get the current progress of the iteration by taking the remainder\r\n             * so 2.5 is 0.5 through iteration 2\r\n             */\r\n            let iterationProgress = progress % 1.0;\r\n            /**\r\n             * If iteration progress is 1 we count that as the end\r\n             * of the previous iteration.\r\n             */\r\n            if (!iterationProgress && progress >= 1) {\r\n                iterationProgress = 1;\r\n            }\r\n            iterationProgress === 1 && currentIteration--;\r\n            currentIteration = Math.min(currentIteration, repeat + 1);\r\n            /**\r\n             * Reverse progress if we're not running in \"normal\" direction\r\n             */\r\n            const isOddIteration = Boolean(currentIteration % 2);\r\n            if (isOddIteration) {\r\n                if (repeatType === \"reverse\") {\r\n                    iterationProgress = 1 - iterationProgress;\r\n                    if (repeatDelay) {\r\n                        iterationProgress -= repeatDelay / resolvedDuration;\r\n                    }\r\n                }\r\n                else if (repeatType === \"mirror\") {\r\n                    frameGenerator = mirroredGenerator;\r\n                }\r\n            }\r\n            elapsed = clamp(0, 1, iterationProgress) * resolvedDuration;\r\n        }\r\n        /**\r\n         * If we're in negative time, set state as the initial keyframe.\r\n         * This prevents delay: x, duration: 0 animations from finishing\r\n         * instantly.\r\n         */\r\n        const state = isInDelayPhase\r\n            ? { done: false, value: keyframes[0] }\r\n            : frameGenerator.next(elapsed);\r\n        if (mapPercentToKeyframes) {\r\n            state.value = mapPercentToKeyframes(state.value);\r\n        }\r\n        let { done } = state;\r\n        if (!isInDelayPhase && calculatedDuration !== null) {\r\n            done =\r\n                this.speed >= 0\r\n                    ? this.currentTime >= totalDuration\r\n                    : this.currentTime <= 0;\r\n        }\r\n        const isAnimationFinished = this.holdTime === null &&\r\n            (this.state === \"finished\" || (this.state === \"running\" && done));\r\n        if (isAnimationFinished && finalKeyframe !== undefined) {\r\n            state.value = getFinalKeyframe(keyframes, this.options, finalKeyframe);\r\n        }\r\n        if (onUpdate) {\r\n            onUpdate(state.value);\r\n        }\r\n        if (isAnimationFinished) {\r\n            this.finish();\r\n        }\r\n        return state;\r\n    }\r\n    get duration() {\r\n        const { resolved } = this;\r\n        return resolved ? millisecondsToSeconds(resolved.calculatedDuration) : 0;\r\n    }\r\n    get time() {\r\n        return millisecondsToSeconds(this.currentTime);\r\n    }\r\n    set time(newTime) {\r\n        newTime = secondsToMilliseconds(newTime);\r\n        this.currentTime = newTime;\r\n        if (this.holdTime !== null || this.speed === 0) {\r\n            this.holdTime = newTime;\r\n        }\r\n        else if (this.driver) {\r\n            this.startTime = this.driver.now() - newTime / this.speed;\r\n        }\r\n    }\r\n    get speed() {\r\n        return this.playbackSpeed;\r\n    }\r\n    set speed(newSpeed) {\r\n        const hasChanged = this.playbackSpeed !== newSpeed;\r\n        this.playbackSpeed = newSpeed;\r\n        if (hasChanged) {\r\n            this.time = millisecondsToSeconds(this.currentTime);\r\n        }\r\n    }\r\n    play() {\r\n        if (!this.resolver.isScheduled) {\r\n            this.resolver.resume();\r\n        }\r\n        if (!this._resolved) {\r\n            this.pendingPlayState = \"running\";\r\n            return;\r\n        }\r\n        if (this.isStopped)\r\n            return;\r\n        const { driver = frameloopDriver, onPlay, startTime } = this.options;\r\n        if (!this.driver) {\r\n            this.driver = driver((timestamp) => this.tick(timestamp));\r\n        }\r\n        onPlay && onPlay();\r\n        const now = this.driver.now();\r\n        if (this.holdTime !== null) {\r\n            this.startTime = now - this.holdTime;\r\n        }\r\n        else if (!this.startTime) {\r\n            this.startTime = startTime !== null && startTime !== void 0 ? startTime : this.calcStartTime();\r\n        }\r\n        else if (this.state === \"finished\") {\r\n            this.startTime = now;\r\n        }\r\n        if (this.state === \"finished\") {\r\n            this.updateFinishedPromise();\r\n        }\r\n        this.cancelTime = this.startTime;\r\n        this.holdTime = null;\r\n        /**\r\n         * Set playState to running only after we've used it in\r\n         * the previous logic.\r\n         */\r\n        this.state = \"running\";\r\n        this.driver.start();\r\n    }\r\n    pause() {\r\n        var _a;\r\n        if (!this._resolved) {\r\n            this.pendingPlayState = \"paused\";\r\n            return;\r\n        }\r\n        this.state = \"paused\";\r\n        this.holdTime = (_a = this.currentTime) !== null && _a !== void 0 ? _a : 0;\r\n    }\r\n    complete() {\r\n        if (this.state !== \"running\") {\r\n            this.play();\r\n        }\r\n        this.pendingPlayState = this.state = \"finished\";\r\n        this.holdTime = null;\r\n    }\r\n    finish() {\r\n        this.teardown();\r\n        this.state = \"finished\";\r\n        const { onComplete } = this.options;\r\n        onComplete && onComplete();\r\n    }\r\n    cancel() {\r\n        if (this.cancelTime !== null) {\r\n            this.tick(this.cancelTime);\r\n        }\r\n        this.teardown();\r\n        this.updateFinishedPromise();\r\n    }\r\n    teardown() {\r\n        this.state = \"idle\";\r\n        this.stopDriver();\r\n        this.resolveFinishedPromise();\r\n        this.updateFinishedPromise();\r\n        this.startTime = this.cancelTime = null;\r\n        this.resolver.cancel();\r\n    }\r\n    stopDriver() {\r\n        if (!this.driver)\r\n            return;\r\n        this.driver.stop();\r\n        this.driver = undefined;\r\n    }\r\n    sample(time) {\r\n        this.startTime = 0;\r\n        return this.tick(time, true);\r\n    }\r\n}\r\n// Legacy interface\r\nfunction animateValue(options) {\r\n    return new MainThreadAnimation(options);\r\n}\r\n\r\nexport { MainThreadAnimation, animateValue };\r\n","/**\r\n * A list of values that can be hardware-accelerated.\r\n */\r\nconst acceleratedValues = new Set([\r\n    \"opacity\",\r\n    \"clipPath\",\r\n    \"filter\",\r\n    \"transform\",\r\n    // TODO: Can be accelerated but currently disabled until https://issues.chromium.org/issues/41491098 is resolved\r\n    // or until we implement support for linear() easing.\r\n    // \"background-color\"\r\n]);\r\n\r\nexport { acceleratedValues };\r\n","import '../../../../../../motion-utils/dist/es/errors.mjs';\r\nimport { mapEasingToNativeEasing } from '../../../../../../motion-dom/dist/es/animation/waapi/utils/easing.mjs';\r\n\r\nfunction startWaapiAnimation(element, valueName, keyframes, { delay = 0, duration = 300, repeat = 0, repeatType = \"loop\", ease = \"easeInOut\", times, } = {}) {\r\n    const keyframeOptions = { [valueName]: keyframes };\r\n    if (times)\r\n        keyframeOptions.offset = times;\r\n    const easing = mapEasingToNativeEasing(ease, duration);\r\n    /**\r\n     * If this is an easing array, apply to keyframes, not animation as a whole\r\n     */\r\n    if (Array.isArray(easing))\r\n        keyframeOptions.easing = easing;\r\n    return element.animate(keyframeOptions, {\r\n        delay,\r\n        duration,\r\n        easing: !Array.isArray(easing) ? easing : \"linear\",\r\n        fill: \"both\",\r\n        iterations: repeat + 1,\r\n        direction: repeatType === \"reverse\" ? \"alternate\" : \"normal\",\r\n    });\r\n}\r\n\r\nexport { startWaapiAnimation };\r\n","import '../../../../../../../motion-utils/dist/es/errors.mjs';\r\nimport { memo } from '../../../../../../../motion-utils/dist/es/memo.mjs';\r\n\r\nconst supportsWaapi = /*@__PURE__*/ memo(() => Object.hasOwnProperty.call(Element.prototype, \"animate\"));\r\n\r\nexport { supportsWaapi };\r\n","import '../../../../../motion-utils/dist/es/errors.mjs';\r\nimport { noop } from '../../../../../motion-utils/dist/es/noop.mjs';\r\nimport { millisecondsToSeconds, secondsToMilliseconds } from '../../../../../motion-utils/dist/es/time-conversion.mjs';\r\nimport { isGenerator } from '../../../../../motion-dom/dist/es/animation/generators/utils/is-generator.mjs';\r\nimport { attachTimeline } from '../../../../../motion-dom/dist/es/animation/waapi/utils/attach-timeline.mjs';\r\nimport { isWaapiSupportedEasing } from '../../../../../motion-dom/dist/es/animation/waapi/utils/easing.mjs';\r\nimport { supportsLinearEasing } from '../../../../../motion-dom/dist/es/utils/supports/linear-easing.mjs';\r\nimport { anticipate } from '../../easing/anticipate.mjs';\r\nimport { backInOut } from '../../easing/back.mjs';\r\nimport { circInOut } from '../../easing/circ.mjs';\r\nimport { DOMKeyframesResolver } from '../../render/dom/DOMKeyframesResolver.mjs';\r\nimport { BaseAnimation } from './BaseAnimation.mjs';\r\nimport { MainThreadAnimation } from './MainThreadAnimation.mjs';\r\nimport { acceleratedValues } from './utils/accelerated-values.mjs';\r\nimport { startWaapiAnimation } from './waapi/index.mjs';\r\nimport { getFinalKeyframe } from './waapi/utils/get-final-keyframe.mjs';\r\nimport { supportsWaapi } from './waapi/utils/supports-waapi.mjs';\r\n\r\n/**\r\n * 10ms is chosen here as it strikes a balance between smooth\r\n * results (more than one keyframe per frame at 60fps) and\r\n * keyframe quantity.\r\n */\r\nconst sampleDelta = 10; //ms\r\n/**\r\n * Implement a practical max duration for keyframe generation\r\n * to prevent infinite loops\r\n */\r\nconst maxDuration = 20000;\r\n/**\r\n * Check if an animation can run natively via WAAPI or requires pregenerated keyframes.\r\n * WAAPI doesn't support spring or function easings so we run these as JS animation before\r\n * handing off.\r\n */\r\nfunction requiresPregeneratedKeyframes(options) {\r\n    return (isGenerator(options.type) ||\r\n        options.type === \"spring\" ||\r\n        !isWaapiSupportedEasing(options.ease));\r\n}\r\nfunction pregenerateKeyframes(keyframes, options) {\r\n    /**\r\n     * Create a main-thread animation to pregenerate keyframes.\r\n     * We sample this at regular intervals to generate keyframes that we then\r\n     * linearly interpolate between.\r\n     */\r\n    const sampleAnimation = new MainThreadAnimation({\r\n        ...options,\r\n        keyframes,\r\n        repeat: 0,\r\n        delay: 0,\r\n        isGenerator: true,\r\n    });\r\n    let state = { done: false, value: keyframes[0] };\r\n    const pregeneratedKeyframes = [];\r\n    /**\r\n     * Bail after 20 seconds of pre-generated keyframes as it's likely\r\n     * we're heading for an infinite loop.\r\n     */\r\n    let t = 0;\r\n    while (!state.done && t < maxDuration) {\r\n        state = sampleAnimation.sample(t);\r\n        pregeneratedKeyframes.push(state.value);\r\n        t += sampleDelta;\r\n    }\r\n    return {\r\n        times: undefined,\r\n        keyframes: pregeneratedKeyframes,\r\n        duration: t - sampleDelta,\r\n        ease: \"linear\",\r\n    };\r\n}\r\nconst unsupportedEasingFunctions = {\r\n    anticipate,\r\n    backInOut,\r\n    circInOut,\r\n};\r\nfunction isUnsupportedEase(key) {\r\n    return key in unsupportedEasingFunctions;\r\n}\r\nclass AcceleratedAnimation extends BaseAnimation {\r\n    constructor(options) {\r\n        super(options);\r\n        const { name, motionValue, element, keyframes } = this.options;\r\n        this.resolver = new DOMKeyframesResolver(keyframes, (resolvedKeyframes, finalKeyframe) => this.onKeyframesResolved(resolvedKeyframes, finalKeyframe), name, motionValue, element);\r\n        this.resolver.scheduleResolve();\r\n    }\r\n    initPlayback(keyframes, finalKeyframe) {\r\n        let { duration = 300, times, ease, type, motionValue, name, startTime, } = this.options;\r\n        /**\r\n         * If element has since been unmounted, return false to indicate\r\n         * the animation failed to initialised.\r\n         */\r\n        if (!motionValue.owner || !motionValue.owner.current) {\r\n            return false;\r\n        }\r\n        /**\r\n         * If the user has provided an easing function name that isn't supported\r\n         * by WAAPI (like \"anticipate\"), we need to provide the corressponding\r\n         * function. This will later get converted to a linear() easing function.\r\n         */\r\n        if (typeof ease === \"string\" &&\r\n            supportsLinearEasing() &&\r\n            isUnsupportedEase(ease)) {\r\n            ease = unsupportedEasingFunctions[ease];\r\n        }\r\n        /**\r\n         * If this animation needs pre-generated keyframes then generate.\r\n         */\r\n        if (requiresPregeneratedKeyframes(this.options)) {\r\n            const { onComplete, onUpdate, motionValue, element, ...options } = this.options;\r\n            const pregeneratedAnimation = pregenerateKeyframes(keyframes, options);\r\n            keyframes = pregeneratedAnimation.keyframes;\r\n            // If this is a very short animation, ensure we have\r\n            // at least two keyframes to animate between as older browsers\r\n            // can't animate between a single keyframe.\r\n            if (keyframes.length === 1) {\r\n                keyframes[1] = keyframes[0];\r\n            }\r\n            duration = pregeneratedAnimation.duration;\r\n            times = pregeneratedAnimation.times;\r\n            ease = pregeneratedAnimation.ease;\r\n            type = \"keyframes\";\r\n        }\r\n        const animation = startWaapiAnimation(motionValue.owner.current, name, keyframes, { ...this.options, duration, times, ease });\r\n        // Override the browser calculated startTime with one synchronised to other JS\r\n        // and WAAPI animations starting this event loop.\r\n        animation.startTime = startTime !== null && startTime !== void 0 ? startTime : this.calcStartTime();\r\n        if (this.pendingTimeline) {\r\n            attachTimeline(animation, this.pendingTimeline);\r\n            this.pendingTimeline = undefined;\r\n        }\r\n        else {\r\n            /**\r\n             * Prefer the `onfinish` prop as it's more widely supported than\r\n             * the `finished` promise.\r\n             *\r\n             * Here, we synchronously set the provided MotionValue to the end\r\n             * keyframe. If we didn't, when the WAAPI animation is finished it would\r\n             * be removed from the element which would then revert to its old styles.\r\n             */\r\n            animation.onfinish = () => {\r\n                const { onComplete } = this.options;\r\n                motionValue.set(getFinalKeyframe(keyframes, this.options, finalKeyframe));\r\n                onComplete && onComplete();\r\n                this.cancel();\r\n                this.resolveFinishedPromise();\r\n            };\r\n        }\r\n        return {\r\n            animation,\r\n            duration,\r\n            times,\r\n            type,\r\n            ease,\r\n            keyframes: keyframes,\r\n        };\r\n    }\r\n    get duration() {\r\n        const { resolved } = this;\r\n        if (!resolved)\r\n            return 0;\r\n        const { duration } = resolved;\r\n        return millisecondsToSeconds(duration);\r\n    }\r\n    get time() {\r\n        const { resolved } = this;\r\n        if (!resolved)\r\n            return 0;\r\n        const { animation } = resolved;\r\n        return millisecondsToSeconds(animation.currentTime || 0);\r\n    }\r\n    set time(newTime) {\r\n        const { resolved } = this;\r\n        if (!resolved)\r\n            return;\r\n        const { animation } = resolved;\r\n        animation.currentTime = secondsToMilliseconds(newTime);\r\n    }\r\n    get speed() {\r\n        const { resolved } = this;\r\n        if (!resolved)\r\n            return 1;\r\n        const { animation } = resolved;\r\n        return animation.playbackRate;\r\n    }\r\n    set speed(newSpeed) {\r\n        const { resolved } = this;\r\n        if (!resolved)\r\n            return;\r\n        const { animation } = resolved;\r\n        animation.playbackRate = newSpeed;\r\n    }\r\n    get state() {\r\n        const { resolved } = this;\r\n        if (!resolved)\r\n            return \"idle\";\r\n        const { animation } = resolved;\r\n        return animation.playState;\r\n    }\r\n    get startTime() {\r\n        const { resolved } = this;\r\n        if (!resolved)\r\n            return null;\r\n        const { animation } = resolved;\r\n        // Coerce to number as TypeScript incorrectly types this\r\n        // as CSSNumberish\r\n        return animation.startTime;\r\n    }\r\n    /**\r\n     * Replace the default DocumentTimeline with another AnimationTimeline.\r\n     * Currently used for scroll animations.\r\n     */\r\n    attachTimeline(timeline) {\r\n        if (!this._resolved) {\r\n            this.pendingTimeline = timeline;\r\n        }\r\n        else {\r\n            const { resolved } = this;\r\n            if (!resolved)\r\n                return noop;\r\n            const { animation } = resolved;\r\n            attachTimeline(animation, timeline);\r\n        }\r\n        return noop;\r\n    }\r\n    play() {\r\n        if (this.isStopped)\r\n            return;\r\n        const { resolved } = this;\r\n        if (!resolved)\r\n            return;\r\n        const { animation } = resolved;\r\n        if (animation.playState === \"finished\") {\r\n            this.updateFinishedPromise();\r\n        }\r\n        animation.play();\r\n    }\r\n    pause() {\r\n        const { resolved } = this;\r\n        if (!resolved)\r\n            return;\r\n        const { animation } = resolved;\r\n        animation.pause();\r\n    }\r\n    stop() {\r\n        this.resolver.cancel();\r\n        this.isStopped = true;\r\n        if (this.state === \"idle\")\r\n            return;\r\n        this.resolveFinishedPromise();\r\n        this.updateFinishedPromise();\r\n        const { resolved } = this;\r\n        if (!resolved)\r\n            return;\r\n        const { animation, keyframes, duration, type, ease, times } = resolved;\r\n        if (animation.playState === \"idle\" ||\r\n            animation.playState === \"finished\") {\r\n            return;\r\n        }\r\n        /**\r\n         * WAAPI doesn't natively have any interruption capabilities.\r\n         *\r\n         * Rather than read commited styles back out of the DOM, we can\r\n         * create a renderless JS animation and sample it twice to calculate\r\n         * its current value, \"previous\" value, and therefore allow\r\n         * Motion to calculate velocity for any subsequent animation.\r\n         */\r\n        if (this.time) {\r\n            const { motionValue, onUpdate, onComplete, element, ...options } = this.options;\r\n            const sampleAnimation = new MainThreadAnimation({\r\n                ...options,\r\n                keyframes,\r\n                duration,\r\n                type,\r\n                ease,\r\n                times,\r\n                isGenerator: true,\r\n            });\r\n            const sampleTime = secondsToMilliseconds(this.time);\r\n            motionValue.setWithVelocity(sampleAnimation.sample(sampleTime - sampleDelta).value, sampleAnimation.sample(sampleTime).value, sampleDelta);\r\n        }\r\n        const { onStop } = this.options;\r\n        onStop && onStop();\r\n        this.cancel();\r\n    }\r\n    complete() {\r\n        const { resolved } = this;\r\n        if (!resolved)\r\n            return;\r\n        resolved.animation.finish();\r\n    }\r\n    cancel() {\r\n        const { resolved } = this;\r\n        if (!resolved)\r\n            return;\r\n        resolved.animation.cancel();\r\n    }\r\n    static supports(options) {\r\n        const { motionValue, name, repeatDelay, repeatType, damping, type } = options;\r\n        if (!motionValue ||\r\n            !motionValue.owner ||\r\n            !(motionValue.owner.current instanceof HTMLElement)) {\r\n            return false;\r\n        }\r\n        const { onUpdate, transformTemplate } = motionValue.owner.getProps();\r\n        return (supportsWaapi() &&\r\n            name &&\r\n            acceleratedValues.has(name) &&\r\n            /**\r\n             * If we're outputting values to onUpdate then we can't use WAAPI as there's\r\n             * no way to read the value from WAAPI every frame.\r\n             */\r\n            !onUpdate &&\r\n            !transformTemplate &&\r\n            !repeatDelay &&\r\n            repeatType !== \"mirror\" &&\r\n            damping !== 0 &&\r\n            type !== \"inertia\");\r\n    }\r\n}\r\n\r\nexport { AcceleratedAnimation };\r\n","import { transformProps } from '../../render/html/utils/keys-transform.mjs';\r\n\r\nconst underDampedSpring = {\r\n    type: \"spring\",\r\n    stiffness: 500,\r\n    damping: 25,\r\n    restSpeed: 10,\r\n};\r\nconst criticallyDampedSpring = (target) => ({\r\n    type: \"spring\",\r\n    stiffness: 550,\r\n    damping: target === 0 ? 2 * Math.sqrt(550) : 30,\r\n    restSpeed: 10,\r\n});\r\nconst keyframesTransition = {\r\n    type: \"keyframes\",\r\n    duration: 0.8,\r\n};\r\n/**\r\n * Default easing curve is a slightly shallower version of\r\n * the default browser easing curve.\r\n */\r\nconst ease = {\r\n    type: \"keyframes\",\r\n    ease: [0.25, 0.1, 0.35, 1],\r\n    duration: 0.3,\r\n};\r\nconst getDefaultTransition = (valueKey, { keyframes }) => {\r\n    if (keyframes.length > 2) {\r\n        return keyframesTransition;\r\n    }\r\n    else if (transformProps.has(valueKey)) {\r\n        return valueKey.startsWith(\"scale\")\r\n            ? criticallyDampedSpring(keyframes[1])\r\n            : underDampedSpring;\r\n    }\r\n    return ease;\r\n};\r\n\r\nexport { getDefaultTransition };\r\n","/**\r\n * Decide whether a transition is defined on a given Transition.\r\n * This filters out orchestration options and returns true\r\n * if any options are left.\r\n */\r\nfunction isTransitionDefined({ when, delay: _delay, delayChildren, staggerChildren, staggerDirection, repeat, repeatType, repeatDelay, from, elapsed, ...transition }) {\r\n    return !!Object.keys(transition).length;\r\n}\r\n\r\nexport { isTransitionDefined };\r\n","import { GroupPlaybackControls } from '../../../../../motion-dom/dist/es/animation/controls/Group.mjs';\r\nimport { getValueTransition } from '../../../../../motion-dom/dist/es/animation/utils/get-value-transition.mjs';\r\nimport '../../../../../motion-utils/dist/es/errors.mjs';\r\nimport { secondsToMilliseconds } from '../../../../../motion-utils/dist/es/time-conversion.mjs';\r\nimport { frame } from '../../frameloop/frame.mjs';\r\nimport { MotionGlobalConfig } from '../../utils/GlobalConfig.mjs';\r\nimport { instantAnimationState } from '../../utils/use-instant-transition-state.mjs';\r\nimport { AcceleratedAnimation } from '../animators/AcceleratedAnimation.mjs';\r\nimport { MainThreadAnimation } from '../animators/MainThreadAnimation.mjs';\r\nimport { getFinalKeyframe } from '../animators/waapi/utils/get-final-keyframe.mjs';\r\nimport { getDefaultTransition } from '../utils/default-transitions.mjs';\r\nimport { isTransitionDefined } from '../utils/is-transition-defined.mjs';\r\n\r\nconst animateMotionValue = (name, value, target, transition = {}, element, isHandoff) => (onComplete) => {\r\n    const valueTransition = getValueTransition(transition, name) || {};\r\n    /**\r\n     * Most transition values are currently completely overwritten by value-specific\r\n     * transitions. In the future it'd be nicer to blend these transitions. But for now\r\n     * delay actually does inherit from the root transition if not value-specific.\r\n     */\r\n    const delay = valueTransition.delay || transition.delay || 0;\r\n    /**\r\n     * Elapsed isn't a public transition option but can be passed through from\r\n     * optimized appear effects in milliseconds.\r\n     */\r\n    let { elapsed = 0 } = transition;\r\n    elapsed = elapsed - secondsToMilliseconds(delay);\r\n    let options = {\r\n        keyframes: Array.isArray(target) ? target : [null, target],\r\n        ease: \"easeOut\",\r\n        velocity: value.getVelocity(),\r\n        ...valueTransition,\r\n        delay: -elapsed,\r\n        onUpdate: (v) => {\r\n            value.set(v);\r\n            valueTransition.onUpdate && valueTransition.onUpdate(v);\r\n        },\r\n        onComplete: () => {\r\n            onComplete();\r\n            valueTransition.onComplete && valueTransition.onComplete();\r\n        },\r\n        name,\r\n        motionValue: value,\r\n        element: isHandoff ? undefined : element,\r\n    };\r\n    /**\r\n     * If there's no transition defined for this value, we can generate\r\n     * unqiue transition settings for this value.\r\n     */\r\n    if (!isTransitionDefined(valueTransition)) {\r\n        options = {\r\n            ...options,\r\n            ...getDefaultTransition(name, options),\r\n        };\r\n    }\r\n    /**\r\n     * Both WAAPI and our internal animation functions use durations\r\n     * as defined by milliseconds, while our external API defines them\r\n     * as seconds.\r\n     */\r\n    if (options.duration) {\r\n        options.duration = secondsToMilliseconds(options.duration);\r\n    }\r\n    if (options.repeatDelay) {\r\n        options.repeatDelay = secondsToMilliseconds(options.repeatDelay);\r\n    }\r\n    if (options.from !== undefined) {\r\n        options.keyframes[0] = options.from;\r\n    }\r\n    let shouldSkip = false;\r\n    if (options.type === false ||\r\n        (options.duration === 0 && !options.repeatDelay)) {\r\n        options.duration = 0;\r\n        if (options.delay === 0) {\r\n            shouldSkip = true;\r\n        }\r\n    }\r\n    if (instantAnimationState.current ||\r\n        MotionGlobalConfig.skipAnimations) {\r\n        shouldSkip = true;\r\n        options.duration = 0;\r\n        options.delay = 0;\r\n    }\r\n    /**\r\n     * If we can or must skip creating the animation, and apply only\r\n     * the final keyframe, do so. We also check once keyframes are resolved but\r\n     * this early check prevents the need to create an animation at all.\r\n     */\r\n    if (shouldSkip && !isHandoff && value.get() !== undefined) {\r\n        const finalKeyframe = getFinalKeyframe(options.keyframes, valueTransition);\r\n        if (finalKeyframe !== undefined) {\r\n            frame.update(() => {\r\n                options.onUpdate(finalKeyframe);\r\n                options.onComplete();\r\n            });\r\n            // We still want to return some animation controls here rather\r\n            // than returning undefined\r\n            return new GroupPlaybackControls([]);\r\n        }\r\n    }\r\n    /**\r\n     * Animate via WAAPI if possible. If this is a handoff animation, the optimised animation will be running via\r\n     * WAAPI. Therefore, this animation must be JS to ensure it runs \"under\" the\r\n     * optimised animation.\r\n     */\r\n    if (!isHandoff && AcceleratedAnimation.supports(options)) {\r\n        return new AcceleratedAnimation(options);\r\n    }\r\n    else {\r\n        return new MainThreadAnimation(options);\r\n    }\r\n};\r\n\r\nexport { animateMotionValue };\r\n","import '../../../../../motion-utils/dist/es/errors.mjs';\r\nimport { getValueTransition } from '../../../../../motion-dom/dist/es/animation/utils/get-value-transition.mjs';\r\nimport { positionalKeys } from '../../render/html/utils/keys-position.mjs';\r\nimport { setTarget } from '../../render/utils/setters.mjs';\r\nimport { addValueToWillChange } from '../../value/use-will-change/add-will-change.mjs';\r\nimport { getOptimisedAppearId } from '../optimized-appear/get-appear-id.mjs';\r\nimport { animateMotionValue } from './motion-value.mjs';\r\nimport { frame } from '../../frameloop/frame.mjs';\r\n\r\n/**\r\n * Decide whether we should block this animation. Previously, we achieved this\r\n * just by checking whether the key was listed in protectedKeys, but this\r\n * posed problems if an animation was triggered by afterChildren and protectedKeys\r\n * had been set to true in the meantime.\r\n */\r\nfunction shouldBlockAnimation({ protectedKeys, needsAnimating }, key) {\r\n    const shouldBlock = protectedKeys.hasOwnProperty(key) && needsAnimating[key] !== true;\r\n    needsAnimating[key] = false;\r\n    return shouldBlock;\r\n}\r\nfunction animateTarget(visualElement, targetAndTransition, { delay = 0, transitionOverride, type } = {}) {\r\n    var _a;\r\n    let { transition = visualElement.getDefaultTransition(), transitionEnd, ...target } = targetAndTransition;\r\n    if (transitionOverride)\r\n        transition = transitionOverride;\r\n    const animations = [];\r\n    const animationTypeState = type &&\r\n        visualElement.animationState &&\r\n        visualElement.animationState.getState()[type];\r\n    for (const key in target) {\r\n        const value = visualElement.getValue(key, (_a = visualElement.latestValues[key]) !== null && _a !== void 0 ? _a : null);\r\n        const valueTarget = target[key];\r\n        if (valueTarget === undefined ||\r\n            (animationTypeState &&\r\n                shouldBlockAnimation(animationTypeState, key))) {\r\n            continue;\r\n        }\r\n        const valueTransition = {\r\n            delay,\r\n            ...getValueTransition(transition || {}, key),\r\n        };\r\n        /**\r\n         * If this is the first time a value is being animated, check\r\n         * to see if we're handling off from an existing animation.\r\n         */\r\n        let isHandoff = false;\r\n        if (window.MotionHandoffAnimation) {\r\n            const appearId = getOptimisedAppearId(visualElement);\r\n            if (appearId) {\r\n                const startTime = window.MotionHandoffAnimation(appearId, key, frame);\r\n                if (startTime !== null) {\r\n                    valueTransition.startTime = startTime;\r\n                    isHandoff = true;\r\n                }\r\n            }\r\n        }\r\n        addValueToWillChange(visualElement, key);\r\n        value.start(animateMotionValue(key, value, valueTarget, visualElement.shouldReduceMotion && positionalKeys.has(key)\r\n            ? { type: false }\r\n            : valueTransition, visualElement, isHandoff));\r\n        const animation = value.animation;\r\n        if (animation) {\r\n            animations.push(animation);\r\n        }\r\n    }\r\n    if (transitionEnd) {\r\n        Promise.all(animations).then(() => {\r\n            frame.update(() => {\r\n                transitionEnd && setTarget(visualElement, transitionEnd);\r\n            });\r\n        });\r\n    }\r\n    return animations;\r\n}\r\n\r\nexport { animateTarget };\r\n","const isDragging = {\r\n    x: false,\r\n    y: false,\r\n};\r\nfunction isDragActive() {\r\n    return isDragging.x || isDragging.y;\r\n}\r\n\r\nexport { isDragActive, isDragging };\r\n","const distance = (a, b) => Math.abs(a - b);\r\nfunction distance2D(a, b) {\r\n    // Multi-dimensional\r\n    const xDelta = distance(a.x, b.x);\r\n    const yDelta = distance(a.y, b.y);\r\n    return Math.sqrt(xDelta ** 2 + yDelta ** 2);\r\n}\r\n\r\nexport { distance, distance2D };\r\n","const createAxisDelta = () => ({\r\n    translate: 0,\r\n    scale: 1,\r\n    origin: 0,\r\n    originPoint: 0,\r\n});\r\nconst createDelta = () => ({\r\n    x: createAxisDelta(),\r\n    y: createAxisDelta(),\r\n});\r\nconst createAxis = () => ({ min: 0, max: 0 });\r\nconst createBox = () => ({\r\n    x: createAxis(),\r\n    y: createAxis(),\r\n});\r\n\r\nexport { createAxis, createAxisDelta, createBox, createDelta };\r\n","/**\r\n * Bounding boxes tend to be defined as top, left, right, bottom. For various operations\r\n * it's easier to consider each axis individually. This function returns a bounding box\r\n * as a map of single-axis min/max values.\r\n */\r\nfunction convertBoundingBoxToBox({ top, left, right, bottom, }) {\r\n    return {\r\n        x: { min: left, max: right },\r\n        y: { min: top, max: bottom },\r\n    };\r\n}\r\nfunction convertBoxToBoundingBox({ x, y }) {\r\n    return { top: y.min, right: x.max, bottom: y.max, left: x.min };\r\n}\r\n/**\r\n * Applies a TransformPoint function to a bounding box. TransformPoint is usually a function\r\n * provided by Framer to allow measured points to be corrected for device scaling. This is used\r\n * when measuring DOM elements and DOM event points.\r\n */\r\nfunction transformBoxPoints(point, transformPoint) {\r\n    if (!transformPoint)\r\n        return point;\r\n    const topLeft = transformPoint({ x: point.left, y: point.top });\r\n    const bottomRight = transformPoint({ x: point.right, y: point.bottom });\r\n    return {\r\n        top: topLeft.y,\r\n        left: topLeft.x,\r\n        bottom: bottomRight.y,\r\n        right: bottomRight.x,\r\n    };\r\n}\r\n\r\nexport { convertBoundingBoxToBox, convertBoxToBoundingBox, transformBoxPoints };\r\n","function isIdentityScale(scale) {\r\n    return scale === undefined || scale === 1;\r\n}\r\nfunction hasScale({ scale, scaleX, scaleY }) {\r\n    return (!isIdentityScale(scale) ||\r\n        !isIdentityScale(scaleX) ||\r\n        !isIdentityScale(scaleY));\r\n}\r\nfunction hasTransform(values) {\r\n    return (hasScale(values) ||\r\n        has2DTranslate(values) ||\r\n        values.z ||\r\n        values.rotate ||\r\n        values.rotateX ||\r\n        values.rotateY ||\r\n        values.skewX ||\r\n        values.skewY);\r\n}\r\nfunction has2DTranslate(values) {\r\n    return is2DTranslate(values.x) || is2DTranslate(values.y);\r\n}\r\nfunction is2DTranslate(value) {\r\n    return value && value !== \"0%\";\r\n}\r\n\r\nexport { has2DTranslate, hasScale, hasTransform };\r\n","import { mixNumber } from '../../utils/mix/number.mjs';\r\nimport { hasTransform } from '../utils/has-transform.mjs';\r\n\r\n/**\r\n * Scales a point based on a factor and an originPoint\r\n */\r\nfunction scalePoint(point, scale, originPoint) {\r\n    const distanceFromOrigin = point - originPoint;\r\n    const scaled = scale * distanceFromOrigin;\r\n    return originPoint + scaled;\r\n}\r\n/**\r\n * Applies a translate/scale delta to a point\r\n */\r\nfunction applyPointDelta(point, translate, scale, originPoint, boxScale) {\r\n    if (boxScale !== undefined) {\r\n        point = scalePoint(point, boxScale, originPoint);\r\n    }\r\n    return scalePoint(point, scale, originPoint) + translate;\r\n}\r\n/**\r\n * Applies a translate/scale delta to an axis\r\n */\r\nfunction applyAxisDelta(axis, translate = 0, scale = 1, originPoint, boxScale) {\r\n    axis.min = applyPointDelta(axis.min, translate, scale, originPoint, boxScale);\r\n    axis.max = applyPointDelta(axis.max, translate, scale, originPoint, boxScale);\r\n}\r\n/**\r\n * Applies a translate/scale delta to a box\r\n */\r\nfunction applyBoxDelta(box, { x, y }) {\r\n    applyAxisDelta(box.x, x.translate, x.scale, x.originPoint);\r\n    applyAxisDelta(box.y, y.translate, y.scale, y.originPoint);\r\n}\r\nconst TREE_SCALE_SNAP_MIN = 0.999999999999;\r\nconst TREE_SCALE_SNAP_MAX = 1.0000000000001;\r\n/**\r\n * Apply a tree of deltas to a box. We do this to calculate the effect of all the transforms\r\n * in a tree upon our box before then calculating how to project it into our desired viewport-relative box\r\n *\r\n * This is the final nested loop within updateLayoutDelta for future refactoring\r\n */\r\nfunction applyTreeDeltas(box, treeScale, treePath, isSharedTransition = false) {\r\n    const treeLength = treePath.length;\r\n    if (!treeLength)\r\n        return;\r\n    // Reset the treeScale\r\n    treeScale.x = treeScale.y = 1;\r\n    let node;\r\n    let delta;\r\n    for (let i = 0; i < treeLength; i++) {\r\n        node = treePath[i];\r\n        delta = node.projectionDelta;\r\n        /**\r\n         * TODO: Prefer to remove this, but currently we have motion components with\r\n         * display: contents in Framer.\r\n         */\r\n        const { visualElement } = node.options;\r\n        if (visualElement &&\r\n            visualElement.props.style &&\r\n            visualElement.props.style.display === \"contents\") {\r\n            continue;\r\n        }\r\n        if (isSharedTransition &&\r\n            node.options.layoutScroll &&\r\n            node.scroll &&\r\n            node !== node.root) {\r\n            transformBox(box, {\r\n                x: -node.scroll.offset.x,\r\n                y: -node.scroll.offset.y,\r\n            });\r\n        }\r\n        if (delta) {\r\n            // Incoporate each ancestor's scale into a culmulative treeScale for this component\r\n            treeScale.x *= delta.x.scale;\r\n            treeScale.y *= delta.y.scale;\r\n            // Apply each ancestor's calculated delta into this component's recorded layout box\r\n            applyBoxDelta(box, delta);\r\n        }\r\n        if (isSharedTransition && hasTransform(node.latestValues)) {\r\n            transformBox(box, node.latestValues);\r\n        }\r\n    }\r\n    /**\r\n     * Snap tree scale back to 1 if it's within a non-perceivable threshold.\r\n     * This will help reduce useless scales getting rendered.\r\n     */\r\n    if (treeScale.x < TREE_SCALE_SNAP_MAX &&\r\n        treeScale.x > TREE_SCALE_SNAP_MIN) {\r\n        treeScale.x = 1.0;\r\n    }\r\n    if (treeScale.y < TREE_SCALE_SNAP_MAX &&\r\n        treeScale.y > TREE_SCALE_SNAP_MIN) {\r\n        treeScale.y = 1.0;\r\n    }\r\n}\r\nfunction translateAxis(axis, distance) {\r\n    axis.min = axis.min + distance;\r\n    axis.max = axis.max + distance;\r\n}\r\n/**\r\n * Apply a transform to an axis from the latest resolved motion values.\r\n * This function basically acts as a bridge between a flat motion value map\r\n * and applyAxisDelta\r\n */\r\nfunction transformAxis(axis, axisTranslate, axisScale, boxScale, axisOrigin = 0.5) {\r\n    const originPoint = mixNumber(axis.min, axis.max, axisOrigin);\r\n    // Apply the axis delta to the final axis\r\n    applyAxisDelta(axis, axisTranslate, axisScale, originPoint, boxScale);\r\n}\r\n/**\r\n * Apply a transform to a box from the latest resolved motion values.\r\n */\r\nfunction transformBox(box, transform) {\r\n    transformAxis(box.x, transform.x, transform.scaleX, transform.scale, transform.originX);\r\n    transformAxis(box.y, transform.y, transform.scaleY, transform.scale, transform.originY);\r\n}\r\n\r\nexport { applyAxisDelta, applyBoxDelta, applyPointDelta, applyTreeDeltas, scalePoint, transformAxis, transformBox, translateAxis };\r\n","import { convertBoundingBoxToBox, transformBoxPoints } from '../geometry/conversion.mjs';\r\nimport { translateAxis } from '../geometry/delta-apply.mjs';\r\n\r\nfunction measureViewportBox(instance, transformPoint) {\r\n    return convertBoundingBoxToBox(transformBoxPoints(instance.getBoundingClientRect(), transformPoint));\r\n}\r\nfunction measurePageBox(element, rootProjectionNode, transformPagePoint) {\r\n    const viewportBox = measureViewportBox(element, transformPagePoint);\r\n    const { scroll } = rootProjectionNode;\r\n    if (scroll) {\r\n        translateAxis(viewportBox.x, scroll.offset.x);\r\n        translateAxis(viewportBox.y, scroll.offset.y);\r\n    }\r\n    return viewportBox;\r\n}\r\n\r\nexport { measurePageBox, measureViewportBox };\r\n","import { motionValue } from '../../value/index.mjs';\r\nimport { isMotionValue } from '../../value/utils/is-motion-value.mjs';\r\nimport { animateMotionValue } from '../interfaces/motion-value.mjs';\r\n\r\nfunction animateSingleValue(value, keyframes, options) {\r\n    const motionValue$1 = isMotionValue(value) ? value : motionValue(value);\r\n    motionValue$1.start(animateMotionValue(\"\", motionValue$1, keyframes, options));\r\n    return motionValue$1.animation;\r\n}\r\n\r\nexport { animateSingleValue };\r\n","function isSVGElement(element) {\r\n    return element instanceof SVGElement && element.tagName !== \"svg\";\r\n}\r\n\r\nexport { isSVGElement };\r\n","import '../../../../motion-utils/dist/es/errors.mjs';\r\nimport { secondsToMilliseconds } from '../../../../motion-utils/dist/es/time-conversion.mjs';\r\nimport { time } from '../frameloop/sync-time.mjs';\r\nimport { frame, cancelFrame } from '../frameloop/frame.mjs';\r\n\r\n/**\r\n * Timeout defined in ms\r\n */\r\nfunction delay(callback, timeout) {\r\n    const start = time.now();\r\n    const checkElapsed = ({ timestamp }) => {\r\n        const elapsed = timestamp - start;\r\n        if (elapsed >= timeout) {\r\n            cancelFrame(checkElapsed);\r\n            callback(elapsed - timeout);\r\n        }\r\n    };\r\n    frame.read(checkElapsed, true);\r\n    return () => cancelFrame(checkElapsed);\r\n}\r\nfunction delayInSeconds(callback, timeout) {\r\n    return delay(callback, secondsToMilliseconds(timeout));\r\n}\r\n\r\nexport { delay, delayInSeconds };\r\n","function resolveElements(elementOrSelector, scope, selectorCache) {\r\n    var _a;\r\n    if (elementOrSelector instanceof Element) {\r\n        return [elementOrSelector];\r\n    }\r\n    else if (typeof elementOrSelector === \"string\") {\r\n        let root = document;\r\n        if (scope) {\r\n            // TODO: Refactor to utils package\r\n            // invariant(\r\n            //     Boolean(scope.current),\r\n            //     \"Scope provided, but no element detected.\"\r\n            // )\r\n            root = scope.current;\r\n        }\r\n        const elements = (_a = selectorCache === null || selectorCache === void 0 ? void 0 : selectorCache[elementOrSelector]) !== null && _a !== void 0 ? _a : root.querySelectorAll(elementOrSelector);\r\n        return elements ? Array.from(elements) : [];\r\n    }\r\n    return Array.from(elementOrSelector);\r\n}\r\n\r\nexport { resolveElements };\r\n","// Does this device prefer reduced motion? Returns `null` server-side.\r\nconst prefersReducedMotion = { current: null };\r\nconst hasReducedMotionListener = { current: false };\r\n\r\nexport { hasReducedMotionListener, prefersReducedMotion };\r\n","import { isBrowser } from '../is-browser.mjs';\r\nimport { hasReducedMotionListener, prefersReducedMotion } from './state.mjs';\r\n\r\nfunction initPrefersReducedMotion() {\r\n    hasReducedMotionListener.current = true;\r\n    if (!isBrowser)\r\n        return;\r\n    if (window.matchMedia) {\r\n        const motionMediaQuery = window.matchMedia(\"(prefers-reduced-motion)\");\r\n        const setReducedMotionPreferences = () => (prefersReducedMotion.current = motionMediaQuery.matches);\r\n        motionMediaQuery.addListener(setReducedMotionPreferences);\r\n        setReducedMotionPreferences();\r\n    }\r\n    else {\r\n        prefersReducedMotion.current = false;\r\n    }\r\n}\r\n\r\nexport { initPrefersReducedMotion };\r\n","import { color } from '../../../value/types/color/index.mjs';\r\nimport { complex } from '../../../value/types/complex/index.mjs';\r\nimport { dimensionValueTypes } from './dimensions.mjs';\r\nimport { testValueType } from './test.mjs';\r\n\r\n/**\r\n * A list of all ValueTypes\r\n */\r\nconst valueTypes = [...dimensionValueTypes, color, complex];\r\n/**\r\n * Tests a value against the list of ValueTypes\r\n */\r\nconst findValueType = (v) => valueTypes.find(testValueType(v));\r\n\r\nexport { findValueType };\r\n","const visualElementStore = new WeakMap();\r\n\r\nexport { visualElementStore };\r\n","import { warnOnce } from '../../utils/warn-once.mjs';\r\nimport { motionValue } from '../../value/index.mjs';\r\nimport { isMotionValue } from '../../value/utils/is-motion-value.mjs';\r\n\r\nfunction updateMotionValuesFromProps(element, next, prev) {\r\n    for (const key in next) {\r\n        const nextValue = next[key];\r\n        const prevValue = prev[key];\r\n        if (isMotionValue(nextValue)) {\r\n            /**\r\n             * If this is a motion value found in props or style, we want to add it\r\n             * to our visual element's motion value map.\r\n             */\r\n            element.addValue(key, nextValue);\r\n            /**\r\n             * Check the version of the incoming motion value with this version\r\n             * and warn against mismatches.\r\n             */\r\n            if (process.env.NODE_ENV === \"development\") {\r\n                warnOnce(nextValue.version === \"11.18.2\", `Attempting to mix Motion versions ${nextValue.version} with 11.18.2 may not work as expected.`);\r\n            }\r\n        }\r\n        else if (isMotionValue(prevValue)) {\r\n            /**\r\n             * If we're swapping from a motion value to a static value,\r\n             * create a new motion value from that\r\n             */\r\n            element.addValue(key, motionValue(nextValue, { owner: element }));\r\n        }\r\n        else if (prevValue !== nextValue) {\r\n            /**\r\n             * If this is a flat value that has changed, update the motion value\r\n             * or create one if it doesn't exist. We only want to do this if we're\r\n             * not handling the value with our animation state.\r\n             */\r\n            if (element.hasValue(key)) {\r\n                const existingValue = element.getValue(key);\r\n                if (existingValue.liveStyle === true) {\r\n                    existingValue.jump(nextValue);\r\n                }\r\n                else if (!existingValue.hasAnimated) {\r\n                    existingValue.set(nextValue);\r\n                }\r\n            }\r\n            else {\r\n                const latestValue = element.getStaticValue(key);\r\n                element.addValue(key, motionValue(latestValue !== undefined ? latestValue : nextValue, { owner: element }));\r\n            }\r\n        }\r\n    }\r\n    // Handle removed values\r\n    for (const key in prev) {\r\n        if (next[key] === undefined)\r\n            element.removeValue(key);\r\n    }\r\n    return next;\r\n}\r\n\r\nexport { updateMotionValuesFromProps };\r\n","import { time } from '../frameloop/sync-time.mjs';\r\nimport { featureDefinitions } from '../motion/features/definitions.mjs';\r\nimport { createBox } from '../projection/geometry/models.mjs';\r\nimport { isNumericalString } from '../utils/is-numerical-string.mjs';\r\nimport { isZeroValueString } from '../utils/is-zero-value-string.mjs';\r\nimport { initPrefersReducedMotion } from '../utils/reduced-motion/index.mjs';\r\nimport { hasReducedMotionListener, prefersReducedMotion } from '../utils/reduced-motion/state.mjs';\r\nimport { SubscriptionManager } from '../utils/subscription-manager.mjs';\r\nimport { warnOnce } from '../utils/warn-once.mjs';\r\nimport { motionValue } from '../value/index.mjs';\r\nimport { complex } from '../value/types/complex/index.mjs';\r\nimport { isMotionValue } from '../value/utils/is-motion-value.mjs';\r\nimport { getAnimatableNone } from './dom/value-types/animatable-none.mjs';\r\nimport { findValueType } from './dom/value-types/find.mjs';\r\nimport { transformProps } from './html/utils/keys-transform.mjs';\r\nimport { visualElementStore } from './store.mjs';\r\nimport { isControllingVariants, isVariantNode } from './utils/is-controlling-variants.mjs';\r\nimport { KeyframeResolver } from './utils/KeyframesResolver.mjs';\r\nimport { updateMotionValuesFromProps } from './utils/motion-values.mjs';\r\nimport { resolveVariantFromProps } from './utils/resolve-variants.mjs';\r\nimport { frame, cancelFrame } from '../frameloop/frame.mjs';\r\n\r\nconst propEventHandlers = [\r\n    \"AnimationStart\",\r\n    \"AnimationComplete\",\r\n    \"Update\",\r\n    \"BeforeLayoutMeasure\",\r\n    \"LayoutMeasure\",\r\n    \"LayoutAnimationStart\",\r\n    \"LayoutAnimationComplete\",\r\n];\r\n/**\r\n * A VisualElement is an imperative abstraction around UI elements such as\r\n * HTMLElement, SVGElement, Three.Object3D etc.\r\n */\r\nclass VisualElement {\r\n    /**\r\n     * This method takes React props and returns found MotionValues. For example, HTML\r\n     * MotionValues will be found within the style prop, whereas for Three.js within attribute arrays.\r\n     *\r\n     * This isn't an abstract method as it needs calling in the constructor, but it is\r\n     * intended to be one.\r\n     */\r\n    scrapeMotionValuesFromProps(_props, _prevProps, _visualElement) {\r\n        return {};\r\n    }\r\n    constructor({ parent, props, presenceContext, reducedMotionConfig, blockInitialAnimation, visualState, }, options = {}) {\r\n        /**\r\n         * A reference to the current underlying Instance, e.g. a HTMLElement\r\n         * or Three.Mesh etc.\r\n         */\r\n        this.current = null;\r\n        /**\r\n         * A set containing references to this VisualElement's children.\r\n         */\r\n        this.children = new Set();\r\n        /**\r\n         * Determine what role this visual element should take in the variant tree.\r\n         */\r\n        this.isVariantNode = false;\r\n        this.isControllingVariants = false;\r\n        /**\r\n         * Decides whether this VisualElement should animate in reduced motion\r\n         * mode.\r\n         *\r\n         * TODO: This is currently set on every individual VisualElement but feels\r\n         * like it could be set globally.\r\n         */\r\n        this.shouldReduceMotion = null;\r\n        /**\r\n         * A map of all motion values attached to this visual element. Motion\r\n         * values are source of truth for any given animated value. A motion\r\n         * value might be provided externally by the component via props.\r\n         */\r\n        this.values = new Map();\r\n        this.KeyframeResolver = KeyframeResolver;\r\n        /**\r\n         * Cleanup functions for active features (hover/tap/exit etc)\r\n         */\r\n        this.features = {};\r\n        /**\r\n         * A map of every subscription that binds the provided or generated\r\n         * motion values onChange listeners to this visual element.\r\n         */\r\n        this.valueSubscriptions = new Map();\r\n        /**\r\n         * A reference to the previously-provided motion values as returned\r\n         * from scrapeMotionValuesFromProps. We use the keys in here to determine\r\n         * if any motion values need to be removed after props are updated.\r\n         */\r\n        this.prevMotionValues = {};\r\n        /**\r\n         * An object containing a SubscriptionManager for each active event.\r\n         */\r\n        this.events = {};\r\n        /**\r\n         * An object containing an unsubscribe function for each prop event subscription.\r\n         * For example, every \"Update\" event can have multiple subscribers via\r\n         * VisualElement.on(), but only one of those can be defined via the onUpdate prop.\r\n         */\r\n        this.propEventSubscriptions = {};\r\n        this.notifyUpdate = () => this.notify(\"Update\", this.latestValues);\r\n        this.render = () => {\r\n            if (!this.current)\r\n                return;\r\n            this.triggerBuild();\r\n            this.renderInstance(this.current, this.renderState, this.props.style, this.projection);\r\n        };\r\n        this.renderScheduledAt = 0.0;\r\n        this.scheduleRender = () => {\r\n            const now = time.now();\r\n            if (this.renderScheduledAt < now) {\r\n                this.renderScheduledAt = now;\r\n                frame.render(this.render, false, true);\r\n            }\r\n        };\r\n        const { latestValues, renderState, onUpdate } = visualState;\r\n        this.onUpdate = onUpdate;\r\n        this.latestValues = latestValues;\r\n        this.baseTarget = { ...latestValues };\r\n        this.initialValues = props.initial ? { ...latestValues } : {};\r\n        this.renderState = renderState;\r\n        this.parent = parent;\r\n        this.props = props;\r\n        this.presenceContext = presenceContext;\r\n        this.depth = parent ? parent.depth + 1 : 0;\r\n        this.reducedMotionConfig = reducedMotionConfig;\r\n        this.options = options;\r\n        this.blockInitialAnimation = Boolean(blockInitialAnimation);\r\n        this.isControllingVariants = isControllingVariants(props);\r\n        this.isVariantNode = isVariantNode(props);\r\n        if (this.isVariantNode) {\r\n            this.variantChildren = new Set();\r\n        }\r\n        this.manuallyAnimateOnMount = Boolean(parent && parent.current);\r\n        /**\r\n         * Any motion values that are provided to the element when created\r\n         * aren't yet bound to the element, as this would technically be impure.\r\n         * However, we iterate through the motion values and set them to the\r\n         * initial values for this component.\r\n         *\r\n         * TODO: This is impure and we should look at changing this to run on mount.\r\n         * Doing so will break some tests but this isn't necessarily a breaking change,\r\n         * more a reflection of the test.\r\n         */\r\n        const { willChange, ...initialMotionValues } = this.scrapeMotionValuesFromProps(props, {}, this);\r\n        for (const key in initialMotionValues) {\r\n            const value = initialMotionValues[key];\r\n            if (latestValues[key] !== undefined && isMotionValue(value)) {\r\n                value.set(latestValues[key], false);\r\n            }\r\n        }\r\n    }\r\n    mount(instance) {\r\n        this.current = instance;\r\n        visualElementStore.set(instance, this);\r\n        if (this.projection && !this.projection.instance) {\r\n            this.projection.mount(instance);\r\n        }\r\n        if (this.parent && this.isVariantNode && !this.isControllingVariants) {\r\n            this.removeFromVariantTree = this.parent.addVariantChild(this);\r\n        }\r\n        this.values.forEach((value, key) => this.bindToMotionValue(key, value));\r\n        if (!hasReducedMotionListener.current) {\r\n            initPrefersReducedMotion();\r\n        }\r\n        this.shouldReduceMotion =\r\n            this.reducedMotionConfig === \"never\"\r\n                ? false\r\n                : this.reducedMotionConfig === \"always\"\r\n                    ? true\r\n                    : prefersReducedMotion.current;\r\n        if (process.env.NODE_ENV !== \"production\") {\r\n            warnOnce(this.shouldReduceMotion !== true, \"You have Reduced Motion enabled on your device. Animations may not appear as expected.\");\r\n        }\r\n        if (this.parent)\r\n            this.parent.children.add(this);\r\n        this.update(this.props, this.presenceContext);\r\n    }\r\n    unmount() {\r\n        visualElementStore.delete(this.current);\r\n        this.projection && this.projection.unmount();\r\n        cancelFrame(this.notifyUpdate);\r\n        cancelFrame(this.render);\r\n        this.valueSubscriptions.forEach((remove) => remove());\r\n        this.valueSubscriptions.clear();\r\n        this.removeFromVariantTree && this.removeFromVariantTree();\r\n        this.parent && this.parent.children.delete(this);\r\n        for (const key in this.events) {\r\n            this.events[key].clear();\r\n        }\r\n        for (const key in this.features) {\r\n            const feature = this.features[key];\r\n            if (feature) {\r\n                feature.unmount();\r\n                feature.isMounted = false;\r\n            }\r\n        }\r\n        this.current = null;\r\n    }\r\n    bindToMotionValue(key, value) {\r\n        if (this.valueSubscriptions.has(key)) {\r\n            this.valueSubscriptions.get(key)();\r\n        }\r\n        const valueIsTransform = transformProps.has(key);\r\n        const removeOnChange = value.on(\"change\", (latestValue) => {\r\n            this.latestValues[key] = latestValue;\r\n            this.props.onUpdate && frame.preRender(this.notifyUpdate);\r\n            if (valueIsTransform && this.projection) {\r\n                this.projection.isTransformDirty = true;\r\n            }\r\n        });\r\n        const removeOnRenderRequest = value.on(\"renderRequest\", this.scheduleRender);\r\n        let removeSyncCheck;\r\n        if (window.MotionCheckAppearSync) {\r\n            removeSyncCheck = window.MotionCheckAppearSync(this, key, value);\r\n        }\r\n        this.valueSubscriptions.set(key, () => {\r\n            removeOnChange();\r\n            removeOnRenderRequest();\r\n            if (removeSyncCheck)\r\n                removeSyncCheck();\r\n            if (value.owner)\r\n                value.stop();\r\n        });\r\n    }\r\n    sortNodePosition(other) {\r\n        /**\r\n         * If these nodes aren't even of the same type we can't compare their depth.\r\n         */\r\n        if (!this.current ||\r\n            !this.sortInstanceNodePosition ||\r\n            this.type !== other.type) {\r\n            return 0;\r\n        }\r\n        return this.sortInstanceNodePosition(this.current, other.current);\r\n    }\r\n    updateFeatures() {\r\n        let key = \"animation\";\r\n        for (key in featureDefinitions) {\r\n            const featureDefinition = featureDefinitions[key];\r\n            if (!featureDefinition)\r\n                continue;\r\n            const { isEnabled, Feature: FeatureConstructor } = featureDefinition;\r\n            /**\r\n             * If this feature is enabled but not active, make a new instance.\r\n             */\r\n            if (!this.features[key] &&\r\n                FeatureConstructor &&\r\n                isEnabled(this.props)) {\r\n                this.features[key] = new FeatureConstructor(this);\r\n            }\r\n            /**\r\n             * If we have a feature, mount or update it.\r\n             */\r\n            if (this.features[key]) {\r\n                const feature = this.features[key];\r\n                if (feature.isMounted) {\r\n                    feature.update();\r\n                }\r\n                else {\r\n                    feature.mount();\r\n                    feature.isMounted = true;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    triggerBuild() {\r\n        this.build(this.renderState, this.latestValues, this.props);\r\n    }\r\n    /**\r\n     * Measure the current viewport box with or without transforms.\r\n     * Only measures axis-aligned boxes, rotate and skew must be manually\r\n     * removed with a re-render to work.\r\n     */\r\n    measureViewportBox() {\r\n        return this.current\r\n            ? this.measureInstanceViewportBox(this.current, this.props)\r\n            : createBox();\r\n    }\r\n    getStaticValue(key) {\r\n        return this.latestValues[key];\r\n    }\r\n    setStaticValue(key, value) {\r\n        this.latestValues[key] = value;\r\n    }\r\n    /**\r\n     * Update the provided props. Ensure any newly-added motion values are\r\n     * added to our map, old ones removed, and listeners updated.\r\n     */\r\n    update(props, presenceContext) {\r\n        if (props.transformTemplate || this.props.transformTemplate) {\r\n            this.scheduleRender();\r\n        }\r\n        this.prevProps = this.props;\r\n        this.props = props;\r\n        this.prevPresenceContext = this.presenceContext;\r\n        this.presenceContext = presenceContext;\r\n        /**\r\n         * Update prop event handlers ie onAnimationStart, onAnimationComplete\r\n         */\r\n        for (let i = 0; i < propEventHandlers.length; i++) {\r\n            const key = propEventHandlers[i];\r\n            if (this.propEventSubscriptions[key]) {\r\n                this.propEventSubscriptions[key]();\r\n                delete this.propEventSubscriptions[key];\r\n            }\r\n            const listenerName = (\"on\" + key);\r\n            const listener = props[listenerName];\r\n            if (listener) {\r\n                this.propEventSubscriptions[key] = this.on(key, listener);\r\n            }\r\n        }\r\n        this.prevMotionValues = updateMotionValuesFromProps(this, this.scrapeMotionValuesFromProps(props, this.prevProps, this), this.prevMotionValues);\r\n        if (this.handleChildMotionValue) {\r\n            this.handleChildMotionValue();\r\n        }\r\n        this.onUpdate && this.onUpdate(this);\r\n    }\r\n    getProps() {\r\n        return this.props;\r\n    }\r\n    /**\r\n     * Returns the variant definition with a given name.\r\n     */\r\n    getVariant(name) {\r\n        return this.props.variants ? this.props.variants[name] : undefined;\r\n    }\r\n    /**\r\n     * Returns the defined default transition on this component.\r\n     */\r\n    getDefaultTransition() {\r\n        return this.props.transition;\r\n    }\r\n    getTransformPagePoint() {\r\n        return this.props.transformPagePoint;\r\n    }\r\n    getClosestVariantNode() {\r\n        return this.isVariantNode\r\n            ? this\r\n            : this.parent\r\n                ? this.parent.getClosestVariantNode()\r\n                : undefined;\r\n    }\r\n    /**\r\n     * Add a child visual element to our set of children.\r\n     */\r\n    addVariantChild(child) {\r\n        const closestVariantNode = this.getClosestVariantNode();\r\n        if (closestVariantNode) {\r\n            closestVariantNode.variantChildren &&\r\n                closestVariantNode.variantChildren.add(child);\r\n            return () => closestVariantNode.variantChildren.delete(child);\r\n        }\r\n    }\r\n    /**\r\n     * Add a motion value and bind it to this visual element.\r\n     */\r\n    addValue(key, value) {\r\n        // Remove existing value if it exists\r\n        const existingValue = this.values.get(key);\r\n        if (value !== existingValue) {\r\n            if (existingValue)\r\n                this.removeValue(key);\r\n            this.bindToMotionValue(key, value);\r\n            this.values.set(key, value);\r\n            this.latestValues[key] = value.get();\r\n        }\r\n    }\r\n    /**\r\n     * Remove a motion value and unbind any active subscriptions.\r\n     */\r\n    removeValue(key) {\r\n        this.values.delete(key);\r\n        const unsubscribe = this.valueSubscriptions.get(key);\r\n        if (unsubscribe) {\r\n            unsubscribe();\r\n            this.valueSubscriptions.delete(key);\r\n        }\r\n        delete this.latestValues[key];\r\n        this.removeValueFromRenderState(key, this.renderState);\r\n    }\r\n    /**\r\n     * Check whether we have a motion value for this key\r\n     */\r\n    hasValue(key) {\r\n        return this.values.has(key);\r\n    }\r\n    getValue(key, defaultValue) {\r\n        if (this.props.values && this.props.values[key]) {\r\n            return this.props.values[key];\r\n        }\r\n        let value = this.values.get(key);\r\n        if (value === undefined && defaultValue !== undefined) {\r\n            value = motionValue(defaultValue === null ? undefined : defaultValue, { owner: this });\r\n            this.addValue(key, value);\r\n        }\r\n        return value;\r\n    }\r\n    /**\r\n     * If we're trying to animate to a previously unencountered value,\r\n     * we need to check for it in our state and as a last resort read it\r\n     * directly from the instance (which might have performance implications).\r\n     */\r\n    readValue(key, target) {\r\n        var _a;\r\n        let value = this.latestValues[key] !== undefined || !this.current\r\n            ? this.latestValues[key]\r\n            : (_a = this.getBaseTargetFromProps(this.props, key)) !== null && _a !== void 0 ? _a : this.readValueFromInstance(this.current, key, this.options);\r\n        if (value !== undefined && value !== null) {\r\n            if (typeof value === \"string\" &&\r\n                (isNumericalString(value) || isZeroValueString(value))) {\r\n                // If this is a number read as a string, ie \"0\" or \"200\", convert it to a number\r\n                value = parseFloat(value);\r\n            }\r\n            else if (!findValueType(value) && complex.test(target)) {\r\n                value = getAnimatableNone(key, target);\r\n            }\r\n            this.setBaseTarget(key, isMotionValue(value) ? value.get() : value);\r\n        }\r\n        return isMotionValue(value) ? value.get() : value;\r\n    }\r\n    /**\r\n     * Set the base target to later animate back to. This is currently\r\n     * only hydrated on creation and when we first read a value.\r\n     */\r\n    setBaseTarget(key, value) {\r\n        this.baseTarget[key] = value;\r\n    }\r\n    /**\r\n     * Find the base target for a value thats been removed from all animation\r\n     * props.\r\n     */\r\n    getBaseTarget(key) {\r\n        var _a;\r\n        const { initial } = this.props;\r\n        let valueFromInitial;\r\n        if (typeof initial === \"string\" || typeof initial === \"object\") {\r\n            const variant = resolveVariantFromProps(this.props, initial, (_a = this.presenceContext) === null || _a === void 0 ? void 0 : _a.custom);\r\n            if (variant) {\r\n                valueFromInitial = variant[key];\r\n            }\r\n        }\r\n        /**\r\n         * If this value still exists in the current initial variant, read that.\r\n         */\r\n        if (initial && valueFromInitial !== undefined) {\r\n            return valueFromInitial;\r\n        }\r\n        /**\r\n         * Alternatively, if this VisualElement config has defined a getBaseTarget\r\n         * so we can read the value from an alternative source, try that.\r\n         */\r\n        const target = this.getBaseTargetFromProps(this.props, key);\r\n        if (target !== undefined && !isMotionValue(target))\r\n            return target;\r\n        /**\r\n         * If the value was initially defined on initial, but it doesn't any more,\r\n         * return undefined. Otherwise return the value as initially read from the DOM.\r\n         */\r\n        return this.initialValues[key] !== undefined &&\r\n            valueFromInitial === undefined\r\n            ? undefined\r\n            : this.baseTarget[key];\r\n    }\r\n    on(eventName, callback) {\r\n        if (!this.events[eventName]) {\r\n            this.events[eventName] = new SubscriptionManager();\r\n        }\r\n        return this.events[eventName].add(callback);\r\n    }\r\n    notify(eventName, ...args) {\r\n        if (this.events[eventName]) {\r\n            this.events[eventName].notify(...args);\r\n        }\r\n    }\r\n}\r\n\r\nexport { VisualElement };\r\n","import { VisualElement } from '../VisualElement.mjs';\r\nimport { DOMKeyframesResolver } from './DOMKeyframesResolver.mjs';\r\nimport { isMotionValue } from '../../value/utils/is-motion-value.mjs';\r\n\r\nclass DOMVisualElement extends VisualElement {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.KeyframeResolver = DOMKeyframesResolver;\r\n    }\r\n    sortInstanceNodePosition(a, b) {\r\n        /**\r\n         * compareDocumentPosition returns a bitmask, by using the bitwise &\r\n         * we're returning true if 2 in that bitmask is set to true. 2 is set\r\n         * to true if b preceeds a.\r\n         */\r\n        return a.compareDocumentPosition(b) & 2 ? 1 : -1;\r\n    }\r\n    getBaseTargetFromProps(props, key) {\r\n        return props.style\r\n            ? props.style[key]\r\n            : undefined;\r\n    }\r\n    removeValueFromRenderState(key, { vars, style }) {\r\n        delete vars[key];\r\n        delete style[key];\r\n    }\r\n    handleChildMotionValue() {\r\n        if (this.childSubscription) {\r\n            this.childSubscription();\r\n            delete this.childSubscription;\r\n        }\r\n        const { children } = this.props;\r\n        if (isMotionValue(children)) {\r\n            this.childSubscription = children.on(\"change\", (latest) => {\r\n                if (this.current) {\r\n                    this.current.textContent = `${latest}`;\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\nexport { DOMVisualElement };\r\n","import { measureViewportBox } from '../../projection/utils/measure.mjs';\r\nimport { DOMVisualElement } from '../dom/DOMVisualElement.mjs';\r\nimport { isCSSVariableName } from '../dom/utils/is-css-variable.mjs';\r\nimport { getDefaultValueType } from '../dom/value-types/defaults.mjs';\r\nimport { buildHTMLStyles } from './utils/build-styles.mjs';\r\nimport { transformProps } from './utils/keys-transform.mjs';\r\nimport { renderHTML } from './utils/render.mjs';\r\nimport { scrapeMotionValuesFromProps } from './utils/scrape-motion-values.mjs';\r\n\r\nfunction getComputedStyle(element) {\r\n    return window.getComputedStyle(element);\r\n}\r\nclass HTMLVisualElement extends DOMVisualElement {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.type = \"html\";\r\n        this.renderInstance = renderHTML;\r\n    }\r\n    readValueFromInstance(instance, key) {\r\n        if (transformProps.has(key)) {\r\n            const defaultType = getDefaultValueType(key);\r\n            return defaultType ? defaultType.default || 0 : 0;\r\n        }\r\n        else {\r\n            const computedStyle = getComputedStyle(instance);\r\n            const value = (isCSSVariableName(key)\r\n                ? computedStyle.getPropertyValue(key)\r\n                : computedStyle[key]) || 0;\r\n            return typeof value === \"string\" ? value.trim() : value;\r\n        }\r\n    }\r\n    measureInstanceViewportBox(instance, { transformPagePoint }) {\r\n        return measureViewportBox(instance, transformPagePoint);\r\n    }\r\n    build(renderState, latestValues, props) {\r\n        buildHTMLStyles(renderState, latestValues, props.transformTemplate);\r\n    }\r\n    scrapeMotionValuesFromProps(props, prevProps, visualElement) {\r\n        return scrapeMotionValuesFromProps(props, prevProps, visualElement);\r\n    }\r\n}\r\n\r\nexport { HTMLVisualElement, getComputedStyle };\r\n","import { createBox } from '../../projection/geometry/models.mjs';\r\nimport { DOMVisualElement } from '../dom/DOMVisualElement.mjs';\r\nimport { camelToDash } from '../dom/utils/camel-to-dash.mjs';\r\nimport { getDefaultValueType } from '../dom/value-types/defaults.mjs';\r\nimport { transformProps } from '../html/utils/keys-transform.mjs';\r\nimport { buildSVGAttrs } from './utils/build-attrs.mjs';\r\nimport { camelCaseAttributes } from './utils/camel-case-attrs.mjs';\r\nimport { isSVGTag } from './utils/is-svg-tag.mjs';\r\nimport { renderSVG } from './utils/render.mjs';\r\nimport { scrapeMotionValuesFromProps } from './utils/scrape-motion-values.mjs';\r\n\r\nclass SVGVisualElement extends DOMVisualElement {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.type = \"svg\";\r\n        this.isSVGTag = false;\r\n        this.measureInstanceViewportBox = createBox;\r\n    }\r\n    getBaseTargetFromProps(props, key) {\r\n        return props[key];\r\n    }\r\n    readValueFromInstance(instance, key) {\r\n        if (transformProps.has(key)) {\r\n            const defaultType = getDefaultValueType(key);\r\n            return defaultType ? defaultType.default || 0 : 0;\r\n        }\r\n        key = !camelCaseAttributes.has(key) ? camelToDash(key) : key;\r\n        return instance.getAttribute(key);\r\n    }\r\n    scrapeMotionValuesFromProps(props, prevProps, visualElement) {\r\n        return scrapeMotionValuesFromProps(props, prevProps, visualElement);\r\n    }\r\n    build(renderState, latestValues, props) {\r\n        buildSVGAttrs(renderState, latestValues, this.isSVGTag, props.transformTemplate);\r\n    }\r\n    renderInstance(instance, renderState, styleProp, projection) {\r\n        renderSVG(instance, renderState, styleProp, projection);\r\n    }\r\n    mount(instance) {\r\n        this.isSVGTag = isSVGTag(instance.tagName);\r\n        super.mount(instance);\r\n    }\r\n}\r\n\r\nexport { SVGVisualElement };\r\n"],"names":["isBrowser","noop","any","invariant","MotionGlobalConfig","createRenderStep","runNextFrame","thisFrame","nextFrame","isProcessing","flushNextFrame","toKeepAlive","latestFrameData","triggerCallback","callback","step","keepAlive","immediate","queue","frameData","stepsOrder","maxElapsed","createRenderBatcher","scheduleNextBatch","allowKeepAlive","useDefaultElapsed","state","flagRunNextFrame","steps","acc","key","read","resolveKeyframes","update","preRender","render","postRender","processBatch","timestamp","wake","process","i","frame","cancelFrame","frameSteps","featureProps","featureDefinitions","props","name","isVariantLabel","v","isAnimationControls","variantPriorityOrder","variantProps","isControllingVariants","isVariantNode","camelToDash","str","optimizedAppearDataId","optimizedAppearDataAttribute","getValueState","visualElement","value","resolveVariantFromProps","definition","custom","current","velocity","isKeyframesTarget","isCustomValue","resolveFinalValueInKeyframes","isMotionValue","transformPropOrder","transformProps","checkStringStartsWith","token","isCSSVariableName","startsAsVariableToken","isCSSVariableToken","singleCssVariableRegex","getValueAsType","type","clamp","min","max","number","alpha","scale","createUnitType","unit","degrees","percent","px","vh","vw","progressPercentage","browserNumberValueTypes","transformValueTypes","int","numberValueTypes","translateAlias","numTransforms","buildTransform","latestValues","transform","transformTemplate","transformString","transformIsDefault","valueIsDefault","valueAsType","transformName","buildHTMLStyles","style","vars","transformOrigin","hasTransform","hasTransformOrigin","originX","originY","originZ","dashKeys","camelKeys","buildSVGPath","attrs","length","spacing","offset","useDashCase","keys","pathLength","pathSpacing","calcOrigin","origin","size","calcSVGTransformOrigin","dimensions","pxOriginX","pxOriginY","buildSVGAttrs","attrX","attrY","attrScale","pathOffset","latest","isSVGTag","tag","renderHTML","element","styleProp","projection","camelCaseAttributes","renderSVG","renderState","_styleProp","scaleCorrectors","addScaleCorrector","correctors","isForcedMotionValue","layout","layoutId","scrapeMotionValuesFromProps","prevProps","_a","newValues","scrapeMotionValuesFromProps$1","targetKey","resolveVariant","getValueTransition","transition","positionalKeys","now","clearTime","time","newTime","addUniqueItem","arr","item","removeItem","index","SubscriptionManager","handler","a","b","c","numSubscriptions","velocityPerSecond","frameDuration","MAX_VELOCITY_DELTA","isFloat","MotionValue","init","options","currentTime","prevFrameValue","subscription","eventName","unsubscribe","eventManagers","passiveEffect","stopPassiveEffect","prev","delta","endAnimation","startAnimation","resolve","motionValue","setMotionValue","setTarget","resolved","transitionEnd","target","isWillChangeMotionValue","addValueToWillChange","willChange","getOptimisedAppearId","memo","result","supportsScrollTimeline","BaseGroupPlaybackControls","animations","animation","propName","newValue","timeline","fallback","subscriptions","cancel","speed","methodName","controls","GroupPlaybackControls","onResolve","onReject","secondsToMilliseconds","seconds","millisecondsToSeconds","milliseconds","isGenerator","attachTimeline","isBezierDefinition","easing","supportsFlags","memoSupports","supportsFlag","memoized","supportsLinearEasing","progress","from","to","toFromDifference","generateLinearEasing","duration","resolution","points","numPoints","isWaapiSupportedEasing","supportedWaapiEasing","cubicBezierAsString","d","mapEasingToNativeEasing","segmentEasing","calcBezier","a1","a2","subdivisionPrecision","subdivisionMaxIterations","binarySubdivide","x","lowerBound","upperBound","mX1","mX2","currentX","currentT","cubicBezier","mY1","mY2","getTForX","aX","t","mirrorEasing","p","reverseEasing","backOut","backIn","backInOut","anticipate","circIn","circOut","circInOut","isZeroValueString","isNone","sanitize","floatRegex","isNullish","singleColorRegex","isColorString","testProp","splitColor","aName","bName","cName","clampRgbUnit","rgbUnit","rgba","red","green","blue","alpha$1","parseHex","r","g","hex","hsla","hue","saturation","lightness","color","colorRegex","test","_b","NUMBER_TOKEN","COLOR_TOKEN","VAR_TOKEN","VAR_FUNCTION_TOKEN","SPLIT_TOKEN","complexRegex","analyseComplexValue","originalValue","values","indexes","types","split","parsedValue","parseComplexValue","createTransformer","source","numSections","output","convertNumbersToZero","getAnimatableNone","parsed","complex","maxDefaults","applyDefaultFilter","defaultValue","functionRegex","filter","functions","defaultValueTypes","getDefaultValueType","defaultValueType","invalidTemplates","makeNoneKeyframesAnimatable","unresolvedKeyframes","noneKeyframeIndexes","animatableTemplate","keyframe","noneIndex","isNumOrPxType","getPosFromMatrix","matrix","pos","getTranslateFromMatrix","pos2","pos3","_bbox","matrix3d","transformKeys","nonTranslationalTransformKeys","removeNonTranslationalTransform","removedTransforms","positionalValues","paddingLeft","paddingRight","y","paddingTop","paddingBottom","top","left","toResolve","isScheduled","anyNeedsMeasurement","measureAllKeyframes","resolversToMeasure","resolver","elementsToMeasure","transformsToRestore","restore","readAllKeyframes","flushKeyframeResolvers","KeyframeResolver","onComplete","isAsync","currentValue","finalKeyframe","valueAsRead","isNumericalString","splitCSSVariableRegex","parseCSSVariable","match","token1","token2","getVariableValue","depth","trimmed","testValueType","auto","dimensionValueTypes","findDimensionValueType","DOMKeyframesResolver","originType","targetType","measureKeyframe","finalKeyframeIndex","unsetTransformName","unsetTransformValue","isAnimatable","hasKeyframesChanged","keyframes","canAnimate","originKeyframe","targetKeyframe","isOriginAnimatable","isTargetAnimatable","isNotNull","getFinalKeyframe","repeat","repeatType","resolvedKeyframes","MAX_RESOLVE_DELAY","BaseAnimation","autoplay","delay","repeatDelay","onUpdate","resolvedAnimation","reject","maxGeneratorDuration","calcGeneratorDuration","generator","timeStep","mixNumber","hueToRgb","q","hslaToRgba","mixImmediate","mixLinearColor","fromExpo","expo","colorTypes","getColorType","asRGBA","model","mixColor","fromRGBA","toRGBA","blended","combineFunctions","pipe","transformers","invisibleValues","mixVisibility","mixNumber$1","getMixer","mixComplex","mixArray","mixObject","numValues","blendValue","matchOrder","orderedOrigin","pointers","originIndex","originValue","template","originStats","targetStats","mix","velocitySampleDuration","calcGeneratorVelocity","resolveValue","prevT","springDefaults","safeMin","findSpring","bounce","mass","envelope","derivative","dampingRatio","undampedFreq","exponentialDecay","calcAngularFreq","e","f","initialGuess","approximateRoot","stiffness","rootIterations","durationKeys","physicsKeys","isSpringType","getSpringOptions","springOptions","visualDuration","root","damping","derived","spring","optionsOrVisualDuration","restSpeed","restDelta","isResolvedFromDuration","initialVelocity","initialDelta","undampedAngularFreq","isGranularScale","resolveSpring","angularFreq","dampedAngularFreq","freqForT","currentVelocity","isBelowVelocityThreshold","isBelowDisplacementThreshold","calculatedDuration","inertia","power","timeConstant","bounceDamping","bounceStiffness","modifyTarget","isOutOfBounds","nearestBoundary","amplitude","ideal","calcDelta","calcLatest","applyFriction","timeReachedBoundary","spring$1","checkCatchBoundary","hasUpdatedFrame","easeIn","easeOut","easeInOut","isEasingArray","ease","easingLookup","easingDefinitionToFunction","x1","y1","x2","y2","createMixers","customMixer","mixers","mixerFactory","numMixers","mixer","easingFunction","interpolate","input","isClamp","inputLength","isZeroDeltaRange","interpolator","progressInRange","fillOffset","remaining","offsetProgress","defaultOffset","convertOffsetToTimes","o","defaultEasing","keyframeValues","times","easingFunctions","absoluteTimes","mapTimeToKeyframe","frameloopDriver","passTimestamp","generators","percentToProgress","MainThreadAnimation","onStop","KeyframeResolver$1","onResolved","keyframes$1","generatorFactory","mapPercentToKeyframes","mirroredGenerator","resolvedDuration","totalDuration","sample","timeWithoutDelay","isInDelayPhase","elapsed","frameGenerator","currentIteration","iterationProgress","done","isAnimationFinished","newSpeed","hasChanged","driver","onPlay","startTime","acceleratedValues","startWaapiAnimation","valueName","keyframeOptions","supportsWaapi","sampleDelta","maxDuration","requiresPregeneratedKeyframes","pregenerateKeyframes","sampleAnimation","pregeneratedKeyframes","unsupportedEasingFunctions","isUnsupportedEase","AcceleratedAnimation","pregeneratedAnimation","sampleTime","underDampedSpring","criticallyDampedSpring","keyframesTransition","getDefaultTransition","valueKey","isTransitionDefined","when","_delay","delayChildren","staggerChildren","staggerDirection","animateMotionValue","isHandoff","valueTransition","shouldSkip","shouldBlockAnimation","protectedKeys","needsAnimating","shouldBlock","animateTarget","targetAndTransition","transitionOverride","animationTypeState","valueTarget","appearId","isDragging","isDragActive","distance","distance2D","xDelta","yDelta","createAxisDelta","createDelta","createAxis","createBox","convertBoundingBoxToBox","right","bottom","convertBoxToBoundingBox","transformBoxPoints","point","transformPoint","topLeft","bottomRight","isIdentityScale","hasScale","scaleX","scaleY","has2DTranslate","is2DTranslate","scalePoint","originPoint","distanceFromOrigin","scaled","applyPointDelta","translate","boxScale","applyAxisDelta","axis","applyBoxDelta","box","TREE_SCALE_SNAP_MIN","TREE_SCALE_SNAP_MAX","applyTreeDeltas","treeScale","treePath","isSharedTransition","treeLength","node","transformBox","translateAxis","transformAxis","axisTranslate","axisScale","axisOrigin","measureViewportBox","instance","measurePageBox","rootProjectionNode","transformPagePoint","viewportBox","scroll","animateSingleValue","motionValue$1","isSVGElement","timeout","start","checkElapsed","resolveElements","elementOrSelector","scope","selectorCache","elements","prefersReducedMotion","hasReducedMotionListener","initPrefersReducedMotion","motionMediaQuery","setReducedMotionPreferences","valueTypes","findValueType","visualElementStore","updateMotionValuesFromProps","next","nextValue","prevValue","existingValue","latestValue","propEventHandlers","VisualElement","_props","_prevProps","_visualElement","parent","presenceContext","reducedMotionConfig","blockInitialAnimation","visualState","initialMotionValues","remove","feature","valueIsTransform","removeOnChange","removeOnRenderRequest","removeSyncCheck","other","featureDefinition","isEnabled","FeatureConstructor","listenerName","listener","child","closestVariantNode","initial","valueFromInitial","variant","args","DOMVisualElement","children","getComputedStyle","HTMLVisualElement","defaultType","computedStyle","SVGVisualElement"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153]}